(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Pc={exports:{}},Uo={},xc={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd;function e_(){if(Yd)return _e;Yd=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),O=Symbol.iterator;function z(N){return N===null||typeof N!="object"?null:(N=O&&N[O]||N["@@iterator"],typeof N=="function"?N:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,Z={};function Q(N,j,ae){this.props=N,this.context=j,this.refs=Z,this.updater=ae||$}Q.prototype.isReactComponent={},Q.prototype.setState=function(N,j){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,j,"setState")},Q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Ve(){}Ve.prototype=Q.prototype;function ke(N,j,ae){this.props=N,this.context=j,this.refs=Z,this.updater=ae||$}var ve=ke.prototype=new Ve;ve.constructor=ke,te(ve,Q.prototype),ve.isPureReactComponent=!0;var we=Array.isArray,Xe=Object.prototype.hasOwnProperty,Pe={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(N,j,ae){var ge,ye={},Te=null,Le=null;if(j!=null)for(ge in j.ref!==void 0&&(Le=j.ref),j.key!==void 0&&(Te=""+j.key),j)Xe.call(j,ge)&&!P.hasOwnProperty(ge)&&(ye[ge]=j[ge]);var Oe=arguments.length-2;if(Oe===1)ye.children=ae;else if(1<Oe){for(var ze=Array(Oe),dt=0;dt<Oe;dt++)ze[dt]=arguments[dt+2];ye.children=ze}if(N&&N.defaultProps)for(ge in Oe=N.defaultProps,Oe)ye[ge]===void 0&&(ye[ge]=Oe[ge]);return{$$typeof:i,type:N,key:Te,ref:Le,props:ye,_owner:Pe.current}}function A(N,j){return{$$typeof:i,type:N.type,key:j,ref:N.ref,props:N.props,_owner:N._owner}}function k(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function x(N){var j={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ae){return j[ae]})}var D=/\/+/g;function I(N,j){return typeof N=="object"&&N!==null&&N.key!=null?x(""+N.key):j.toString(36)}function Je(N,j,ae,ge,ye){var Te=typeof N;(Te==="undefined"||Te==="boolean")&&(N=null);var Le=!1;if(N===null)Le=!0;else switch(Te){case"string":case"number":Le=!0;break;case"object":switch(N.$$typeof){case i:case e:Le=!0}}if(Le)return Le=N,ye=ye(Le),N=ge===""?"."+I(Le,0):ge,we(ye)?(ae="",N!=null&&(ae=N.replace(D,"$&/")+"/"),Je(ye,j,ae,"",function(dt){return dt})):ye!=null&&(k(ye)&&(ye=A(ye,ae+(!ye.key||Le&&Le.key===ye.key?"":(""+ye.key).replace(D,"$&/")+"/")+N)),j.push(ye)),1;if(Le=0,ge=ge===""?".":ge+":",we(N))for(var Oe=0;Oe<N.length;Oe++){Te=N[Oe];var ze=ge+I(Te,Oe);Le+=Je(Te,j,ae,ze,ye)}else if(ze=z(N),typeof ze=="function")for(N=ze.call(N),Oe=0;!(Te=N.next()).done;)Te=Te.value,ze=ge+I(Te,Oe++),Le+=Je(Te,j,ae,ze,ye);else if(Te==="object")throw j=String(N),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Le}function At(N,j,ae){if(N==null)return N;var ge=[],ye=0;return Je(N,ge,"","",function(Te){return j.call(ae,Te,ye++)}),ge}function Ct(N){if(N._status===-1){var j=N._result;j=j(),j.then(function(ae){(N._status===0||N._status===-1)&&(N._status=1,N._result=ae)},function(ae){(N._status===0||N._status===-1)&&(N._status=2,N._result=ae)}),N._status===-1&&(N._status=0,N._result=j)}if(N._status===1)return N._result.default;throw N._result}var Fe={current:null},W={transition:null},le={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:W,ReactCurrentOwner:Pe};function J(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:At,forEach:function(N,j,ae){At(N,function(){j.apply(this,arguments)},ae)},count:function(N){var j=0;return At(N,function(){j++}),j},toArray:function(N){return At(N,function(j){return j})||[]},only:function(N){if(!k(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},_e.Component=Q,_e.Fragment=n,_e.Profiler=l,_e.PureComponent=ke,_e.StrictMode=o,_e.Suspense=_,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,_e.act=J,_e.cloneElement=function(N,j,ae){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ge=te({},N.props),ye=N.key,Te=N.ref,Le=N._owner;if(j!=null){if(j.ref!==void 0&&(Te=j.ref,Le=Pe.current),j.key!==void 0&&(ye=""+j.key),N.type&&N.type.defaultProps)var Oe=N.type.defaultProps;for(ze in j)Xe.call(j,ze)&&!P.hasOwnProperty(ze)&&(ge[ze]=j[ze]===void 0&&Oe!==void 0?Oe[ze]:j[ze])}var ze=arguments.length-2;if(ze===1)ge.children=ae;else if(1<ze){Oe=Array(ze);for(var dt=0;dt<ze;dt++)Oe[dt]=arguments[dt+2];ge.children=Oe}return{$$typeof:i,type:N.type,key:ye,ref:Te,props:ge,_owner:Le}},_e.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},_e.createElement=T,_e.createFactory=function(N){var j=T.bind(null,N);return j.type=N,j},_e.createRef=function(){return{current:null}},_e.forwardRef=function(N){return{$$typeof:m,render:N}},_e.isValidElement=k,_e.lazy=function(N){return{$$typeof:S,_payload:{_status:-1,_result:N},_init:Ct}},_e.memo=function(N,j){return{$$typeof:w,type:N,compare:j===void 0?null:j}},_e.startTransition=function(N){var j=W.transition;W.transition={};try{N()}finally{W.transition=j}},_e.unstable_act=J,_e.useCallback=function(N,j){return Fe.current.useCallback(N,j)},_e.useContext=function(N){return Fe.current.useContext(N)},_e.useDebugValue=function(){},_e.useDeferredValue=function(N){return Fe.current.useDeferredValue(N)},_e.useEffect=function(N,j){return Fe.current.useEffect(N,j)},_e.useId=function(){return Fe.current.useId()},_e.useImperativeHandle=function(N,j,ae){return Fe.current.useImperativeHandle(N,j,ae)},_e.useInsertionEffect=function(N,j){return Fe.current.useInsertionEffect(N,j)},_e.useLayoutEffect=function(N,j){return Fe.current.useLayoutEffect(N,j)},_e.useMemo=function(N,j){return Fe.current.useMemo(N,j)},_e.useReducer=function(N,j,ae){return Fe.current.useReducer(N,j,ae)},_e.useRef=function(N){return Fe.current.useRef(N)},_e.useState=function(N){return Fe.current.useState(N)},_e.useSyncExternalStore=function(N,j,ae){return Fe.current.useSyncExternalStore(N,j,ae)},_e.useTransition=function(){return Fe.current.useTransition()},_e.version="18.3.1",_e}var Xd;function ph(){return Xd||(Xd=1,xc.exports=e_()),xc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd;function t_(){if(Jd)return Uo;Jd=1;var i=ph(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,_,w){var S,O={},z=null,$=null;w!==void 0&&(z=""+w),_.key!==void 0&&(z=""+_.key),_.ref!==void 0&&($=_.ref);for(S in _)o.call(_,S)&&!c.hasOwnProperty(S)&&(O[S]=_[S]);if(m&&m.defaultProps)for(S in _=m.defaultProps,_)O[S]===void 0&&(O[S]=_[S]);return{$$typeof:e,type:m,key:z,ref:$,props:O,_owner:l.current}}return Uo.Fragment=n,Uo.jsx=f,Uo.jsxs=f,Uo}var Zd;function n_(){return Zd||(Zd=1,Pc.exports=t_()),Pc.exports}var se=n_(),Lt=ph(),_l={},Nc={exports:{}},Qt={},Dc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function r_(){return ep||(ep=1,function(i){function e(W,le){var J=W.length;W.push(le);e:for(;0<J;){var N=J-1>>>1,j=W[N];if(0<l(j,le))W[N]=le,W[J]=j,J=N;else break e}}function n(W){return W.length===0?null:W[0]}function o(W){if(W.length===0)return null;var le=W[0],J=W.pop();if(J!==le){W[0]=J;e:for(var N=0,j=W.length,ae=j>>>1;N<ae;){var ge=2*(N+1)-1,ye=W[ge],Te=ge+1,Le=W[Te];if(0>l(ye,J))Te<j&&0>l(Le,ye)?(W[N]=Le,W[Te]=J,N=Te):(W[N]=ye,W[ge]=J,N=ge);else if(Te<j&&0>l(Le,J))W[N]=Le,W[Te]=J,N=Te;else break e}}return le}function l(W,le){var J=W.sortIndex-le.sortIndex;return J!==0?J:W.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var _=[],w=[],S=1,O=null,z=3,$=!1,te=!1,Z=!1,Q=typeof setTimeout=="function"?setTimeout:null,Ve=typeof clearTimeout=="function"?clearTimeout:null,ke=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(W){for(var le=n(w);le!==null;){if(le.callback===null)o(w);else if(le.startTime<=W)o(w),le.sortIndex=le.expirationTime,e(_,le);else break;le=n(w)}}function we(W){if(Z=!1,ve(W),!te)if(n(_)!==null)te=!0,Ct(Xe);else{var le=n(w);le!==null&&Fe(we,le.startTime-W)}}function Xe(W,le){te=!1,Z&&(Z=!1,Ve(T),T=-1),$=!0;var J=z;try{for(ve(le),O=n(_);O!==null&&(!(O.expirationTime>le)||W&&!x());){var N=O.callback;if(typeof N=="function"){O.callback=null,z=O.priorityLevel;var j=N(O.expirationTime<=le);le=i.unstable_now(),typeof j=="function"?O.callback=j:O===n(_)&&o(_),ve(le)}else o(_);O=n(_)}if(O!==null)var ae=!0;else{var ge=n(w);ge!==null&&Fe(we,ge.startTime-le),ae=!1}return ae}finally{O=null,z=J,$=!1}}var Pe=!1,P=null,T=-1,A=5,k=-1;function x(){return!(i.unstable_now()-k<A)}function D(){if(P!==null){var W=i.unstable_now();k=W;var le=!0;try{le=P(!0,W)}finally{le?I():(Pe=!1,P=null)}}else Pe=!1}var I;if(typeof ke=="function")I=function(){ke(D)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,At=Je.port2;Je.port1.onmessage=D,I=function(){At.postMessage(null)}}else I=function(){Q(D,0)};function Ct(W){P=W,Pe||(Pe=!0,I())}function Fe(W,le){T=Q(function(){W(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_continueExecution=function(){te||$||(te=!0,Ct(Xe))},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return z},i.unstable_getFirstCallbackNode=function(){return n(_)},i.unstable_next=function(W){switch(z){case 1:case 2:case 3:var le=3;break;default:le=z}var J=z;z=le;try{return W()}finally{z=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(W,le){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=z;z=W;try{return le()}finally{z=J}},i.unstable_scheduleCallback=function(W,le,J){var N=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?N+J:N):J=N,W){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=J+j,W={id:S++,callback:le,priorityLevel:W,startTime:J,expirationTime:j,sortIndex:-1},J>N?(W.sortIndex=J,e(w,W),n(_)===null&&W===n(w)&&(Z?(Ve(T),T=-1):Z=!0,Fe(we,J-N))):(W.sortIndex=j,e(_,W),te||$||(te=!0,Ct(Xe))),W},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(W){var le=z;return function(){var J=z;z=le;try{return W.apply(this,arguments)}finally{z=J}}}}(Vc)),Vc}var tp;function i_(){return tp||(tp=1,Dc.exports=r_()),Dc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function s_(){if(np)return Qt;np=1;var i=ph(),e=i_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(l[t]=r,t=0;t<r.length;t++)o.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},O={};function z(t){return _.call(O,t)?!0:_.call(S,t)?!1:w.test(t)?O[t]=!0:(S[t]=!0,!1)}function $(t,r,s,u){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function te(t,r,s,u){if(r===null||typeof r>"u"||$(t,r,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Z(t,r,s,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=s,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Q[t]=new Z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Q[r]=new Z(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){Q[t]=new Z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Q[t]=new Z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Q[t]=new Z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){Q[t]=new Z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){Q[t]=new Z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){Q[t]=new Z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){Q[t]=new Z(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ve=/[\-:]([a-z])/g;function ke(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Ve,ke);Q[r]=new Z(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Ve,ke);Q[r]=new Z(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Ve,ke);Q[r]=new Z(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){Q[t]=new Z(t,1,!1,t.toLowerCase(),null,!1,!1)}),Q.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){Q[t]=new Z(t,1,!1,t.toLowerCase(),null,!0,!0)});function ve(t,r,s,u){var h=Q.hasOwnProperty(r)?Q[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(te(r,s,h,u)&&(s=null),u||h===null?z(r)&&(s===null?t.removeAttribute(r):t.setAttribute(r,""+s)):h.mustUseProperty?t[h.propertyName]=s===null?h.type===3?!1:"":s:(r=h.attributeName,u=h.attributeNamespace,s===null?t.removeAttribute(r):(h=h.type,s=h===3||h===4&&s===!0?"":""+s,u?t.setAttributeNS(u,r,s):t.setAttribute(r,s))))}var we=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xe=Symbol.for("react.element"),Pe=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Je=Symbol.for("react.suspense_list"),At=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),W=Symbol.iterator;function le(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var J=Object.assign,N;function j(t){if(N===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+t}var ae=!1;function ge(t,r){if(!t||ae)return"";ae=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var u=F}Reflect.construct(t,[],r)}else{try{r.call()}catch(F){u=F}t.call(r.prototype)}else{try{throw Error()}catch(F){u=F}t()}}catch(F){if(F&&u&&typeof F.stack=="string"){for(var h=F.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,E=p.length-1;1<=y&&0<=E&&h[y]!==p[E];)E--;for(;1<=y&&0<=E;y--,E--)if(h[y]!==p[E]){if(y!==1||E!==1)do if(y--,E--,0>E||h[y]!==p[E]){var C=`
`+h[y].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=y&&0<=E);break}}}finally{ae=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?j(t):""}function ye(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=ge(t.type,!1),t;case 11:return t=ge(t.type.render,!1),t;case 1:return t=ge(t.type,!0),t;default:return""}}function Te(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case Pe:return"Portal";case A:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case Je:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case D:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case At:return r=t.displayName||null,r!==null?r:Te(t.type)||"Memo";case Ct:r=t._payload,t=t._init;try{return Te(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Oe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ze(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function dt(t){var r=ze(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,p=s.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Qn(t){t._valueTracker||(t._valueTracker=dt(t))}function Li(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),u="";return t&&(u=ze(t)?t.checked?"true":"false":t.value),t=u,t!==s?(r.setValue(t),!0):!1}function pr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yr(t,r){var s=r.checked;return J({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Oi(t,r){var s=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;s=Oe(r.value!=null?r.value:s),t._wrapperState={initialChecked:u,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function qs(t,r){r=r.checked,r!=null&&ve(t,"checked",r,!1)}function $s(t,r){qs(t,r);var s=Oe(r.value),u=r.type;if(s!=null)u==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Mi(t,r.type,s):r.hasOwnProperty("defaultValue")&&Mi(t,r.type,Oe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function ra(t,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,s||r===t.value||(t.value=r),t.defaultValue=r}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Mi(t,r,s){(r!=="number"||pr(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Kn=Array.isArray;function Wn(t,r,s,u){if(t=t.options,r){r={};for(var h=0;h<s.length;h++)r["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=r.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&u&&(t[s].defaultSelected=!0)}else{for(s=""+Oe(s),r=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Hs(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fi(t,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(n(92));if(Kn(s)){if(1<s.length)throw Error(n(93));s=s[0]}r=s}r==null&&(r=""),s=r}t._wrapperState={initialValue:Oe(s)}}function Ui(t,r){var s=Oe(r.value),u=Oe(r.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),r.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),u!=null&&(t.defaultValue=""+u)}function Gs(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ot(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yn,Qs=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,s,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Yn=Yn||document.createElement("div"),Yn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Yn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function mr(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var Xr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jr=["Webkit","ms","Moz","O"];Object.keys(Xr).forEach(function(t){Jr.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Xr[r]=Xr[t]})});function Ks(t,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||Xr.hasOwnProperty(t)&&Xr[t]?(""+r).trim():r+"px"}function Ws(t,r){t=t.style;for(var s in r)if(r.hasOwnProperty(s)){var u=s.indexOf("--")===0,h=Ks(s,r[s],u);s==="float"&&(s="cssFloat"),u?t.setProperty(s,h):t[s]=h}}var Ys=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xs(t,r){if(r){if(Ys[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function Js(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zr=null;function zi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ji=null,on=null,Nn=null;function Bi(t){if(t=Io(t)){if(typeof ji!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Va(r),ji(t.stateNode,t.type,r))}}function Dn(t){on?Nn?Nn.push(t):Nn=[t]:on=t}function Zs(){if(on){var t=on,r=Nn;if(Nn=on=null,Bi(t),r)for(t=0;t<r.length;t++)Bi(r[t])}}function ei(t,r){return t(r)}function eo(){}var Xn=!1;function to(t,r,s){if(Xn)return t(r,s);Xn=!0;try{return ei(t,r,s)}finally{Xn=!1,(on!==null||Nn!==null)&&(eo(),Zs())}}function Ze(t,r){var s=t.stateNode;if(s===null)return null;var u=Va(s);if(u===null)return null;s=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(n(231,r,typeof s));return s}var bi=!1;if(m)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){bi=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{bi=!1}function ti(t,r,s,u,h,p,y,E,C){var F=Array.prototype.slice.call(arguments,3);try{r.apply(s,F)}catch(q){this.onError(q)}}var ni=!1,qi=null,yn=!1,no=null,ru={onError:function(t){ni=!0,qi=t}};function $i(t,r,s,u,h,p,y,E,C){ni=!1,qi=null,ti.apply(ru,arguments)}function ia(t,r,s,u,h,p,y,E,C){if($i.apply(this,arguments),ni){if(ni){var F=qi;ni=!1,qi=null}else throw Error(n(198));yn||(yn=!0,no=F)}}function _n(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function ri(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function vn(t){if(_n(t)!==t)throw Error(n(188))}function sa(t){var r=t.alternate;if(!r){if(r=_n(t),r===null)throw Error(n(188));return r!==t?null:t}for(var s=t,u=r;;){var h=s.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){s=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===s)return vn(h),t;if(p===u)return vn(h),r;p=p.sibling}throw Error(n(188))}if(s.return!==u.return)s=h,u=p;else{for(var y=!1,E=h.child;E;){if(E===s){y=!0,s=h,u=p;break}if(E===u){y=!0,u=h,s=p;break}E=E.sibling}if(!y){for(E=p.child;E;){if(E===s){y=!0,s=p,u=h;break}if(E===u){y=!0,u=p,s=h;break}E=E.sibling}if(!y)throw Error(n(189))}}if(s.alternate!==u)throw Error(n(190))}if(s.tag!==3)throw Error(n(188));return s.stateNode.current===s?t:r}function ro(t){return t=sa(t),t!==null?Hi(t):null}function Hi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Hi(t);if(r!==null)return r;t=t.sibling}return null}var Gi=e.unstable_scheduleCallback,io=e.unstable_cancelCallback,oa=e.unstable_shouldYield,iu=e.unstable_requestPaint,je=e.unstable_now,aa=e.unstable_getCurrentPriorityLevel,ii=e.unstable_ImmediatePriority,gr=e.unstable_UserBlockingPriority,an=e.unstable_NormalPriority,so=e.unstable_LowPriority,la=e.unstable_IdlePriority,si=null,Xt=null;function ua(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(si,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:ha,oo=Math.log,ca=Math.LN2;function ha(t){return t>>>=0,t===0?32:31-(oo(t)/ca|0)|0}var Qi=64,Ki=4194304;function yr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oi(t,r){var s=t.pendingLanes;if(s===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=s&268435455;if(y!==0){var E=y&~h;E!==0?u=yr(E):(p&=y,p!==0&&(u=yr(p)))}else y=s&~h,y!==0?u=yr(y):p!==0&&(u=yr(p));if(u===0)return 0;if(r!==0&&r!==u&&!(r&h)&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if(u&4&&(u|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)s=31-Ot(r),h=1<<s,u|=t[s],r&=~h;return u}function su(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jn(t,r){for(var s=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-Ot(p),E=1<<y,C=h[y];C===-1?(!(E&s)||E&u)&&(h[y]=su(E,r)):C<=r&&(t.expiredLanes|=E),p&=~E}}function Jt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ai(){var t=Qi;return Qi<<=1,!(Qi&4194240)&&(Qi=64),t}function _r(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function vr(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ot(r),t[r]=s}function Ue(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var h=31-Ot(s),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,s&=~p}}function wr(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var u=31-Ot(s),h=1<<u;h&r|t[u]&r&&(t[u]|=r),s&=~h}}var Ee=0;function Er(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fa,Wi,da,pa,ma,ao=!1,Vn=[],vt=null,wn=null,En=null,Tr=new Map,ln=new Map,Ln=[],ou="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ga(t,r){switch(t){case"focusin":case"focusout":vt=null;break;case"dragenter":case"dragleave":wn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Tr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ln.delete(r.pointerId)}}function jt(t,r,s,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:s,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Io(r),r!==null&&Wi(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function au(t,r,s,u,h){switch(r){case"focusin":return vt=jt(vt,t,r,s,u,h),!0;case"dragenter":return wn=jt(wn,t,r,s,u,h),!0;case"mouseover":return En=jt(En,t,r,s,u,h),!0;case"pointerover":var p=h.pointerId;return Tr.set(p,jt(Tr.get(p)||null,t,r,s,u,h)),!0;case"gotpointercapture":return p=h.pointerId,ln.set(p,jt(ln.get(p)||null,t,r,s,u,h)),!0}return!1}function ya(t){var r=fi(t.target);if(r!==null){var s=_n(r);if(s!==null){if(r=s.tag,r===13){if(r=ri(s),r!==null){t.blockedOn=r,ma(t.priority,function(){da(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zn(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=Yi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);Zr=u,s.target.dispatchEvent(u),Zr=null}else return r=Io(s),r!==null&&Wi(r),t.blockedOn=s,!1;r.shift()}return!0}function li(t,r,s){Zn(t)&&s.delete(r)}function _a(){ao=!1,vt!==null&&Zn(vt)&&(vt=null),wn!==null&&Zn(wn)&&(wn=null),En!==null&&Zn(En)&&(En=null),Tr.forEach(li),ln.forEach(li)}function Tn(t,r){t.blockedOn===r&&(t.blockedOn=null,ao||(ao=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_a)))}function In(t){function r(h){return Tn(h,t)}if(0<Vn.length){Tn(Vn[0],t);for(var s=1;s<Vn.length;s++){var u=Vn[s];u.blockedOn===t&&(u.blockedOn=null)}}for(vt!==null&&Tn(vt,t),wn!==null&&Tn(wn,t),En!==null&&Tn(En,t),Tr.forEach(r),ln.forEach(r),s=0;s<Ln.length;s++)u=Ln[s],u.blockedOn===t&&(u.blockedOn=null);for(;0<Ln.length&&(s=Ln[0],s.blockedOn===null);)ya(s),s.blockedOn===null&&Ln.shift()}var er=we.ReactCurrentBatchConfig,Ir=!0;function $e(t,r,s,u){var h=Ee,p=er.transition;er.transition=null;try{Ee=1,lo(t,r,s,u)}finally{Ee=h,er.transition=p}}function lu(t,r,s,u){var h=Ee,p=er.transition;er.transition=null;try{Ee=4,lo(t,r,s,u)}finally{Ee=h,er.transition=p}}function lo(t,r,s,u){if(Ir){var h=Yi(t,r,s,u);if(h===null)vu(t,r,u,ui,s),ga(t,u);else if(au(h,t,r,s,u))u.stopPropagation();else if(ga(t,u),r&4&&-1<ou.indexOf(t)){for(;h!==null;){var p=Io(h);if(p!==null&&fa(p),p=Yi(t,r,s,u),p===null&&vu(t,r,u,ui,s),p===h)break;h=p}h!==null&&u.stopPropagation()}else vu(t,r,u,null,s)}}var ui=null;function Yi(t,r,s,u){if(ui=null,t=zi(u),t=fi(t),t!==null)if(r=_n(t),r===null)t=null;else if(s=r.tag,s===13){if(t=ri(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return ui=t,null}function uo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aa()){case ii:return 1;case gr:return 4;case an:case so:return 16;case la:return 536870912;default:return 16}default:return 16}}var Zt=null,Xi=null,Bt=null;function co(){if(Bt)return Bt;var t,r=Xi,s=r.length,u,h="value"in Zt?Zt.value:Zt.textContent,p=h.length;for(t=0;t<s&&r[t]===h[t];t++);var y=s-t;for(u=1;u<=y&&r[s-u]===h[p-u];u++);return Bt=h.slice(t,1<u?1-u:void 0)}function Ji(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function On(){return!0}function ho(){return!1}function wt(t){function r(s,u,h,p,y){this._reactName=s,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(s=t[E],this[E]=s?s(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?On:ho,this.isPropagationStopped=ho,this}return J(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=On)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=On)},persist:function(){},isPersistent:On}),r}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=wt(Sn),Mn=J({},Sn,{view:0,detail:0}),uu=wt(Mn),es,tr,Sr,ci=J({},Mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sr&&(Sr&&t.type==="mousemove"?(es=t.screenX-Sr.screenX,tr=t.screenY-Sr.screenY):tr=es=0,Sr=t),es)},movementY:function(t){return"movementY"in t?t.movementY:tr}}),ts=wt(ci),fo=J({},ci,{dataTransfer:0}),va=wt(fo),ns=J({},Mn,{relatedTarget:0}),rs=wt(ns),wa=J({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0}),nr=wt(wa),Ea=J({},Sn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ta=wt(Ea),Ia=J({},Sn,{data:0}),po=wt(Ia),is={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Aa(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Sa[t])?!!r[t]:!1}function Fn(){return Aa}var a=J({},Mn,{key:function(t){if(t.key){var r=is[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ji(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fn,charCode:function(t){return t.type==="keypress"?Ji(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ji(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=wt(a),g=J({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v=wt(g),V=J({},Mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fn}),U=wt(V),K=J({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Me=wt(K),lt=J({},ci,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ie=wt(lt),pt=[9,13,27,32],rt=m&&"CompositionEvent"in window,un=null;m&&"documentMode"in document&&(un=document.documentMode);var en=m&&"TextEvent"in window&&!un,hi=m&&(!rt||un&&8<un&&11>=un),ss=" ",qh=!1;function $h(t,r){switch(t){case"keyup":return pt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var os=!1;function Jg(t,r){switch(t){case"compositionend":return Hh(r);case"keypress":return r.which!==32?null:(qh=!0,ss);case"textInput":return t=r.data,t===ss&&qh?null:t;default:return null}}function Zg(t,r){if(os)return t==="compositionend"||!rt&&$h(t,r)?(t=co(),Bt=Xi=Zt=null,os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return hi&&r.locale!=="ko"?null:r.data;default:return null}}var ey={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ey[t.type]:r==="textarea"}function Qh(t,r,s,u){Dn(u),r=xa(r,"onChange"),0<r.length&&(s=new Zi("onChange","change",null,s,u),t.push({event:s,listeners:r}))}var mo=null,go=null;function ty(t){ff(t,0)}function Ca(t){var r=hs(t);if(Li(r))return t}function ny(t,r){if(t==="change")return r}var Kh=!1;if(m){var cu;if(m){var hu="oninput"in document;if(!hu){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),hu=typeof Wh.oninput=="function"}cu=hu}else cu=!1;Kh=cu&&(!document.documentMode||9<document.documentMode)}function Yh(){mo&&(mo.detachEvent("onpropertychange",Xh),go=mo=null)}function Xh(t){if(t.propertyName==="value"&&Ca(go)){var r=[];Qh(r,go,t,zi(t)),to(ty,r)}}function ry(t,r,s){t==="focusin"?(Yh(),mo=r,go=s,mo.attachEvent("onpropertychange",Xh)):t==="focusout"&&Yh()}function iy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ca(go)}function sy(t,r){if(t==="click")return Ca(r)}function oy(t,r){if(t==="input"||t==="change")return Ca(r)}function ay(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var An=typeof Object.is=="function"?Object.is:ay;function yo(t,r){if(An(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),u=Object.keys(r);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var h=s[u];if(!_.call(r,h)||!An(t[h],r[h]))return!1}return!0}function Jh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zh(t,r){var s=Jh(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=r&&u>=r)return{node:s,offset:r-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Jh(s)}}function ef(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?ef(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function tf(){for(var t=window,r=pr();r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=pr(t.document)}return r}function fu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function ly(t){var r=tf(),s=t.focusedElem,u=t.selectionRange;if(r!==s&&s&&s.ownerDocument&&ef(s.ownerDocument.documentElement,s)){if(u!==null&&fu(s)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(t,s.value.length);else if(t=(r=s.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=s.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=Zh(s,p);var y=Zh(s,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=s;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)t=r[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uy=m&&"documentMode"in document&&11>=document.documentMode,as=null,du=null,_o=null,pu=!1;function nf(t,r,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;pu||as==null||as!==pr(u)||(u=as,"selectionStart"in u&&fu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_o&&yo(_o,u)||(_o=u,u=xa(du,"onSelect"),0<u.length&&(r=new Zi("onSelect","select",null,r,s),t.push({event:r,listeners:u}),r.target=as)))}function Ra(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var ls={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},mu={},rf={};m&&(rf=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function ka(t){if(mu[t])return mu[t];if(!ls[t])return t;var r=ls[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in rf)return mu[t]=r[s];return t}var sf=ka("animationend"),of=ka("animationiteration"),af=ka("animationstart"),lf=ka("transitionend"),uf=new Map,cf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,r){uf.set(t,r),c(r,[t])}for(var gu=0;gu<cf.length;gu++){var yu=cf[gu],cy=yu.toLowerCase(),hy=yu[0].toUpperCase()+yu.slice(1);Ar(cy,"on"+hy)}Ar(sf,"onAnimationEnd"),Ar(of,"onAnimationIteration"),Ar(af,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(lf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function hf(t,r,s){var u=t.type||"unknown-event";t.currentTarget=s,ia(u,r,void 0,t),t.currentTarget=null}function ff(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var E=u[y],C=E.instance,F=E.currentTarget;if(E=E.listener,C!==p&&h.isPropagationStopped())break e;hf(h,E,F),p=C}else for(y=0;y<u.length;y++){if(E=u[y],C=E.instance,F=E.currentTarget,E=E.listener,C!==p&&h.isPropagationStopped())break e;hf(h,E,F),p=C}}}if(yn)throw t=no,yn=!1,no=null,t}function be(t,r){var s=r[Au];s===void 0&&(s=r[Au]=new Set);var u=t+"__bubble";s.has(u)||(df(r,t,2,!1),s.add(u))}function _u(t,r,s){var u=0;r&&(u|=4),df(s,t,u,r)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function wo(t){if(!t[Pa]){t[Pa]=!0,o.forEach(function(s){s!=="selectionchange"&&(fy.has(s)||_u(s,!1,t),_u(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Pa]||(r[Pa]=!0,_u("selectionchange",!1,r))}}function df(t,r,s,u){switch(uo(r)){case 1:var h=$e;break;case 4:h=lu;break;default:h=lo}s=h.bind(null,r,s,t),h=void 0,!bi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,s,{capture:!0,passive:h}):t.addEventListener(r,s,!0):h!==void 0?t.addEventListener(r,s,{passive:h}):t.addEventListener(r,s,!1)}function vu(t,r,s,u,h){var p=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var E=u.stateNode.containerInfo;if(E===h||E.nodeType===8&&E.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var C=y.tag;if((C===3||C===4)&&(C=y.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;y=y.return}for(;E!==null;){if(y=fi(E),y===null)return;if(C=y.tag,C===5||C===6){u=p=y;continue e}E=E.parentNode}}u=u.return}to(function(){var F=p,q=zi(s),H=[];e:{var b=uf.get(t);if(b!==void 0){var X=Zi,re=t;switch(t){case"keypress":if(Ji(s)===0)break e;case"keydown":case"keyup":X=d;break;case"focusin":re="focus",X=rs;break;case"focusout":re="blur",X=rs;break;case"beforeblur":case"afterblur":X=rs;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ts;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=va;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=U;break;case sf:case of:case af:X=nr;break;case lf:X=Me;break;case"scroll":X=uu;break;case"wheel":X=Ie;break;case"copy":case"cut":case"paste":X=Ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=v}var ie=(r&4)!==0,et=!ie&&t==="scroll",L=ie?b!==null?b+"Capture":null:b;ie=[];for(var R=F,M;R!==null;){M=R;var G=M.stateNode;if(M.tag===5&&G!==null&&(M=G,L!==null&&(G=Ze(R,L),G!=null&&ie.push(Eo(R,G,M)))),et)break;R=R.return}0<ie.length&&(b=new X(b,re,null,s,q),H.push({event:b,listeners:ie}))}}if(!(r&7)){e:{if(b=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",b&&s!==Zr&&(re=s.relatedTarget||s.fromElement)&&(fi(re)||re[rr]))break e;if((X||b)&&(b=q.window===q?q:(b=q.ownerDocument)?b.defaultView||b.parentWindow:window,X?(re=s.relatedTarget||s.toElement,X=F,re=re?fi(re):null,re!==null&&(et=_n(re),re!==et||re.tag!==5&&re.tag!==6)&&(re=null)):(X=null,re=F),X!==re)){if(ie=ts,G="onMouseLeave",L="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(ie=v,G="onPointerLeave",L="onPointerEnter",R="pointer"),et=X==null?b:hs(X),M=re==null?b:hs(re),b=new ie(G,R+"leave",X,s,q),b.target=et,b.relatedTarget=M,G=null,fi(q)===F&&(ie=new ie(L,R+"enter",re,s,q),ie.target=M,ie.relatedTarget=et,G=ie),et=G,X&&re)t:{for(ie=X,L=re,R=0,M=ie;M;M=us(M))R++;for(M=0,G=L;G;G=us(G))M++;for(;0<R-M;)ie=us(ie),R--;for(;0<M-R;)L=us(L),M--;for(;R--;){if(ie===L||L!==null&&ie===L.alternate)break t;ie=us(ie),L=us(L)}ie=null}else ie=null;X!==null&&pf(H,b,X,ie,!1),re!==null&&et!==null&&pf(H,et,re,ie,!0)}}e:{if(b=F?hs(F):window,X=b.nodeName&&b.nodeName.toLowerCase(),X==="select"||X==="input"&&b.type==="file")var oe=ny;else if(Gh(b))if(Kh)oe=oy;else{oe=iy;var ue=ry}else(X=b.nodeName)&&X.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(oe=sy);if(oe&&(oe=oe(t,F))){Qh(H,oe,s,q);break e}ue&&ue(t,b,F),t==="focusout"&&(ue=b._wrapperState)&&ue.controlled&&b.type==="number"&&Mi(b,"number",b.value)}switch(ue=F?hs(F):window,t){case"focusin":(Gh(ue)||ue.contentEditable==="true")&&(as=ue,du=F,_o=null);break;case"focusout":_o=du=as=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,nf(H,s,q);break;case"selectionchange":if(uy)break;case"keydown":case"keyup":nf(H,s,q)}var ce;if(rt)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else os?$h(t,s)&&(de="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(de="onCompositionStart");de&&(hi&&s.locale!=="ko"&&(os||de!=="onCompositionStart"?de==="onCompositionEnd"&&os&&(ce=co()):(Zt=q,Xi="value"in Zt?Zt.value:Zt.textContent,os=!0)),ue=xa(F,de),0<ue.length&&(de=new po(de,t,null,s,q),H.push({event:de,listeners:ue}),ce?de.data=ce:(ce=Hh(s),ce!==null&&(de.data=ce)))),(ce=en?Jg(t,s):Zg(t,s))&&(F=xa(F,"onBeforeInput"),0<F.length&&(q=new po("onBeforeInput","beforeinput",null,s,q),H.push({event:q,listeners:F}),q.data=ce))}ff(H,r)})}function Eo(t,r,s){return{instance:t,listener:r,currentTarget:s}}function xa(t,r){for(var s=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=Ze(t,s),p!=null&&u.unshift(Eo(t,p,h)),p=Ze(t,r),p!=null&&u.push(Eo(t,p,h))),t=t.return}return u}function us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pf(t,r,s,u,h){for(var p=r._reactName,y=[];s!==null&&s!==u;){var E=s,C=E.alternate,F=E.stateNode;if(C!==null&&C===u)break;E.tag===5&&F!==null&&(E=F,h?(C=Ze(s,p),C!=null&&y.unshift(Eo(s,C,E))):h||(C=Ze(s,p),C!=null&&y.push(Eo(s,C,E)))),s=s.return}y.length!==0&&t.push({event:r,listeners:y})}var dy=/\r\n?/g,py=/\u0000|\uFFFD/g;function mf(t){return(typeof t=="string"?t:""+t).replace(dy,`
`).replace(py,"")}function Na(t,r,s){if(r=mf(r),mf(t)!==r&&s)throw Error(n(425))}function Da(){}var wu=null,Eu=null;function Tu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Iu=typeof setTimeout=="function"?setTimeout:void 0,my=typeof clearTimeout=="function"?clearTimeout:void 0,gf=typeof Promise=="function"?Promise:void 0,gy=typeof queueMicrotask=="function"?queueMicrotask:typeof gf<"u"?function(t){return gf.resolve(null).then(t).catch(yy)}:Iu;function yy(t){setTimeout(function(){throw t})}function Su(t,r){var s=r,u=0;do{var h=s.nextSibling;if(t.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(u===0){t.removeChild(h),In(r);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=h}while(s);In(r)}function Cr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function yf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return t;r--}else s==="/$"&&r++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),Un="__reactFiber$"+cs,To="__reactProps$"+cs,rr="__reactContainer$"+cs,Au="__reactEvents$"+cs,_y="__reactListeners$"+cs,vy="__reactHandles$"+cs;function fi(t){var r=t[Un];if(r)return r;for(var s=t.parentNode;s;){if(r=s[rr]||s[Un]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=yf(t);t!==null;){if(s=t[Un])return s;t=yf(t)}return r}t=s,s=t.parentNode}return null}function Io(t){return t=t[Un]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Va(t){return t[To]||null}var Cu=[],fs=-1;function Rr(t){return{current:t}}function qe(t){0>fs||(t.current=Cu[fs],Cu[fs]=null,fs--)}function Be(t,r){fs++,Cu[fs]=t.current,t.current=r}var kr={},Rt=Rr(kr),bt=Rr(!1),di=kr;function ds(t,r){var s=t.type.contextTypes;if(!s)return kr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in s)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function qt(t){return t=t.childContextTypes,t!=null}function La(){qe(bt),qe(Rt)}function _f(t,r,s){if(Rt.current!==kr)throw Error(n(168));Be(Rt,r),Be(bt,s)}function vf(t,r,s){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return J({},s,u)}function Oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,di=Rt.current,Be(Rt,t),Be(bt,bt.current),!0}function wf(t,r,s){var u=t.stateNode;if(!u)throw Error(n(169));s?(t=vf(t,r,di),u.__reactInternalMemoizedMergedChildContext=t,qe(bt),qe(Rt),Be(Rt,t)):qe(bt),Be(bt,s)}var ir=null,Ma=!1,Ru=!1;function Ef(t){ir===null?ir=[t]:ir.push(t)}function wy(t){Ma=!0,Ef(t)}function Pr(){if(!Ru&&ir!==null){Ru=!0;var t=0,r=Ee;try{var s=ir;for(Ee=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}ir=null,Ma=!1}catch(h){throw ir!==null&&(ir=ir.slice(t+1)),Gi(ii,Pr),h}finally{Ee=r,Ru=!1}}return null}var ps=[],ms=0,Fa=null,Ua=0,cn=[],hn=0,pi=null,sr=1,or="";function mi(t,r){ps[ms++]=Ua,ps[ms++]=Fa,Fa=t,Ua=r}function Tf(t,r,s){cn[hn++]=sr,cn[hn++]=or,cn[hn++]=pi,pi=t;var u=sr;t=or;var h=32-Ot(u)-1;u&=~(1<<h),s+=1;var p=32-Ot(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,sr=1<<32-Ot(r)+h|s<<h|u,or=p+t}else sr=1<<p|s<<h|u,or=t}function ku(t){t.return!==null&&(mi(t,1),Tf(t,1,0))}function Pu(t){for(;t===Fa;)Fa=ps[--ms],ps[ms]=null,Ua=ps[--ms],ps[ms]=null;for(;t===pi;)pi=cn[--hn],cn[hn]=null,or=cn[--hn],cn[hn]=null,sr=cn[--hn],cn[hn]=null}var tn=null,nn=null,He=!1,Cn=null;function If(t,r){var s=mn(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function Sf(t,r){switch(t.tag){case 5:var s=t.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,tn=t,nn=Cr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,tn=t,nn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=pi!==null?{id:sr,overflow:or}:null,t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=mn(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,tn=t,nn=null,!0):!1;default:return!1}}function xu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nu(t){if(He){var r=nn;if(r){var s=r;if(!Sf(t,r)){if(xu(t))throw Error(n(418));r=Cr(s.nextSibling);var u=tn;r&&Sf(t,r)?If(u,s):(t.flags=t.flags&-4097|2,He=!1,tn=t)}}else{if(xu(t))throw Error(n(418));t.flags=t.flags&-4097|2,He=!1,tn=t}}}function Af(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function za(t){if(t!==tn)return!1;if(!He)return Af(t),He=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Tu(t.type,t.memoizedProps)),r&&(r=nn)){if(xu(t))throw Cf(),Error(n(418));for(;r;)If(t,r),r=Cr(r.nextSibling)}if(Af(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(r===0){nn=Cr(t.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}t=t.nextSibling}nn=null}}else nn=tn?Cr(t.stateNode.nextSibling):null;return!0}function Cf(){for(var t=nn;t;)t=Cr(t.nextSibling)}function gs(){nn=tn=null,He=!1}function Du(t){Cn===null?Cn=[t]:Cn.push(t)}var Ey=we.ReactCurrentBatchConfig;function So(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(n(309));var u=s.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var E=h.refs;y===null?delete E[p]:E[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!s._owner)throw Error(n(290,t))}return t}function ja(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Rf(t){var r=t._init;return r(t._payload)}function kf(t){function r(L,R){if(t){var M=L.deletions;M===null?(L.deletions=[R],L.flags|=16):M.push(R)}}function s(L,R){if(!t)return null;for(;R!==null;)r(L,R),R=R.sibling;return null}function u(L,R){for(L=new Map;R!==null;)R.key!==null?L.set(R.key,R):L.set(R.index,R),R=R.sibling;return L}function h(L,R){return L=Fr(L,R),L.index=0,L.sibling=null,L}function p(L,R,M){return L.index=M,t?(M=L.alternate,M!==null?(M=M.index,M<R?(L.flags|=2,R):M):(L.flags|=2,R)):(L.flags|=1048576,R)}function y(L){return t&&L.alternate===null&&(L.flags|=2),L}function E(L,R,M,G){return R===null||R.tag!==6?(R=Ic(M,L.mode,G),R.return=L,R):(R=h(R,M),R.return=L,R)}function C(L,R,M,G){var oe=M.type;return oe===P?q(L,R,M.props.children,G,M.key):R!==null&&(R.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Ct&&Rf(oe)===R.type)?(G=h(R,M.props),G.ref=So(L,R,M),G.return=L,G):(G=cl(M.type,M.key,M.props,null,L.mode,G),G.ref=So(L,R,M),G.return=L,G)}function F(L,R,M,G){return R===null||R.tag!==4||R.stateNode.containerInfo!==M.containerInfo||R.stateNode.implementation!==M.implementation?(R=Sc(M,L.mode,G),R.return=L,R):(R=h(R,M.children||[]),R.return=L,R)}function q(L,R,M,G,oe){return R===null||R.tag!==7?(R=Ii(M,L.mode,G,oe),R.return=L,R):(R=h(R,M),R.return=L,R)}function H(L,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Ic(""+R,L.mode,M),R.return=L,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Xe:return M=cl(R.type,R.key,R.props,null,L.mode,M),M.ref=So(L,null,R),M.return=L,M;case Pe:return R=Sc(R,L.mode,M),R.return=L,R;case Ct:var G=R._init;return H(L,G(R._payload),M)}if(Kn(R)||le(R))return R=Ii(R,L.mode,M,null),R.return=L,R;ja(L,R)}return null}function b(L,R,M,G){var oe=R!==null?R.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return oe!==null?null:E(L,R,""+M,G);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Xe:return M.key===oe?C(L,R,M,G):null;case Pe:return M.key===oe?F(L,R,M,G):null;case Ct:return oe=M._init,b(L,R,oe(M._payload),G)}if(Kn(M)||le(M))return oe!==null?null:q(L,R,M,G,null);ja(L,M)}return null}function X(L,R,M,G,oe){if(typeof G=="string"&&G!==""||typeof G=="number")return L=L.get(M)||null,E(R,L,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Xe:return L=L.get(G.key===null?M:G.key)||null,C(R,L,G,oe);case Pe:return L=L.get(G.key===null?M:G.key)||null,F(R,L,G,oe);case Ct:var ue=G._init;return X(L,R,M,ue(G._payload),oe)}if(Kn(G)||le(G))return L=L.get(M)||null,q(R,L,G,oe,null);ja(R,G)}return null}function re(L,R,M,G){for(var oe=null,ue=null,ce=R,de=R=0,yt=null;ce!==null&&de<M.length;de++){ce.index>de?(yt=ce,ce=null):yt=ce.sibling;var De=b(L,ce,M[de],G);if(De===null){ce===null&&(ce=yt);break}t&&ce&&De.alternate===null&&r(L,ce),R=p(De,R,de),ue===null?oe=De:ue.sibling=De,ue=De,ce=yt}if(de===M.length)return s(L,ce),He&&mi(L,de),oe;if(ce===null){for(;de<M.length;de++)ce=H(L,M[de],G),ce!==null&&(R=p(ce,R,de),ue===null?oe=ce:ue.sibling=ce,ue=ce);return He&&mi(L,de),oe}for(ce=u(L,ce);de<M.length;de++)yt=X(ce,L,de,M[de],G),yt!==null&&(t&&yt.alternate!==null&&ce.delete(yt.key===null?de:yt.key),R=p(yt,R,de),ue===null?oe=yt:ue.sibling=yt,ue=yt);return t&&ce.forEach(function(Ur){return r(L,Ur)}),He&&mi(L,de),oe}function ie(L,R,M,G){var oe=le(M);if(typeof oe!="function")throw Error(n(150));if(M=oe.call(M),M==null)throw Error(n(151));for(var ue=oe=null,ce=R,de=R=0,yt=null,De=M.next();ce!==null&&!De.done;de++,De=M.next()){ce.index>de?(yt=ce,ce=null):yt=ce.sibling;var Ur=b(L,ce,De.value,G);if(Ur===null){ce===null&&(ce=yt);break}t&&ce&&Ur.alternate===null&&r(L,ce),R=p(Ur,R,de),ue===null?oe=Ur:ue.sibling=Ur,ue=Ur,ce=yt}if(De.done)return s(L,ce),He&&mi(L,de),oe;if(ce===null){for(;!De.done;de++,De=M.next())De=H(L,De.value,G),De!==null&&(R=p(De,R,de),ue===null?oe=De:ue.sibling=De,ue=De);return He&&mi(L,de),oe}for(ce=u(L,ce);!De.done;de++,De=M.next())De=X(ce,L,de,De.value,G),De!==null&&(t&&De.alternate!==null&&ce.delete(De.key===null?de:De.key),R=p(De,R,de),ue===null?oe=De:ue.sibling=De,ue=De);return t&&ce.forEach(function(Zy){return r(L,Zy)}),He&&mi(L,de),oe}function et(L,R,M,G){if(typeof M=="object"&&M!==null&&M.type===P&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Xe:e:{for(var oe=M.key,ue=R;ue!==null;){if(ue.key===oe){if(oe=M.type,oe===P){if(ue.tag===7){s(L,ue.sibling),R=h(ue,M.props.children),R.return=L,L=R;break e}}else if(ue.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Ct&&Rf(oe)===ue.type){s(L,ue.sibling),R=h(ue,M.props),R.ref=So(L,ue,M),R.return=L,L=R;break e}s(L,ue);break}else r(L,ue);ue=ue.sibling}M.type===P?(R=Ii(M.props.children,L.mode,G,M.key),R.return=L,L=R):(G=cl(M.type,M.key,M.props,null,L.mode,G),G.ref=So(L,R,M),G.return=L,L=G)}return y(L);case Pe:e:{for(ue=M.key;R!==null;){if(R.key===ue)if(R.tag===4&&R.stateNode.containerInfo===M.containerInfo&&R.stateNode.implementation===M.implementation){s(L,R.sibling),R=h(R,M.children||[]),R.return=L,L=R;break e}else{s(L,R);break}else r(L,R);R=R.sibling}R=Sc(M,L.mode,G),R.return=L,L=R}return y(L);case Ct:return ue=M._init,et(L,R,ue(M._payload),G)}if(Kn(M))return re(L,R,M,G);if(le(M))return ie(L,R,M,G);ja(L,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,R!==null&&R.tag===6?(s(L,R.sibling),R=h(R,M),R.return=L,L=R):(s(L,R),R=Ic(M,L.mode,G),R.return=L,L=R),y(L)):s(L,R)}return et}var ys=kf(!0),Pf=kf(!1),Ba=Rr(null),ba=null,_s=null,Vu=null;function Lu(){Vu=_s=ba=null}function Ou(t){var r=Ba.current;qe(Ba),t._currentValue=r}function Mu(t,r,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===s)break;t=t.return}}function vs(t,r){ba=t,Vu=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&($t=!0),t.firstContext=null)}function fn(t){var r=t._currentValue;if(Vu!==t)if(t={context:t,memoizedValue:r,next:null},_s===null){if(ba===null)throw Error(n(308));_s=t,ba.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return r}var gi=null;function Fu(t){gi===null?gi=[t]:gi.push(t)}function xf(t,r,s,u){var h=r.interleaved;return h===null?(s.next=s,Fu(r)):(s.next=h.next,h.next=s),r.interleaved=s,ar(t,u)}function ar(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var xr=!1;function Uu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Nr(t,r,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,xe&2){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,ar(t,s)}return h=u.interleaved,h===null?(r.next=r,Fu(u)):(r.next=h.next,h.next=r),u.interleaved=r,ar(t,s)}function qa(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,wr(t,s)}}function Df(t,r){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var h=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var y={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};p===null?h=p=y:p=p.next=y,s=s.next}while(s!==null);p===null?h=p=r:p=p.next=r}else h=p=r;s={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function $a(t,r,s,u){var h=t.updateQueue;xr=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var C=E,F=C.next;C.next=null,y===null?p=F:y.next=F,y=C;var q=t.alternate;q!==null&&(q=q.updateQueue,E=q.lastBaseUpdate,E!==y&&(E===null?q.firstBaseUpdate=F:E.next=F,q.lastBaseUpdate=C))}if(p!==null){var H=h.baseState;y=0,q=F=C=null,E=p;do{var b=E.lane,X=E.eventTime;if((u&b)===b){q!==null&&(q=q.next={eventTime:X,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var re=t,ie=E;switch(b=r,X=s,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){H=re.call(X,H,b);break e}H=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,b=typeof re=="function"?re.call(X,H,b):re,b==null)break e;H=J({},H,b);break e;case 2:xr=!0}}E.callback!==null&&E.lane!==0&&(t.flags|=64,b=h.effects,b===null?h.effects=[E]:b.push(E))}else X={eventTime:X,lane:b,tag:E.tag,payload:E.payload,callback:E.callback,next:null},q===null?(F=q=X,C=H):q=q.next=X,y|=b;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;b=E,E=b.next,b.next=null,h.lastBaseUpdate=b,h.shared.pending=null}}while(!0);if(q===null&&(C=H),h.baseState=C,h.firstBaseUpdate=F,h.lastBaseUpdate=q,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);vi|=y,t.lanes=y,t.memoizedState=H}}function Vf(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=s,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Ao={},zn=Rr(Ao),Co=Rr(Ao),Ro=Rr(Ao);function yi(t){if(t===Ao)throw Error(n(174));return t}function zu(t,r){switch(Be(Ro,r),Be(Co,t),Be(zn,Ao),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:at(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=at(r,t)}qe(zn),Be(zn,r)}function ws(){qe(zn),qe(Co),qe(Ro)}function Lf(t){yi(Ro.current);var r=yi(zn.current),s=at(r,t.type);r!==s&&(Be(Co,t),Be(zn,s))}function ju(t){Co.current===t&&(qe(zn),qe(Co))}var Ge=Rr(0);function Ha(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bu=[];function bu(){for(var t=0;t<Bu.length;t++)Bu[t]._workInProgressVersionPrimary=null;Bu.length=0}var Ga=we.ReactCurrentDispatcher,qu=we.ReactCurrentBatchConfig,_i=0,Qe=null,ut=null,mt=null,Qa=!1,ko=!1,Po=0,Ty=0;function kt(){throw Error(n(321))}function $u(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!An(t[s],r[s]))return!1;return!0}function Hu(t,r,s,u,h,p){if(_i=p,Qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ga.current=t===null||t.memoizedState===null?Cy:Ry,t=s(u,h),ko){p=0;do{if(ko=!1,Po=0,25<=p)throw Error(n(301));p+=1,mt=ut=null,r.updateQueue=null,Ga.current=ky,t=s(u,h)}while(ko)}if(Ga.current=Ya,r=ut!==null&&ut.next!==null,_i=0,mt=ut=Qe=null,Qa=!1,r)throw Error(n(300));return t}function Gu(){var t=Po!==0;return Po=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Qe.memoizedState=mt=t:mt=mt.next=t,mt}function dn(){if(ut===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var r=mt===null?Qe.memoizedState:mt.next;if(r!==null)mt=r,ut=t;else{if(t===null)throw Error(n(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},mt===null?Qe.memoizedState=mt=t:mt=mt.next=t}return mt}function xo(t,r){return typeof r=="function"?r(t):r}function Qu(t){var r=dn(),s=r.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=t;var u=ut,h=u.baseQueue,p=s.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,s.pending=null}if(h!==null){p=h.next,u=u.baseState;var E=y=null,C=null,F=p;do{var q=F.lane;if((_i&q)===q)C!==null&&(C=C.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),u=F.hasEagerState?F.eagerState:t(u,F.action);else{var H={lane:q,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};C===null?(E=C=H,y=u):C=C.next=H,Qe.lanes|=q,vi|=q}F=F.next}while(F!==null&&F!==p);C===null?y=u:C.next=E,An(u,r.memoizedState)||($t=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=C,s.lastRenderedState=u}if(t=s.interleaved,t!==null){h=t;do p=h.lane,Qe.lanes|=p,vi|=p,h=h.next;while(h!==t)}else h===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function Ku(t){var r=dn(),s=r.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=t;var u=s.dispatch,h=s.pending,p=r.memoizedState;if(h!==null){s.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);An(p,r.memoizedState)||($t=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),s.lastRenderedState=p}return[p,u]}function Of(){}function Mf(t,r){var s=Qe,u=dn(),h=r(),p=!An(u.memoizedState,h);if(p&&(u.memoizedState=h,$t=!0),u=u.queue,Wu(zf.bind(null,s,u,t),[t]),u.getSnapshot!==r||p||mt!==null&&mt.memoizedState.tag&1){if(s.flags|=2048,No(9,Uf.bind(null,s,u,h,r),void 0,null),gt===null)throw Error(n(349));_i&30||Ff(s,r,h)}return h}function Ff(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=Qe.updateQueue,r===null?(r={lastEffect:null,stores:null},Qe.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Uf(t,r,s,u){r.value=s,r.getSnapshot=u,jf(r)&&Bf(t)}function zf(t,r,s){return s(function(){jf(r)&&Bf(t)})}function jf(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!An(t,s)}catch{return!0}}function Bf(t){var r=ar(t,1);r!==null&&xn(r,t,1,-1)}function bf(t){var r=jn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:t},r.queue=t,t=t.dispatch=Ay.bind(null,Qe,t),[r.memoizedState,t]}function No(t,r,s,u){return t={tag:t,create:r,destroy:s,deps:u,next:null},r=Qe.updateQueue,r===null?(r={lastEffect:null,stores:null},Qe.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,r.lastEffect=t)),t}function qf(){return dn().memoizedState}function Ka(t,r,s,u){var h=jn();Qe.flags|=t,h.memoizedState=No(1|r,s,void 0,u===void 0?null:u)}function Wa(t,r,s,u){var h=dn();u=u===void 0?null:u;var p=void 0;if(ut!==null){var y=ut.memoizedState;if(p=y.destroy,u!==null&&$u(u,y.deps)){h.memoizedState=No(r,s,p,u);return}}Qe.flags|=t,h.memoizedState=No(1|r,s,p,u)}function $f(t,r){return Ka(8390656,8,t,r)}function Wu(t,r){return Wa(2048,8,t,r)}function Hf(t,r){return Wa(4,2,t,r)}function Gf(t,r){return Wa(4,4,t,r)}function Qf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Kf(t,r,s){return s=s!=null?s.concat([t]):null,Wa(4,4,Qf.bind(null,r,t),s)}function Yu(){}function Wf(t,r){var s=dn();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&$u(r,u[1])?u[0]:(s.memoizedState=[t,r],t)}function Yf(t,r){var s=dn();r=r===void 0?null:r;var u=s.memoizedState;return u!==null&&r!==null&&$u(r,u[1])?u[0]:(t=t(),s.memoizedState=[t,r],t)}function Xf(t,r,s){return _i&21?(An(s,r)||(s=ai(),Qe.lanes|=s,vi|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=s)}function Iy(t,r){var s=Ee;Ee=s!==0&&4>s?s:4,t(!0);var u=qu.transition;qu.transition={};try{t(!1),r()}finally{Ee=s,qu.transition=u}}function Jf(){return dn().memoizedState}function Sy(t,r,s){var u=Or(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},Zf(t))ed(r,s);else if(s=xf(t,r,s,u),s!==null){var h=Ut();xn(s,t,u,h),td(s,r,u)}}function Ay(t,r,s){var u=Or(t),h={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(Zf(t))ed(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,E=p(y,s);if(h.hasEagerState=!0,h.eagerState=E,An(E,y)){var C=r.interleaved;C===null?(h.next=h,Fu(r)):(h.next=C.next,C.next=h),r.interleaved=h;return}}catch{}finally{}s=xf(t,r,h,u),s!==null&&(h=Ut(),xn(s,t,u,h),td(s,r,u))}}function Zf(t){var r=t.alternate;return t===Qe||r!==null&&r===Qe}function ed(t,r){ko=Qa=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function td(t,r,s){if(s&4194240){var u=r.lanes;u&=t.pendingLanes,s|=u,r.lanes=s,wr(t,s)}}var Ya={readContext:fn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},Cy={readContext:fn,useCallback:function(t,r){return jn().memoizedState=[t,r===void 0?null:r],t},useContext:fn,useEffect:$f,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,Ka(4194308,4,Qf.bind(null,r,t),s)},useLayoutEffect:function(t,r){return Ka(4194308,4,t,r)},useInsertionEffect:function(t,r){return Ka(4,2,t,r)},useMemo:function(t,r){var s=jn();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var u=jn();return r=s!==void 0?s(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Sy.bind(null,Qe,t),[u.memoizedState,t]},useRef:function(t){var r=jn();return t={current:t},r.memoizedState=t},useState:bf,useDebugValue:Yu,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=bf(!1),r=t[0];return t=Iy.bind(null,t[1]),jn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var u=Qe,h=jn();if(He){if(s===void 0)throw Error(n(407));s=s()}else{if(s=r(),gt===null)throw Error(n(349));_i&30||Ff(u,r,s)}h.memoizedState=s;var p={value:s,getSnapshot:r};return h.queue=p,$f(zf.bind(null,u,p,t),[t]),u.flags|=2048,No(9,Uf.bind(null,u,p,s,r),void 0,null),s},useId:function(){var t=jn(),r=gt.identifierPrefix;if(He){var s=or,u=sr;s=(u&~(1<<32-Ot(u)-1)).toString(32)+s,r=":"+r+"R"+s,s=Po++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=Ty++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Ry={readContext:fn,useCallback:Wf,useContext:fn,useEffect:Wu,useImperativeHandle:Kf,useInsertionEffect:Hf,useLayoutEffect:Gf,useMemo:Yf,useReducer:Qu,useRef:qf,useState:function(){return Qu(xo)},useDebugValue:Yu,useDeferredValue:function(t){var r=dn();return Xf(r,ut.memoizedState,t)},useTransition:function(){var t=Qu(xo)[0],r=dn().memoizedState;return[t,r]},useMutableSource:Of,useSyncExternalStore:Mf,useId:Jf,unstable_isNewReconciler:!1},ky={readContext:fn,useCallback:Wf,useContext:fn,useEffect:Wu,useImperativeHandle:Kf,useInsertionEffect:Hf,useLayoutEffect:Gf,useMemo:Yf,useReducer:Ku,useRef:qf,useState:function(){return Ku(xo)},useDebugValue:Yu,useDeferredValue:function(t){var r=dn();return ut===null?r.memoizedState=t:Xf(r,ut.memoizedState,t)},useTransition:function(){var t=Ku(xo)[0],r=dn().memoizedState;return[t,r]},useMutableSource:Of,useSyncExternalStore:Mf,useId:Jf,unstable_isNewReconciler:!1};function Rn(t,r){if(t&&t.defaultProps){r=J({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}function Xu(t,r,s,u){r=t.memoizedState,s=s(u,r),s=s==null?r:J({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Xa={isMounted:function(t){return(t=t._reactInternals)?_n(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var u=Ut(),h=Or(t),p=lr(u,h);p.payload=r,s!=null&&(p.callback=s),r=Nr(t,p,h),r!==null&&(xn(r,t,h,u),qa(r,t,h))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var u=Ut(),h=Or(t),p=lr(u,h);p.tag=1,p.payload=r,s!=null&&(p.callback=s),r=Nr(t,p,h),r!==null&&(xn(r,t,h,u),qa(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Ut(),u=Or(t),h=lr(s,u);h.tag=2,r!=null&&(h.callback=r),r=Nr(t,h,u),r!==null&&(xn(r,t,u,s),qa(r,t,u))}};function nd(t,r,s,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!yo(s,u)||!yo(h,p):!0}function rd(t,r,s){var u=!1,h=kr,p=r.contextType;return typeof p=="object"&&p!==null?p=fn(p):(h=qt(r)?di:Rt.current,u=r.contextTypes,p=(u=u!=null)?ds(t,h):kr),r=new r(s,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Xa,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function id(t,r,s,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,u),r.state!==t&&Xa.enqueueReplaceState(r,r.state,null)}function Ju(t,r,s,u){var h=t.stateNode;h.props=s,h.state=t.memoizedState,h.refs={},Uu(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=fn(p):(p=qt(r)?di:Rt.current,h.context=ds(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Xu(t,r,p,s),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Xa.enqueueReplaceState(h,h.state,null),$a(t,s,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Es(t,r){try{var s="",u=r;do s+=ye(u),u=u.return;while(u);var h=s}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function Zu(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function ec(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var Py=typeof WeakMap=="function"?WeakMap:Map;function sd(t,r,s){s=lr(-1,s),s.tag=3,s.payload={element:null};var u=r.value;return s.callback=function(){il||(il=!0,mc=u),ec(t,r)},s}function od(t,r,s){s=lr(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;s.payload=function(){return u(h)},s.callback=function(){ec(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(s.callback=function(){ec(t,r),typeof u!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),s}function ad(t,r,s){var u=t.pingCache;if(u===null){u=t.pingCache=new Py;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(s)||(h.add(s),t=qy.bind(null,t,r,s),r.then(t,t))}function ld(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function ud(t,r,s,u,h){return t.mode&1?(t.flags|=65536,t.lanes=h,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=lr(-1,1),r.tag=2,Nr(s,r,1))),s.lanes|=1),t)}var xy=we.ReactCurrentOwner,$t=!1;function Ft(t,r,s,u){r.child=t===null?Pf(r,null,s,u):ys(r,t.child,s,u)}function cd(t,r,s,u,h){s=s.render;var p=r.ref;return vs(r,h),u=Hu(t,r,s,u,p,h),s=Gu(),t!==null&&!$t?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,ur(t,r,h)):(He&&s&&ku(r),r.flags|=1,Ft(t,r,u,h),r.child)}function hd(t,r,s,u,h){if(t===null){var p=s.type;return typeof p=="function"&&!Tc(p)&&p.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=p,fd(t,r,p,u,h)):(t=cl(s.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&h)){var y=p.memoizedProps;if(s=s.compare,s=s!==null?s:yo,s(y,u)&&t.ref===r.ref)return ur(t,r,h)}return r.flags|=1,t=Fr(p,u),t.ref=r.ref,t.return=r,r.child=t}function fd(t,r,s,u,h){if(t!==null){var p=t.memoizedProps;if(yo(p,u)&&t.ref===r.ref)if($t=!1,r.pendingProps=u=p,(t.lanes&h)!==0)t.flags&131072&&($t=!0);else return r.lanes=t.lanes,ur(t,r,h)}return tc(t,r,s,u,h)}function dd(t,r,s){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Is,rn),rn|=s;else{if(!(s&1073741824))return t=p!==null?p.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Be(Is,rn),rn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:s,Be(Is,rn),rn|=u}else p!==null?(u=p.baseLanes|s,r.memoizedState=null):u=s,Be(Is,rn),rn|=u;return Ft(t,r,h,s),r.child}function pd(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function tc(t,r,s,u,h){var p=qt(s)?di:Rt.current;return p=ds(r,p),vs(r,h),s=Hu(t,r,s,u,p,h),u=Gu(),t!==null&&!$t?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,ur(t,r,h)):(He&&u&&ku(r),r.flags|=1,Ft(t,r,s,h),r.child)}function md(t,r,s,u,h){if(qt(s)){var p=!0;Oa(r)}else p=!1;if(vs(r,h),r.stateNode===null)Za(t,r),rd(r,s,u),Ju(r,s,u,h),u=!0;else if(t===null){var y=r.stateNode,E=r.memoizedProps;y.props=E;var C=y.context,F=s.contextType;typeof F=="object"&&F!==null?F=fn(F):(F=qt(s)?di:Rt.current,F=ds(r,F));var q=s.getDerivedStateFromProps,H=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function";H||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==u||C!==F)&&id(r,y,u,F),xr=!1;var b=r.memoizedState;y.state=b,$a(r,u,y,h),C=r.memoizedState,E!==u||b!==C||bt.current||xr?(typeof q=="function"&&(Xu(r,s,q,u),C=r.memoizedState),(E=xr||nd(r,s,E,u,b,C,F))?(H||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=C),y.props=u,y.state=C,y.context=F,u=E):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,Nf(t,r),E=r.memoizedProps,F=r.type===r.elementType?E:Rn(r.type,E),y.props=F,H=r.pendingProps,b=y.context,C=s.contextType,typeof C=="object"&&C!==null?C=fn(C):(C=qt(s)?di:Rt.current,C=ds(r,C));var X=s.getDerivedStateFromProps;(q=typeof X=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==H||b!==C)&&id(r,y,u,C),xr=!1,b=r.memoizedState,y.state=b,$a(r,u,y,h);var re=r.memoizedState;E!==H||b!==re||bt.current||xr?(typeof X=="function"&&(Xu(r,s,X,u),re=r.memoizedState),(F=xr||nd(r,s,F,u,b,re,C)||!1)?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,re,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,re,C)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===t.memoizedProps&&b===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&b===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=re),y.props=u,y.state=re,y.context=C,u=F):(typeof y.componentDidUpdate!="function"||E===t.memoizedProps&&b===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&b===t.memoizedState||(r.flags|=1024),u=!1)}return nc(t,r,s,u,p,h)}function nc(t,r,s,u,h,p){pd(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&wf(r,s,!1),ur(t,r,p);u=r.stateNode,xy.current=r;var E=y&&typeof s.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=ys(r,t.child,null,p),r.child=ys(r,null,E,p)):Ft(t,r,E,p),r.memoizedState=u.state,h&&wf(r,s,!0),r.child}function gd(t){var r=t.stateNode;r.pendingContext?_f(t,r.pendingContext,r.pendingContext!==r.context):r.context&&_f(t,r.context,!1),zu(t,r.containerInfo)}function yd(t,r,s,u,h){return gs(),Du(h),r.flags|=256,Ft(t,r,s,u),r.child}var rc={dehydrated:null,treeContext:null,retryLane:0};function ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function _d(t,r,s){var u=r.pendingProps,h=Ge.current,p=!1,y=(r.flags&128)!==0,E;if((E=y)||(E=t!==null&&t.memoizedState===null?!1:(h&2)!==0),E?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Be(Ge,h&1),t===null)return Nu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=y):p=hl(y,u,0,null),t=Ii(t,u,s,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=ic(s),r.memoizedState=rc,t):sc(r,y));if(h=t.memoizedState,h!==null&&(E=h.dehydrated,E!==null))return Ny(t,r,y,u,E,h,s);if(p){p=u.fallback,y=r.mode,h=t.child,E=h.sibling;var C={mode:"hidden",children:u.children};return!(y&1)&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=C,r.deletions=null):(u=Fr(h,C),u.subtreeFlags=h.subtreeFlags&14680064),E!==null?p=Fr(E,p):(p=Ii(p,y,s,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?ic(s):{baseLanes:y.baseLanes|s,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~s,r.memoizedState=rc,u}return p=t.child,t=p.sibling,u=Fr(p,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=s),u.return=r,u.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=u,r.memoizedState=null,u}function sc(t,r){return r=hl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Ja(t,r,s,u){return u!==null&&Du(u),ys(r,t.child,null,s),t=sc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ny(t,r,s,u,h,p,y){if(s)return r.flags&256?(r.flags&=-257,u=Zu(Error(n(422))),Ja(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=hl({mode:"visible",children:u.children},h,0,null),p=Ii(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,r.mode&1&&ys(r,t.child,null,y),r.child.memoizedState=ic(y),r.memoizedState=rc,p);if(!(r.mode&1))return Ja(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var E=u.dgst;return u=E,p=Error(n(419)),u=Zu(p,u,void 0),Ja(t,r,y,u)}if(E=(y&t.childLanes)!==0,$t||E){if(u=gt,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|y)?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,ar(t,h),xn(u,t,h,-1))}return Ec(),u=Zu(Error(n(421))),Ja(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=$y.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,nn=Cr(h.nextSibling),tn=r,He=!0,Cn=null,t!==null&&(cn[hn++]=sr,cn[hn++]=or,cn[hn++]=pi,sr=t.id,or=t.overflow,pi=r),r=sc(r,u.children),r.flags|=4096,r)}function vd(t,r,s){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Mu(t.return,r,s)}function oc(t,r,s,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=s,p.tailMode=h)}function wd(t,r,s){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Ft(t,r,u.children,s),u=Ge.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vd(t,s,r);else if(t.tag===19)vd(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Be(Ge,u),!(r.mode&1))r.memoizedState=null;else switch(h){case"forwards":for(s=r.child,h=null;s!==null;)t=s.alternate,t!==null&&Ha(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=r.child,r.child=null):(h=s.sibling,s.sibling=null),oc(r,!1,h,s,p);break;case"backwards":for(s=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Ha(t)===null){r.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}oc(r,!0,s,null,p);break;case"together":oc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Za(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function ur(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),vi|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,s=Fr(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=Fr(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function Dy(t,r,s){switch(r.tag){case 3:gd(r),gs();break;case 5:Lf(r);break;case 1:qt(r.type)&&Oa(r);break;case 4:zu(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;Be(Ba,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(Be(Ge,Ge.current&1),r.flags|=128,null):s&r.child.childLanes?_d(t,r,s):(Be(Ge,Ge.current&1),t=ur(t,r,s),t!==null?t.sibling:null);Be(Ge,Ge.current&1);break;case 19:if(u=(s&r.childLanes)!==0,t.flags&128){if(u)return wd(t,r,s);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Be(Ge,Ge.current),u)break;return null;case 22:case 23:return r.lanes=0,dd(t,r,s)}return ur(t,r,s)}var Ed,ac,Td,Id;Ed=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},ac=function(){},Td=function(t,r,s,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,yi(zn.current);var p=null;switch(s){case"input":h=Yr(t,h),u=Yr(t,u),p=[];break;case"select":h=J({},h,{value:void 0}),u=J({},u,{value:void 0}),p=[];break;case"textarea":h=Hs(t,h),u=Hs(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Da)}Xs(s,u);var y;s=null;for(F in h)if(!u.hasOwnProperty(F)&&h.hasOwnProperty(F)&&h[F]!=null)if(F==="style"){var E=h[F];for(y in E)E.hasOwnProperty(y)&&(s||(s={}),s[y]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(l.hasOwnProperty(F)?p||(p=[]):(p=p||[]).push(F,null));for(F in u){var C=u[F];if(E=h!=null?h[F]:void 0,u.hasOwnProperty(F)&&C!==E&&(C!=null||E!=null))if(F==="style")if(E){for(y in E)!E.hasOwnProperty(y)||C&&C.hasOwnProperty(y)||(s||(s={}),s[y]="");for(y in C)C.hasOwnProperty(y)&&E[y]!==C[y]&&(s||(s={}),s[y]=C[y])}else s||(p||(p=[]),p.push(F,s)),s=C;else F==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,E=E?E.__html:void 0,C!=null&&E!==C&&(p=p||[]).push(F,C)):F==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(F,""+C):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(l.hasOwnProperty(F)?(C!=null&&F==="onScroll"&&be("scroll",t),p||E===C||(p=[])):(p=p||[]).push(F,C))}s&&(p=p||[]).push("style",s);var F=p;(r.updateQueue=F)&&(r.flags|=4)}},Id=function(t,r,s,u){s!==u&&(r.flags|=4)};function Do(t,r){if(!He)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Pt(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(r)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=s,r}function Vy(t,r,s){var u=r.pendingProps;switch(Pu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(r),null;case 1:return qt(r.type)&&La(),Pt(r),null;case 3:return u=r.stateNode,ws(),qe(bt),qe(Rt),bu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(za(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Cn!==null&&(_c(Cn),Cn=null))),ac(t,r),Pt(r),null;case 5:ju(r);var h=yi(Ro.current);if(s=r.type,t!==null&&r.stateNode!=null)Td(t,r,s,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Pt(r),null}if(t=yi(zn.current),za(r)){u=r.stateNode,s=r.type;var p=r.memoizedProps;switch(u[Un]=r,u[To]=p,t=(r.mode&1)!==0,s){case"dialog":be("cancel",u),be("close",u);break;case"iframe":case"object":case"embed":be("load",u);break;case"video":case"audio":for(h=0;h<vo.length;h++)be(vo[h],u);break;case"source":be("error",u);break;case"img":case"image":case"link":be("error",u),be("load",u);break;case"details":be("toggle",u);break;case"input":Oi(u,p),be("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},be("invalid",u);break;case"textarea":Fi(u,p),be("invalid",u)}Xs(s,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var E=p[y];y==="children"?typeof E=="string"?u.textContent!==E&&(p.suppressHydrationWarning!==!0&&Na(u.textContent,E,t),h=["children",E]):typeof E=="number"&&u.textContent!==""+E&&(p.suppressHydrationWarning!==!0&&Na(u.textContent,E,t),h=["children",""+E]):l.hasOwnProperty(y)&&E!=null&&y==="onScroll"&&be("scroll",u)}switch(s){case"input":Qn(u),ra(u,p,!0);break;case"textarea":Qn(u),Gs(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Da)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ot(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(s,{is:u.is}):(t=y.createElement(s),s==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,s),t[Un]=r,t[To]=u,Ed(t,r,!1,!1),r.stateNode=t;e:{switch(y=Js(s,u),s){case"dialog":be("cancel",t),be("close",t),h=u;break;case"iframe":case"object":case"embed":be("load",t),h=u;break;case"video":case"audio":for(h=0;h<vo.length;h++)be(vo[h],t);h=u;break;case"source":be("error",t),h=u;break;case"img":case"image":case"link":be("error",t),be("load",t),h=u;break;case"details":be("toggle",t),h=u;break;case"input":Oi(t,u),h=Yr(t,u),be("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=J({},u,{value:void 0}),be("invalid",t);break;case"textarea":Fi(t,u),h=Hs(t,u),be("invalid",t);break;default:h=u}Xs(s,h),E=h;for(p in E)if(E.hasOwnProperty(p)){var C=E[p];p==="style"?Ws(t,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Qs(t,C)):p==="children"?typeof C=="string"?(s!=="textarea"||C!=="")&&mr(t,C):typeof C=="number"&&mr(t,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(l.hasOwnProperty(p)?C!=null&&p==="onScroll"&&be("scroll",t):C!=null&&ve(t,p,C,y))}switch(s){case"input":Qn(t),ra(t,u,!1);break;case"textarea":Qn(t),Gs(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Oe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Wn(t,!!u.multiple,p,!1):u.defaultValue!=null&&Wn(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Da)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Pt(r),null;case 6:if(t&&r.stateNode!=null)Id(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(s=yi(Ro.current),yi(zn.current),za(r)){if(u=r.stateNode,s=r.memoizedProps,u[Un]=r,(p=u.nodeValue!==s)&&(t=tn,t!==null))switch(t.tag){case 3:Na(u.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Na(u.nodeValue,s,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[Un]=r,r.stateNode=u}return Pt(r),null;case 13:if(qe(Ge),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&nn!==null&&r.mode&1&&!(r.flags&128))Cf(),gs(),r.flags|=98560,p=!1;else if(p=za(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Un]=r}else gs(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Pt(r),p=!1}else Cn!==null&&(_c(Cn),Cn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,r.mode&1&&(t===null||Ge.current&1?ct===0&&(ct=3):Ec())),r.updateQueue!==null&&(r.flags|=4),Pt(r),null);case 4:return ws(),ac(t,r),t===null&&wo(r.stateNode.containerInfo),Pt(r),null;case 10:return Ou(r.type._context),Pt(r),null;case 17:return qt(r.type)&&La(),Pt(r),null;case 19:if(qe(Ge),p=r.memoizedState,p===null)return Pt(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)Do(p,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(y=Ha(t),y!==null){for(r.flags|=128,Do(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=s,s=r.child;s!==null;)p=s,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Be(Ge,Ge.current&1|2),r.child}t=t.sibling}p.tail!==null&&je()>Ss&&(r.flags|=128,u=!0,Do(p,!1),r.lanes=4194304)}else{if(!u)if(t=Ha(y),t!==null){if(r.flags|=128,u=!0,s=t.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),Do(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!He)return Pt(r),null}else 2*je()-p.renderingStartTime>Ss&&s!==1073741824&&(r.flags|=128,u=!0,Do(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(s=p.last,s!==null?s.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=je(),r.sibling=null,s=Ge.current,Be(Ge,u?s&1|2:s&1),r):(Pt(r),null);case 22:case 23:return wc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&r.mode&1?rn&1073741824&&(Pt(r),r.subtreeFlags&6&&(r.flags|=8192)):Pt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Ly(t,r){switch(Pu(r),r.tag){case 1:return qt(r.type)&&La(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ws(),qe(bt),qe(Rt),bu(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return ju(r),null;case 13:if(qe(Ge),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));gs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return qe(Ge),null;case 4:return ws(),null;case 10:return Ou(r.type._context),null;case 22:case 23:return wc(),null;case 24:return null;default:return null}}var el=!1,xt=!1,Oy=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ts(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){We(t,r,u)}else s.current=null}function lc(t,r,s){try{s()}catch(u){We(t,r,u)}}var Sd=!1;function My(t,r){if(wu=Ir,t=tf(),fu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var y=0,E=-1,C=-1,F=0,q=0,H=t,b=null;t:for(;;){for(var X;H!==s||h!==0&&H.nodeType!==3||(E=y+h),H!==p||u!==0&&H.nodeType!==3||(C=y+u),H.nodeType===3&&(y+=H.nodeValue.length),(X=H.firstChild)!==null;)b=H,H=X;for(;;){if(H===t)break t;if(b===s&&++F===h&&(E=y),b===p&&++q===u&&(C=y),(X=H.nextSibling)!==null)break;H=b,b=H.parentNode}H=X}s=E===-1||C===-1?null:{start:E,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(Eu={focusedElem:t,selectionRange:s},Ir=!1,ne=r;ne!==null;)if(r=ne,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ne=t;else for(;ne!==null;){r=ne;try{var re=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,et=re.memoizedState,L=r.stateNode,R=L.getSnapshotBeforeUpdate(r.elementType===r.type?ie:Rn(r.type,ie),et);L.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(G){We(r,r.return,G)}if(t=r.sibling,t!==null){t.return=r.return,ne=t;break}ne=r.return}return re=Sd,Sd=!1,re}function Vo(t,r,s){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&lc(r,s,p)}h=h.next}while(h!==u)}}function tl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==r)}}function uc(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof r=="function"?r(t):r.current=t}}function Ad(t){var r=t.alternate;r!==null&&(t.alternate=null,Ad(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Un],delete r[To],delete r[Au],delete r[_y],delete r[vy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Cd(t){return t.tag===5||t.tag===3||t.tag===4}function Rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cc(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(t,r):s.insertBefore(t,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(t,s)):(r=s,r.appendChild(t)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=Da));else if(u!==4&&(t=t.child,t!==null))for(cc(t,r,s),t=t.sibling;t!==null;)cc(t,r,s),t=t.sibling}function hc(t,r,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(hc(t,r,s),t=t.sibling;t!==null;)hc(t,r,s),t=t.sibling}var Et=null,kn=!1;function Dr(t,r,s){for(s=s.child;s!==null;)kd(t,r,s),s=s.sibling}function kd(t,r,s){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(si,s)}catch{}switch(s.tag){case 5:xt||Ts(s,r);case 6:var u=Et,h=kn;Et=null,Dr(t,r,s),Et=u,kn=h,Et!==null&&(kn?(t=Et,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Et.removeChild(s.stateNode));break;case 18:Et!==null&&(kn?(t=Et,s=s.stateNode,t.nodeType===8?Su(t.parentNode,s):t.nodeType===1&&Su(t,s),In(t)):Su(Et,s.stateNode));break;case 4:u=Et,h=kn,Et=s.stateNode.containerInfo,kn=!0,Dr(t,r,s),Et=u,kn=h;break;case 0:case 11:case 14:case 15:if(!xt&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&(p&2||p&4)&&lc(s,r,y),h=h.next}while(h!==u)}Dr(t,r,s);break;case 1:if(!xt&&(Ts(s,r),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(E){We(s,r,E)}Dr(t,r,s);break;case 21:Dr(t,r,s);break;case 22:s.mode&1?(xt=(u=xt)||s.memoizedState!==null,Dr(t,r,s),xt=u):Dr(t,r,s);break;default:Dr(t,r,s)}}function Pd(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Oy),r.forEach(function(u){var h=Hy.bind(null,t,u);s.has(u)||(s.add(u),u.then(h,h))})}}function Pn(t,r){var s=r.deletions;if(s!==null)for(var u=0;u<s.length;u++){var h=s[u];try{var p=t,y=r,E=y;e:for(;E!==null;){switch(E.tag){case 5:Et=E.stateNode,kn=!1;break e;case 3:Et=E.stateNode.containerInfo,kn=!0;break e;case 4:Et=E.stateNode.containerInfo,kn=!0;break e}E=E.return}if(Et===null)throw Error(n(160));kd(p,y,h),Et=null,kn=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(F){We(h,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)xd(r,t),r=r.sibling}function xd(t,r){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(r,t),Bn(t),u&4){try{Vo(3,t,t.return),tl(3,t)}catch(ie){We(t,t.return,ie)}try{Vo(5,t,t.return)}catch(ie){We(t,t.return,ie)}}break;case 1:Pn(r,t),Bn(t),u&512&&s!==null&&Ts(s,s.return);break;case 5:if(Pn(r,t),Bn(t),u&512&&s!==null&&Ts(s,s.return),t.flags&32){var h=t.stateNode;try{mr(h,"")}catch(ie){We(t,t.return,ie)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=s!==null?s.memoizedProps:p,E=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{E==="input"&&p.type==="radio"&&p.name!=null&&qs(h,p),Js(E,y);var F=Js(E,p);for(y=0;y<C.length;y+=2){var q=C[y],H=C[y+1];q==="style"?Ws(h,H):q==="dangerouslySetInnerHTML"?Qs(h,H):q==="children"?mr(h,H):ve(h,q,H,F)}switch(E){case"input":$s(h,p);break;case"textarea":Ui(h,p);break;case"select":var b=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var X=p.value;X!=null?Wn(h,!!p.multiple,X,!1):b!==!!p.multiple&&(p.defaultValue!=null?Wn(h,!!p.multiple,p.defaultValue,!0):Wn(h,!!p.multiple,p.multiple?[]:"",!1))}h[To]=p}catch(ie){We(t,t.return,ie)}}break;case 6:if(Pn(r,t),Bn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ie){We(t,t.return,ie)}}break;case 3:if(Pn(r,t),Bn(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{In(r.containerInfo)}catch(ie){We(t,t.return,ie)}break;case 4:Pn(r,t),Bn(t);break;case 13:Pn(r,t),Bn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(pc=je())),u&4&&Pd(t);break;case 22:if(q=s!==null&&s.memoizedState!==null,t.mode&1?(xt=(F=xt)||q,Pn(r,t),xt=F):Pn(r,t),Bn(t),u&8192){if(F=t.memoizedState!==null,(t.stateNode.isHidden=F)&&!q&&t.mode&1)for(ne=t,q=t.child;q!==null;){for(H=ne=q;ne!==null;){switch(b=ne,X=b.child,b.tag){case 0:case 11:case 14:case 15:Vo(4,b,b.return);break;case 1:Ts(b,b.return);var re=b.stateNode;if(typeof re.componentWillUnmount=="function"){u=b,s=b.return;try{r=u,re.props=r.memoizedProps,re.state=r.memoizedState,re.componentWillUnmount()}catch(ie){We(u,s,ie)}}break;case 5:Ts(b,b.return);break;case 22:if(b.memoizedState!==null){Vd(H);continue}}X!==null?(X.return=b,ne=X):Vd(H)}q=q.sibling}e:for(q=null,H=t;;){if(H.tag===5){if(q===null){q=H;try{h=H.stateNode,F?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(E=H.stateNode,C=H.memoizedProps.style,y=C!=null&&C.hasOwnProperty("display")?C.display:null,E.style.display=Ks("display",y))}catch(ie){We(t,t.return,ie)}}}else if(H.tag===6){if(q===null)try{H.stateNode.nodeValue=F?"":H.memoizedProps}catch(ie){We(t,t.return,ie)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===t)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===t)break e;for(;H.sibling===null;){if(H.return===null||H.return===t)break e;q===H&&(q=null),H=H.return}q===H&&(q=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:Pn(r,t),Bn(t),u&4&&Pd(t);break;case 21:break;default:Pn(r,t),Bn(t)}}function Bn(t){var r=t.flags;if(r&2){try{e:{for(var s=t.return;s!==null;){if(Cd(s)){var u=s;break e}s=s.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(mr(h,""),u.flags&=-33);var p=Rd(t);hc(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,E=Rd(t);cc(t,E,y);break;default:throw Error(n(161))}}catch(C){We(t,t.return,C)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Fy(t,r,s){ne=t,Nd(t)}function Nd(t,r,s){for(var u=(t.mode&1)!==0;ne!==null;){var h=ne,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||el;if(!y){var E=h.alternate,C=E!==null&&E.memoizedState!==null||xt;E=el;var F=xt;if(el=y,(xt=C)&&!F)for(ne=h;ne!==null;)y=ne,C=y.child,y.tag===22&&y.memoizedState!==null?Ld(h):C!==null?(C.return=y,ne=C):Ld(h);for(;p!==null;)ne=p,Nd(p),p=p.sibling;ne=h,el=E,xt=F}Dd(t)}else h.subtreeFlags&8772&&p!==null?(p.return=h,ne=p):Dd(t)}}function Dd(t){for(;ne!==null;){var r=ne;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:xt||tl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!xt)if(s===null)u.componentDidMount();else{var h=r.elementType===r.type?s.memoizedProps:Rn(r.type,s.memoizedProps);u.componentDidUpdate(h,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Vf(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}Vf(r,y,s)}break;case 5:var E=r.stateNode;if(s===null&&r.flags&4){s=E;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&s.focus();break;case"img":C.src&&(s.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var q=F.memoizedState;if(q!==null){var H=q.dehydrated;H!==null&&In(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xt||r.flags&512&&uc(r)}catch(b){We(r,r.return,b)}}if(r===t){ne=null;break}if(s=r.sibling,s!==null){s.return=r.return,ne=s;break}ne=r.return}}function Vd(t){for(;ne!==null;){var r=ne;if(r===t){ne=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ne=s;break}ne=r.return}}function Ld(t){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{tl(4,r)}catch(C){We(r,s,C)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(C){We(r,h,C)}}var p=r.return;try{uc(r)}catch(C){We(r,p,C)}break;case 5:var y=r.return;try{uc(r)}catch(C){We(r,y,C)}}}catch(C){We(r,r.return,C)}if(r===t){ne=null;break}var E=r.sibling;if(E!==null){E.return=r.return,ne=E;break}ne=r.return}}var Uy=Math.ceil,nl=we.ReactCurrentDispatcher,fc=we.ReactCurrentOwner,pn=we.ReactCurrentBatchConfig,xe=0,gt=null,it=null,Tt=0,rn=0,Is=Rr(0),ct=0,Lo=null,vi=0,rl=0,dc=0,Oo=null,Ht=null,pc=0,Ss=1/0,cr=null,il=!1,mc=null,Vr=null,sl=!1,Lr=null,ol=0,Mo=0,gc=null,al=-1,ll=0;function Ut(){return xe&6?je():al!==-1?al:al=je()}function Or(t){return t.mode&1?xe&2&&Tt!==0?Tt&-Tt:Ey.transition!==null?(ll===0&&(ll=ai()),ll):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:uo(t.type)),t):1}function xn(t,r,s,u){if(50<Mo)throw Mo=0,gc=null,Error(n(185));vr(t,s,u),(!(xe&2)||t!==gt)&&(t===gt&&(!(xe&2)&&(rl|=s),ct===4&&Mr(t,Tt)),Gt(t,u),s===1&&xe===0&&!(r.mode&1)&&(Ss=je()+500,Ma&&Pr()))}function Gt(t,r){var s=t.callbackNode;Jn(t,r);var u=oi(t,t===gt?Tt:0);if(u===0)s!==null&&io(s),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(s!=null&&io(s),r===1)t.tag===0?wy(Md.bind(null,t)):Ef(Md.bind(null,t)),gy(function(){!(xe&6)&&Pr()}),s=null;else{switch(Er(u)){case 1:s=ii;break;case 4:s=gr;break;case 16:s=an;break;case 536870912:s=la;break;default:s=an}s=$d(s,Od.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function Od(t,r){if(al=-1,ll=0,xe&6)throw Error(n(327));var s=t.callbackNode;if(As()&&t.callbackNode!==s)return null;var u=oi(t,t===gt?Tt:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=ul(t,u);else{r=u;var h=xe;xe|=2;var p=Ud();(gt!==t||Tt!==r)&&(cr=null,Ss=je()+500,Ei(t,r));do try{By();break}catch(E){Fd(t,E)}while(!0);Lu(),nl.current=p,xe=h,it!==null?r=0:(gt=null,Tt=0,r=ct)}if(r!==0){if(r===2&&(h=Jt(t),h!==0&&(u=h,r=yc(t,h))),r===1)throw s=Lo,Ei(t,0),Mr(t,u),Gt(t,je()),s;if(r===6)Mr(t,u);else{if(h=t.current.alternate,!(u&30)&&!zy(h)&&(r=ul(t,u),r===2&&(p=Jt(t),p!==0&&(u=p,r=yc(t,p))),r===1))throw s=Lo,Ei(t,0),Mr(t,u),Gt(t,je()),s;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Ti(t,Ht,cr);break;case 3:if(Mr(t,u),(u&130023424)===u&&(r=pc+500-je(),10<r)){if(oi(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Ut(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Iu(Ti.bind(null,t,Ht,cr),r);break}Ti(t,Ht,cr);break;case 4:if(Mr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-Ot(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=je()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Uy(u/1960))-u,10<u){t.timeoutHandle=Iu(Ti.bind(null,t,Ht,cr),u);break}Ti(t,Ht,cr);break;case 5:Ti(t,Ht,cr);break;default:throw Error(n(329))}}}return Gt(t,je()),t.callbackNode===s?Od.bind(null,t):null}function yc(t,r){var s=Oo;return t.current.memoizedState.isDehydrated&&(Ei(t,r).flags|=256),t=ul(t,r),t!==2&&(r=Ht,Ht=s,r!==null&&_c(r)),t}function _c(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function zy(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var h=s[u],p=h.getSnapshot;h=h.value;try{if(!An(p(),h))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Mr(t,r){for(r&=~dc,r&=~rl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-Ot(r),u=1<<s;t[s]=-1,r&=~u}}function Md(t){if(xe&6)throw Error(n(327));As();var r=oi(t,0);if(!(r&1))return Gt(t,je()),null;var s=ul(t,r);if(t.tag!==0&&s===2){var u=Jt(t);u!==0&&(r=u,s=yc(t,u))}if(s===1)throw s=Lo,Ei(t,0),Mr(t,r),Gt(t,je()),s;if(s===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ti(t,Ht,cr),Gt(t,je()),null}function vc(t,r){var s=xe;xe|=1;try{return t(r)}finally{xe=s,xe===0&&(Ss=je()+500,Ma&&Pr())}}function wi(t){Lr!==null&&Lr.tag===0&&!(xe&6)&&As();var r=xe;xe|=1;var s=pn.transition,u=Ee;try{if(pn.transition=null,Ee=1,t)return t()}finally{Ee=u,pn.transition=s,xe=r,!(xe&6)&&Pr()}}function wc(){rn=Is.current,qe(Is)}function Ei(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,my(s)),it!==null)for(s=it.return;s!==null;){var u=s;switch(Pu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&La();break;case 3:ws(),qe(bt),qe(Rt),bu();break;case 5:ju(u);break;case 4:ws();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:Ou(u.type._context);break;case 22:case 23:wc()}s=s.return}if(gt=t,it=t=Fr(t.current,null),Tt=rn=r,ct=0,Lo=null,dc=rl=vi=0,Ht=Oo=null,gi!==null){for(r=0;r<gi.length;r++)if(s=gi[r],u=s.interleaved,u!==null){s.interleaved=null;var h=u.next,p=s.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}s.pending=u}gi=null}return t}function Fd(t,r){do{var s=it;try{if(Lu(),Ga.current=Ya,Qa){for(var u=Qe.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Qa=!1}if(_i=0,mt=ut=Qe=null,ko=!1,Po=0,fc.current=null,s===null||s.return===null){ct=1,Lo=r,it=null;break}e:{var p=t,y=s.return,E=s,C=r;if(r=Tt,E.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var F=C,q=E,H=q.tag;if(!(q.mode&1)&&(H===0||H===11||H===15)){var b=q.alternate;b?(q.updateQueue=b.updateQueue,q.memoizedState=b.memoizedState,q.lanes=b.lanes):(q.updateQueue=null,q.memoizedState=null)}var X=ld(y);if(X!==null){X.flags&=-257,ud(X,y,E,p,r),X.mode&1&&ad(p,F,r),r=X,C=F;var re=r.updateQueue;if(re===null){var ie=new Set;ie.add(C),r.updateQueue=ie}else re.add(C);break e}else{if(!(r&1)){ad(p,F,r),Ec();break e}C=Error(n(426))}}else if(He&&E.mode&1){var et=ld(y);if(et!==null){!(et.flags&65536)&&(et.flags|=256),ud(et,y,E,p,r),Du(Es(C,E));break e}}p=C=Es(C,E),ct!==4&&(ct=2),Oo===null?Oo=[p]:Oo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var L=sd(p,C,r);Df(p,L);break e;case 1:E=C;var R=p.type,M=p.stateNode;if(!(p.flags&128)&&(typeof R.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Vr===null||!Vr.has(M)))){p.flags|=65536,r&=-r,p.lanes|=r;var G=od(p,E,r);Df(p,G);break e}}p=p.return}while(p!==null)}jd(s)}catch(oe){r=oe,it===s&&s!==null&&(it=s=s.return);continue}break}while(!0)}function Ud(){var t=nl.current;return nl.current=Ya,t===null?Ya:t}function Ec(){(ct===0||ct===3||ct===2)&&(ct=4),gt===null||!(vi&268435455)&&!(rl&268435455)||Mr(gt,Tt)}function ul(t,r){var s=xe;xe|=2;var u=Ud();(gt!==t||Tt!==r)&&(cr=null,Ei(t,r));do try{jy();break}catch(h){Fd(t,h)}while(!0);if(Lu(),xe=s,nl.current=u,it!==null)throw Error(n(261));return gt=null,Tt=0,ct}function jy(){for(;it!==null;)zd(it)}function By(){for(;it!==null&&!oa();)zd(it)}function zd(t){var r=qd(t.alternate,t,rn);t.memoizedProps=t.pendingProps,r===null?jd(t):it=r,fc.current=null}function jd(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=Ly(s,r),s!==null){s.flags&=32767,it=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(s=Vy(s,r,rn),s!==null){it=s;return}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);ct===0&&(ct=5)}function Ti(t,r,s){var u=Ee,h=pn.transition;try{pn.transition=null,Ee=1,by(t,r,s,u)}finally{pn.transition=h,Ee=u}return null}function by(t,r,s,u){do As();while(Lr!==null);if(xe&6)throw Error(n(327));s=t.finishedWork;var h=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=s.lanes|s.childLanes;if(Ue(t,p),t===gt&&(it=gt=null,Tt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||sl||(sl=!0,$d(an,function(){return As(),null})),p=(s.flags&15990)!==0,s.subtreeFlags&15990||p){p=pn.transition,pn.transition=null;var y=Ee;Ee=1;var E=xe;xe|=4,fc.current=null,My(t,s),xd(s,t),ly(Eu),Ir=!!wu,Eu=wu=null,t.current=s,Fy(s),iu(),xe=E,Ee=y,pn.transition=p}else t.current=s;if(sl&&(sl=!1,Lr=t,ol=h),p=t.pendingLanes,p===0&&(Vr=null),ua(s.stateNode),Gt(t,je()),r!==null)for(u=t.onRecoverableError,s=0;s<r.length;s++)h=r[s],u(h.value,{componentStack:h.stack,digest:h.digest});if(il)throw il=!1,t=mc,mc=null,t;return ol&1&&t.tag!==0&&As(),p=t.pendingLanes,p&1?t===gc?Mo++:(Mo=0,gc=t):Mo=0,Pr(),null}function As(){if(Lr!==null){var t=Er(ol),r=pn.transition,s=Ee;try{if(pn.transition=null,Ee=16>t?16:t,Lr===null)var u=!1;else{if(t=Lr,Lr=null,ol=0,xe&6)throw Error(n(331));var h=xe;for(xe|=4,ne=t.current;ne!==null;){var p=ne,y=p.child;if(ne.flags&16){var E=p.deletions;if(E!==null){for(var C=0;C<E.length;C++){var F=E[C];for(ne=F;ne!==null;){var q=ne;switch(q.tag){case 0:case 11:case 15:Vo(8,q,p)}var H=q.child;if(H!==null)H.return=q,ne=H;else for(;ne!==null;){q=ne;var b=q.sibling,X=q.return;if(Ad(q),q===F){ne=null;break}if(b!==null){b.return=X,ne=b;break}ne=X}}}var re=p.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var et=ie.sibling;ie.sibling=null,ie=et}while(ie!==null)}}ne=p}}if(p.subtreeFlags&2064&&y!==null)y.return=p,ne=y;else e:for(;ne!==null;){if(p=ne,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Vo(9,p,p.return)}var L=p.sibling;if(L!==null){L.return=p.return,ne=L;break e}ne=p.return}}var R=t.current;for(ne=R;ne!==null;){y=ne;var M=y.child;if(y.subtreeFlags&2064&&M!==null)M.return=y,ne=M;else e:for(y=R;ne!==null;){if(E=ne,E.flags&2048)try{switch(E.tag){case 0:case 11:case 15:tl(9,E)}}catch(oe){We(E,E.return,oe)}if(E===y){ne=null;break e}var G=E.sibling;if(G!==null){G.return=E.return,ne=G;break e}ne=E.return}}if(xe=h,Pr(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(si,t)}catch{}u=!0}return u}finally{Ee=s,pn.transition=r}}return!1}function Bd(t,r,s){r=Es(s,r),r=sd(t,r,1),t=Nr(t,r,1),r=Ut(),t!==null&&(vr(t,1,r),Gt(t,r))}function We(t,r,s){if(t.tag===3)Bd(t,t,s);else for(;r!==null;){if(r.tag===3){Bd(r,t,s);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vr===null||!Vr.has(u))){t=Es(s,t),t=od(r,t,1),r=Nr(r,t,1),t=Ut(),r!==null&&(vr(r,1,t),Gt(r,t));break}}r=r.return}}function qy(t,r,s){var u=t.pingCache;u!==null&&u.delete(r),r=Ut(),t.pingedLanes|=t.suspendedLanes&s,gt===t&&(Tt&s)===s&&(ct===4||ct===3&&(Tt&130023424)===Tt&&500>je()-pc?Ei(t,0):dc|=s),Gt(t,r)}function bd(t,r){r===0&&(t.mode&1?(r=Ki,Ki<<=1,!(Ki&130023424)&&(Ki=4194304)):r=1);var s=Ut();t=ar(t,r),t!==null&&(vr(t,r,s),Gt(t,s))}function $y(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),bd(t,s)}function Hy(t,r){var s=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),bd(t,s)}var qd;qd=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||bt.current)$t=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return $t=!1,Dy(t,r,s);$t=!!(t.flags&131072)}else $t=!1,He&&r.flags&1048576&&Tf(r,Ua,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Za(t,r),t=r.pendingProps;var h=ds(r,Rt.current);vs(r,s),h=Hu(null,r,u,t,h,s);var p=Gu();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,qt(u)?(p=!0,Oa(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Uu(r),h.updater=Xa,r.stateNode=h,h._reactInternals=r,Ju(r,u,t,s),r=nc(null,r,u,!0,p,s)):(r.tag=0,He&&p&&ku(r),Ft(null,r,h,s),r=r.child),r;case 16:u=r.elementType;e:{switch(Za(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Qy(u),t=Rn(u,t),h){case 0:r=tc(null,r,u,t,s);break e;case 1:r=md(null,r,u,t,s);break e;case 11:r=cd(null,r,u,t,s);break e;case 14:r=hd(null,r,u,Rn(u.type,t),s);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Rn(u,h),tc(t,r,u,h,s);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Rn(u,h),md(t,r,u,h,s);case 3:e:{if(gd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Nf(t,r),$a(r,u,null,s);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Es(Error(n(423)),r),r=yd(t,r,u,s,h);break e}else if(u!==h){h=Es(Error(n(424)),r),r=yd(t,r,u,s,h);break e}else for(nn=Cr(r.stateNode.containerInfo.firstChild),tn=r,He=!0,Cn=null,s=Pf(r,null,u,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(gs(),u===h){r=ur(t,r,s);break e}Ft(t,r,u,s)}r=r.child}return r;case 5:return Lf(r),t===null&&Nu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,Tu(u,h)?y=null:p!==null&&Tu(u,p)&&(r.flags|=32),pd(t,r),Ft(t,r,y,s),r.child;case 6:return t===null&&Nu(r),null;case 13:return _d(t,r,s);case 4:return zu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=ys(r,null,u,s):Ft(t,r,u,s),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Rn(u,h),cd(t,r,u,h,s);case 7:return Ft(t,r,r.pendingProps,s),r.child;case 8:return Ft(t,r,r.pendingProps.children,s),r.child;case 12:return Ft(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,Be(Ba,u._currentValue),u._currentValue=y,p!==null)if(An(p.value,y)){if(p.children===h.children&&!bt.current){r=ur(t,r,s);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var E=p.dependencies;if(E!==null){y=p.child;for(var C=E.firstContext;C!==null;){if(C.context===u){if(p.tag===1){C=lr(-1,s&-s),C.tag=2;var F=p.updateQueue;if(F!==null){F=F.shared;var q=F.pending;q===null?C.next=C:(C.next=q.next,q.next=C),F.pending=C}}p.lanes|=s,C=p.alternate,C!==null&&(C.lanes|=s),Mu(p.return,s,r),E.lanes|=s;break}C=C.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=s,E=y.alternate,E!==null&&(E.lanes|=s),Mu(y,s,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Ft(t,r,h.children,s),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,vs(r,s),h=fn(h),u=u(h),r.flags|=1,Ft(t,r,u,s),r.child;case 14:return u=r.type,h=Rn(u,r.pendingProps),h=Rn(u.type,h),hd(t,r,u,h,s);case 15:return fd(t,r,r.type,r.pendingProps,s);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Rn(u,h),Za(t,r),r.tag=1,qt(u)?(t=!0,Oa(r)):t=!1,vs(r,s),rd(r,u,h),Ju(r,u,h,s),nc(null,r,u,!0,t,s);case 19:return wd(t,r,s);case 22:return dd(t,r,s)}throw Error(n(156,r.tag))};function $d(t,r){return Gi(t,r)}function Gy(t,r,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,r,s,u){return new Gy(t,r,s,u)}function Tc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qy(t){if(typeof t=="function")return Tc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===At)return 14}return 2}function Fr(t,r){var s=t.alternate;return s===null?(s=mn(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function cl(t,r,s,u,h,p){var y=2;if(u=t,typeof t=="function")Tc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case P:return Ii(s.children,h,p,r);case T:y=8,h|=8;break;case A:return t=mn(12,s,r,h|2),t.elementType=A,t.lanes=p,t;case I:return t=mn(13,s,r,h),t.elementType=I,t.lanes=p,t;case Je:return t=mn(19,s,r,h),t.elementType=Je,t.lanes=p,t;case Fe:return hl(s,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:y=10;break e;case x:y=9;break e;case D:y=11;break e;case At:y=14;break e;case Ct:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=mn(y,s,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Ii(t,r,s,u){return t=mn(7,t,u,r),t.lanes=s,t}function hl(t,r,s,u){return t=mn(22,t,u,r),t.elementType=Fe,t.lanes=s,t.stateNode={isHidden:!1},t}function Ic(t,r,s){return t=mn(6,t,null,r),t.lanes=s,t}function Sc(t,r,s){return r=mn(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Ky(t,r,s,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_r(0),this.expirationTimes=_r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_r(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Ac(t,r,s,u,h,p,y,E,C){return t=new Ky(t,r,s,E,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=mn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uu(p),t}function Wy(t,r,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pe,key:u==null?null:""+u,children:t,containerInfo:r,implementation:s}}function Hd(t){if(!t)return kr;t=t._reactInternals;e:{if(_n(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(qt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var s=t.type;if(qt(s))return vf(t,s,r)}return r}function Gd(t,r,s,u,h,p,y,E,C){return t=Ac(s,u,!0,t,h,p,y,E,C),t.context=Hd(null),s=t.current,u=Ut(),h=Or(s),p=lr(u,h),p.callback=r??null,Nr(s,p,h),t.current.lanes=h,vr(t,h,u),Gt(t,u),t}function fl(t,r,s,u){var h=r.current,p=Ut(),y=Or(h);return s=Hd(s),r.context===null?r.context=s:r.pendingContext=s,r=lr(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Nr(h,r,y),t!==null&&(xn(t,h,y,p),qa(t,h,y)),y}function dl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qd(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Cc(t,r){Qd(t,r),(t=t.alternate)&&Qd(t,r)}var Kd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rc(t){this._internalRoot=t}pl.prototype.render=Rc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));fl(t,r,null,null)},pl.prototype.unmount=Rc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;wi(function(){fl(null,t,null,null)}),r[rr]=null}};function pl(t){this._internalRoot=t}pl.prototype.unstable_scheduleHydration=function(t){if(t){var r=pa();t={blockedOn:null,target:t,priority:r};for(var s=0;s<Ln.length&&r!==0&&r<Ln[s].priority;s++);Ln.splice(s,0,t),s===0&&ya(t)}};function kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ml(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wd(){}function Yy(t,r,s,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var F=dl(y);p.call(F)}}var y=Gd(r,u,t,0,null,!1,!1,"",Wd);return t._reactRootContainer=y,t[rr]=y.current,wo(t.nodeType===8?t.parentNode:t),wi(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var E=u;u=function(){var F=dl(C);E.call(F)}}var C=Ac(t,0,!1,null,null,!1,!1,"",Wd);return t._reactRootContainer=C,t[rr]=C.current,wo(t.nodeType===8?t.parentNode:t),wi(function(){fl(r,C,s,u)}),C}function gl(t,r,s,u,h){var p=s._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var E=h;h=function(){var C=dl(y);E.call(C)}}fl(r,y,t,h)}else y=Yy(s,r,t,h,u);return dl(y)}fa=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=yr(r.pendingLanes);s!==0&&(wr(r,s|1),Gt(r,je()),!(xe&6)&&(Ss=je()+500,Pr()))}break;case 13:wi(function(){var u=ar(t,1);if(u!==null){var h=Ut();xn(u,t,1,h)}}),Cc(t,1)}},Wi=function(t){if(t.tag===13){var r=ar(t,134217728);if(r!==null){var s=Ut();xn(r,t,134217728,s)}Cc(t,134217728)}},da=function(t){if(t.tag===13){var r=Or(t),s=ar(t,r);if(s!==null){var u=Ut();xn(s,t,r,u)}Cc(t,r)}},pa=function(){return Ee},ma=function(t,r){var s=Ee;try{return Ee=t,r()}finally{Ee=s}},ji=function(t,r,s){switch(r){case"input":if($s(t,s),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var u=s[r];if(u!==t&&u.form===t.form){var h=Va(u);if(!h)throw Error(n(90));Li(u),$s(u,h)}}}break;case"textarea":Ui(t,s);break;case"select":r=s.value,r!=null&&Wn(t,!!s.multiple,r,!1)}},ei=vc,eo=wi;var Xy={usingClientEntryPoint:!1,Events:[Io,hs,Va,Dn,Zs,vc]},Fo={findFiberByHostInstance:fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jy={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ro(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{si=yl.inject(Jy),Xt=yl}catch{}}return Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xy,Qt.createPortal=function(t,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(r))throw Error(n(200));return Wy(t,r,null,s)},Qt.createRoot=function(t,r){if(!kc(t))throw Error(n(299));var s=!1,u="",h=Kd;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Ac(t,1,!1,null,null,s,!1,u,h),t[rr]=r.current,wo(t.nodeType===8?t.parentNode:t),new Rc(r)},Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=ro(r),t=t===null?null:t.stateNode,t},Qt.flushSync=function(t){return wi(t)},Qt.hydrate=function(t,r,s){if(!ml(r))throw Error(n(200));return gl(null,t,r,!0,s)},Qt.hydrateRoot=function(t,r,s){if(!kc(t))throw Error(n(405));var u=s!=null&&s.hydratedSources||null,h=!1,p="",y=Kd;if(s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),r=Gd(r,null,t,1,s??null,h,!1,p,y),t[rr]=r.current,wo(t),u)for(t=0;t<u.length;t++)s=u[t],h=s._getVersion,h=h(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,h]:r.mutableSourceEagerHydrationData.push(s,h);return new pl(r)},Qt.render=function(t,r,s){if(!ml(r))throw Error(n(200));return gl(null,t,r,!1,s)},Qt.unmountComponentAtNode=function(t){if(!ml(t))throw Error(n(40));return t._reactRootContainer?(wi(function(){gl(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1},Qt.unstable_batchedUpdates=vc,Qt.unstable_renderSubtreeIntoContainer=function(t,r,s,u){if(!ml(s))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return gl(t,r,s,!1,u)},Qt.version="18.3.1-next-f1338f8080-20240426",Qt}var rp;function o_(){if(rp)return Nc.exports;rp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Nc.exports=s_(),Nc.exports}var ip;function a_(){if(ip)return _l;ip=1;var i=o_();return _l.createRoot=i.createRoot,_l.hydrateRoot=i.hydrateRoot,_l}var l_=a_();const fm=Lt.createContext(),dm=()=>Lt.useContext(fm),u_=({children:i})=>{const[e,n]=Lt.useState(""),o=l=>{n(l)};return se.jsx(fm.Provider,{value:{searchInput:e,onSearch:o},children:i})},pm=Lt.createContext(),mm=()=>Lt.useContext(pm),c_=({children:i})=>{const[e,n]=Lt.useState({unisex:!1,male:!1,female:!1,disabled:!1,bidet:!1}),o=l=>{n(c=>({...c,[l]:!c[l]}))};return Lt.useEffect(()=>{e.male&&e.female?n(l=>({...l,unisex:!0})):n(l=>({...l,unisex:!1}))},[e.male,e.female]),se.jsx(pm.Provider,{value:{selectedOptions:e,toggleCheckBox:o},children:i})},h_=""+new URL("search_icon-Hhk7iQn_.webp",import.meta.url).href;function gm(){const{onSearch:i}=dm(),[e,n]=Lt.useState(""),o=()=>{i(e.trim())},l=c=>{c.key==="Enter"&&o()};return se.jsx("div",{className:"bg-white p-4 flex items-center space-x-4",children:se.jsxs("div",{className:"flex flex-auto items-center bg-gray-100 p-2 rounded-full space-x-2",children:[se.jsx("input",{type:"text",placeholder:"Search Toilet",value:e,onChange:c=>n(c.target.value),onKeyDown:l,className:"bg-transparent flex-grow px-4 outline-none text-gray-700"}),se.jsx("button",{onClick:o,className:"p-0 border border-green-500 rounded-full",children:se.jsx("img",{src:h_,alt:"Search Icon",className:"w-8 h-8 object-cover"})})]})})}const f_=""+new URL("filter-gauSZlgz.png",import.meta.url).href;function d_(){const i=Lt.useRef(null),e=Lt.useRef(null),{selectedOptions:n,toggleCheckBox:o}=mm(),[l,c]=Lt.useState(!1),f=m=>{c(!l)};return Lt.useEffect(()=>{const m=_=>{i.current&&!i.current.contains(_.target)&&e.current&&!e.current.contains(_.target)&&c(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]),se.jsxs("div",{className:"relative flex-none items-center space-x-2",children:[se.jsx("button",{ref:e,className:"p-0 border border-green-500 rounded-full",onClick:f,children:se.jsx("img",{src:f_,alt:"Filter",className:"w-9 h-9 object-cover rounded-full"})}),l&&se.jsx("div",{ref:i,className:"text-gray-600 absolute items-center mt-2 w-48 bg-white shadow-lg rounded-lg border border-gray-200 z-10",children:se.jsxs("ul",{className:"py-2",children:[se.jsxs("li",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>o("male"),children:[se.jsx("input",{type:"checkbox",checked:n.male,onChange:()=>o("male"),className:"mr-2"}),"Male"]}),se.jsxs("li",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>o("female"),children:[se.jsx("input",{type:"checkbox",checked:n.female,onChange:()=>o("female"),className:"mr-2"}),"Female"]}),se.jsxs("li",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>o("disabled"),children:[se.jsx("input",{type:"checkbox",checked:n.disabled,onChange:()=>o("disabled"),className:"mr-2"}),"Disabled"]}),se.jsxs("li",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>o("bidet"),children:[se.jsx("input",{type:"checkbox",checked:n.bidet,onChange:()=>o("bidet"),className:"mr-2"}),"Bidet"]})]})})]})}const p_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAflBMVEX///88sis4sSYysB01sCLo9ua95Lj4/fc3sSVcvk7y+vEurxfv+e7B5rw2sSIxsBzY79VNuT2y36zm9ePJ6cTf8t18ynJItzeHzn244rNVu0bS7c2e15Zsw2Fzx2iLz4Kp26Kj2pxkwViV1I2v3qh4yG1fv1OKz4GT04rM6slx+05RAAALvUlEQVR4nO1daZujrBIdQCOKazaNS/aesf//H7xJL5O+CSJQoM77eD7PNJ4AtVP169eMGTNmzJgxY8aMGTP+M/ACd5VW62ixOC0W0bpKV27gjf1RZuC56aIuGj9DcUIeSGKU+U1RL1L3HybqbaJ6XyLGiEMxRs/AmDqEMVTu62jz79H00mXhoyRxXpm9MHWSBPnFMv2HWIbRwcck5uxbJ0scE+wfonDsT5eBu9sjRuTJ/aBJGNrv3LEJiBFGW8QcDXbfcBjaTngn07YkEHpfJEnZpmNT4cFbNFTrcL4CE9ospiZ3wmMGOp3PcFh2nNJhdessMbN9D+Akq6ciddw6N3Q8nziSfBIcg5Mdfl8cT8HI/LxdyWzx++DIyt2oMqdqrO3fX46kqUbjF7TUpPzsgkPbkY5qZO8C/j9u1zEagZ9bWL2ATxxZMbhUXZdkMH53kHI9KD/vMtABfQCTy4BCdXNmA/O7g503QxFc5EOI0Fc4+WIYgqd46BP6DRyfBuAXbMc4od9gW+uq0T0PK0OfQc6W1UZaxqMSRCgurQYA3nM6MkGEaP5uj2CkECC0B4yt2XARnQLBG0VqieI0dvAOS7s4HYKWKE7liH7CwkF9n9AO3oGxYYma5tMieKOYG9WLbjm+HnyGkxm0boLz2JYMD/HZnI26HdcW7QLZmiJ4GtObEIEZcqYWUzyin4iNuMSbyYnRB3BuILDhnccJWcjBOcPDU5epXsJPsAuU4HqaYvQBAoyjuuV0L+EnaAlT/MXUt/C2iQWEYDTtS/gJBnAzggkrigdwrm+9tdM/o3eQVpdgZdLpxQ5JGEV5niPKEiJR0if/p6lmlthrjOl6hyC/OEYbNwyDMHQ30bHwkYH6qe8/3+jp/Z2hM0qTfLt8qSD1NsttnhhyO8lOh2BgRhVS5l+7NJZ79ZkRjrjUETZGfCZKzmJZHp2N5Fp1/CjXhKYgv/t1VfTbwG3AubplU8PXdbBURZN3QnCZQ2pVgga2MPFlo2Hp7wS6mPomwreQ/JEX4d4f+HKKmxhm0C2Mj0oLHqGhEpyp1aMeoccmXiqt9+vXEkoxOaos50G3MFEPES2A2glnKoYNdDXlHbwDuotM5VcFWqTkqEHwdjVg4sZp5JdKYaZUout1F7DbT+VzNTC/0Pmt65EGv0FnR95PDGE2t8JP+QzY4cGlrMKIQFuYKNtPP1CDzimRjdhsIWeF+pCcV+BDdtGRTEa5gDXAyZIIpjLkjNMdRBlSYCLBO0M2kcn5+nvIIYUELz8ACtE6e5klQsAKN3EGzQV5MEEuI01BP6Ka+csFyOiXOkIHkK5YgRmuIMuTQ/8Cng84JSqmYScgRjH2+29JCrkGydUAwyvkmOJ+g2oJOaQSf78foN+Y9PttBUDlwiXpHSBpGvf6NbBraKaEB2I19l/EDQIwVA9acgGJ82HUV38SQa65XoLkBaCUUNKnEUHuS2ym5rOCWN+9zhvIKI3NPL3aQBj2maZAq9BMxSfIfeuT5zDfcAoM+z4iBQVKczONHsIc8hFMbHUAQ8GGGIK+oScwDEs5YUOnFCQLepRyAQpYTkGWIkdstzWggCUxow/fQQyp0IMDWaXTsGl6LNMAllWbgF16z7KJArZATTQB3+IOkbxbweKxeoU7z4CWKsWiWFEKTG5jE41WKmj+WaTyK2BJhGZq9P8BTJQiIvqZoXXrYkktCZjG6qlth+XV7hThOn8DreUT5tgWUIYG9AW4VomIDFNwSalayQcP4EIXsd0BL5qVzG8JPgFc9GmZIZUIq4vggZLA/QzB91Aq6CwCKOT+9QWiewiWpSoFETwAy0A+GYpkqYl3XDIJrk7AqzB79CHUpulfQQwjL+WENg3ULv0AVaz0fABe1XqH0C4F+hZfiN/05Kn3ZmZ5kW8B9A+/keg9RGpNnCAk9g+BPv5faPkY4ELoT4h9fGCc5gENrWhAE36gJ4MI9Vz+QnkXoV7hX/R4cLB46U+QVkXceOaeOvbESw28lPlG8iavNMI3Q0IG9Tpw0BL2n4ilG3KuTXaB68lbwHJPT6BJIbONYWG0GXhP7smQQvwGya598cXgmhl+bSxODwFzwC/AxBdyDK6+4V6vvTU9oDw+d8Uku3Sdm/Rivlt9b4kprJScC0yIX1fPNzKsap9Y6NXbW4sBqqfpBE7ivLkso2qzclebKlpemjw2vn0f6K2nAdVECUFJEn9aTDROiK3eYf01UcYs05EgUWAKqU2cAPprE42Z+CNBwqkB1a+OD4kaXhMXkTokpjSWVQY3dfLxzx24+JGp8wbW6t9A0LldrqtqfT34cf8fI7F/uN7/+bL9jcBry4QygX2FCGofXT686pALRyhglh+qxz/ftECOUu8tQDVXBLdPka5w6ScdTdxxnPjLJ1tn1WIQRymfVN80dVDB0bfe+k8ZP7fcwberWhZrzq3ZFPpNJOTePWnnt3Cy7xJkQVU3JSKM3ac8JowRVDb1e5fTke51h4NI5vY0fUSSi1WRt7rZo8e6rY83+3QlFnnLXPOoSpYO6lTs4NjonBS30BnAIF2xpJFjMz96QmeIhvQ7YPUkXmJhfMjmrOrIKaQuVYOX7GBj6kRwUBR5Cn3b1J7FY2zixRoPV6T0ISqNAFSeANLM3pyi91LhQ5QePyoEhp3M5kSNjS9/YZR6m8iX7dieihJKT31RLFaSfW5MNPv5ycNrJCkqPrKWzKg7Z/vDQkO5Vs2qfaLkklAOsMOtHFwpcaNcMyjTr20YgnIUNZru9W8izYaagyYxe0Kj7LN/E40Udcuh942JTt/E3t6X4DpLFVz7PkZnhkDPowAyxJC3B2rhLmo+gxAWm5qbLSEJ4YwNzedIoj7C0E7o6hANgtHtIyzqBR0POxX0jnX3OdXtBS3wE0H9vHTRmbzV7+fd2ZPdxFQJdXRN2oD0ZO+Kf+ufChAq/k2EtabizkYA1TlDwL01sNkI3PkW2OQoKbWv4Xg8YKnOqbwGvjeAgKOioTNKeHNmFDsEm8RrkS18zgxPgsVDWqQ/8bqFRqT667wnjIfX93esXyYUGpn3xJvZhdEY6qJ6LfUxM7OL50dhQ712VPD+mqsxNXeNZ9dbnFjbAc4YVIP+DWf+IUbD6owd54ganH/IdV3MHREJXF8LVwzHwXixIFZYn3P+Be/w6lYYnkPKnyVLGninSxmsOGFv47Nk+fOAHYtppwfW2avXZGVwNW+mM6X2L+OJvsqAIcdWsze7job7xnFRrekq7uBqUtpU/u8lxyW0Nlu9Yxcpam0loMKWl+a2am28c0tASG7H2dhx64ac3KrFmHLTQDjZmzfFqz23mN9uVv0Gl591dvAfs7px9QdzI2u2s+o3BFt+/I3ktbnrGNYdhW1sO4QddeooOUvyk6GugqecH/zF8UC2cFfJGSblyUDH8lPZUR9uvniuE5tzRzoPk7yAyZyqyLvq35mF4rlOeJfOZz0x8Y+6wsA9+qQr/0LJZdhUwppnbHx9C0PbhTpJd7FF3fMeifSTW2NwC0GpskPy/TFVmCyXHve5YC4pZkbrc2URCUuVHUJLzvjRV3ib67akorGrt9s9dFToC0FLhYUu2GEsby7r1OXz9Nx0fWlyxsSjcx3aDhVMeEXV9D38wZQwmpfn7eW4W1dVmm7StKrWu+Nley5zykjfzGFMmnFyeV/wdqXMywF8n3ecxPTDN8GYxsl95rHMf2Tlboxs7E8Ep04FBsbtAkpNMrUNt7bD8cavHitT+Qy3Nv/qHCfZZPjdER4zZvIlv8Oyo/3SVTV4i4YaOqyY0GYxtnzhIm1LA/PSHVK2lt14AMLoZltCSDo3mzaa2vF8grvbI6Z1XDFhaL+bknTpRBgdfExiGY3+TQ7HBPuHqe/eT3jpsvBRkogtzk92TpIgv1gquCJTgbeJ6n2JGCMO5eznzXhzCGOo3NeRhAsyWdz8h0VdNH6G4vsL2W8kMcr8pqgXXX7HPwcvcFdptY4Wu91uEa2rdOUG/xFqM2bMmDFjxowZM2bMuON/qRPJCL7T0AcAAAAASUVORK5CYII=";function m_(){return se.jsx("div",{className:"flex items-center space-x-4",children:se.jsx("button",{className:"p-0 border border-green-500 rounded-full",children:se.jsx("img",{src:p_,alt:"User",className:"w-10 h-10 object-cover rounded-full"})})})}function g_(){return se.jsxs("header",{className:"bg-white p-4 fixed top w-full flex items-center justify-between border-green-500 border-2 border-t border-r border-l",children:[se.jsx(d_,{}),se.jsxs("div",{className:"flex-auto",children:[" ",se.jsx(gm,{})]}),se.jsx(m_,{})]})}const y_=""+new URL("bidet_icon-DzRhG-Qw.png",import.meta.url).href,__=""+new URL("bookmark_icon_unsaved-2d4vNquj.png",import.meta.url).href,v_=""+new URL("bookmark_icon_saved-DGZ-7zzn.png",import.meta.url).href,sp=""+new URL("gender_female-Dg513f0f.png",import.meta.url).href,op=""+new URL("gender_male-DbkZXaK9.png",import.meta.url).href,w_=""+new URL("disabled_icon-BZCuM8kN.png",import.meta.url).href;function E_({toilet:i}){const[e,n]=Lt.useState(!1),o=()=>{n(!e)};return se.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md flex items-center space-x-4 border-green-500 border-2",children:[se.jsxs("div",{className:"flex flex-col flex-grow",children:[se.jsx("h3",{className:"text-lg text-gray-600 font-bold",children:i.name}),se.jsx("p",{className:"text-gray-600",children:i.location}),se.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[se.jsxs("span",{className:"text-yellow-400",children:["★".repeat(i.rating),"☆".repeat(5-i.rating)]}),i.bidet&&se.jsx("img",{src:y_,alt:"Bidet",className:"w-7 h-7"}),i.gender.toLowerCase()==="unisex"?se.jsxs("div",{className:"flex space-x-4 items-center",children:[se.jsx("img",{src:op,alt:i.gender,className:"w-4.5 h-6"}),se.jsx("img",{src:sp,alt:i.gender,className:"w-4.5 h-6"})]}):i.gender.toLowerCase()==="male"?se.jsx("img",{src:op,alt:i.gender,className:"w-4.5 h-6"}):i.gender.toLowerCase()==="female"?se.jsx("img",{src:sp,alt:i.gender,className:"w-4.5 h-6"}):null,i.disabled&&se.jsx("img",{src:w_,alt:"Disabled",className:"w-7 h-7"})]})]}),se.jsx("button",{onClick:o,className:"p-0 border-0 bg-transparent cursor-pointer",children:se.jsx("img",{src:e?v_:__,alt:"Bookmark-Unsaved",className:"w-8 h-9"})})]})}var ap={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=function(i){const e=[];let n=0;for(let o=0;o<i.length;o++){let l=i.charCodeAt(o);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++o)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},T_=function(i){const e=[];let n=0,o=0;for(;n<i.length;){const l=i[n++];if(l<128)e[o++]=String.fromCharCode(l);else if(l>191&&l<224){const c=i[n++];e[o++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=i[n++],f=i[n++],m=i[n++],_=((l&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[o++]=String.fromCharCode(55296+(_>>10)),e[o++]=String.fromCharCode(56320+(_&1023))}else{const c=i[n++],f=i[n++];e[o++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},_m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let l=0;l<i.length;l+=3){const c=i[l],f=l+1<i.length,m=f?i[l+1]:0,_=l+2<i.length,w=_?i[l+2]:0,S=c>>2,O=(c&3)<<4|m>>4;let z=(m&15)<<2|w>>6,$=w&63;_||($=64,f||(z=64)),o.push(n[S],n[O],n[z],n[$])}return o.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ym(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):T_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let l=0;l<i.length;){const c=n[i.charAt(l++)],m=l<i.length?n[i.charAt(l)]:0;++l;const w=l<i.length?n[i.charAt(l)]:64;++l;const O=l<i.length?n[i.charAt(l)]:64;if(++l,c==null||m==null||w==null||O==null)throw new I_;const z=c<<2|m>>4;if(o.push(z),w!==64){const $=m<<4&240|w>>2;if(o.push($),O!==64){const te=w<<6&192|O;o.push(te)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class I_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S_=function(i){const e=ym(i);return _m.encodeByteArray(e,!0)},xl=function(i){return S_(i).replace(/\./g,"")},A_=function(i){try{return _m.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=()=>C_().__FIREBASE_DEFAULTS__,k_=()=>{if(typeof process>"u"||typeof ap>"u")return;const i=ap.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},P_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&A_(i[1]);return e&&JSON.parse(e)},mh=()=>{try{return R_()||k_()||P_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},x_=i=>{var e,n;return(n=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},N_=i=>{const e=x_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},vm=()=>{var i;return(i=mh())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",l=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[xl(JSON.stringify(n)),xl(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O_(){var i;const e=(i=mh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M_(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function F_(){return!O_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wm(){try{return typeof indexedDB=="object"}catch{return!1}}function Em(){return new Promise((i,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(o);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(o),i(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}function U_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="FirebaseError";class Wr extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=z_,Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bl.prototype.create)}}class bl{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?j_(c,o):"Error",m=`${this.serviceName}: ${f} (${l}).`;return new Wr(l,m,o)}}function j_(i,e){return i.replace(B_,(n,o)=>{const l=e[o];return l!=null?String(l):`<${o}?>`})}const B_=/\{\$([^}]+)}/g;function Nl(i,e){if(i===e)return!0;const n=Object.keys(i),o=Object.keys(e);for(const l of n){if(!o.includes(l))return!1;const c=i[l],f=e[l];if(lp(c)&&lp(f)){if(!Nl(c,f))return!1}else if(c!==f)return!1}for(const l of o)if(!n.includes(l))return!1;return!0}function lp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=1e3,q_=2,$_=4*60*60*1e3,H_=.5;function up(i,e=b_,n=q_){const o=e*Math.pow(n,i),l=Math.round(H_*o*(Math.random()-.5)*2);return Math.min($_,o+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(i){return i&&i._delegate?i._delegate:i}class hr{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new D_;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&o.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K_(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});o.resolve(c)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);o===m&&f.resolve(l)}return l}onInit(e,n){var o;const l=this.normalizeInstanceIdentifier(n),c=(o=this.onInitCallbacks.get(l))!==null&&o!==void 0?o:new Set;c.add(e),this.onInitCallbacks.set(l,c);const f=this.instances.get(l);return f&&e(f,l),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const l of o)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Q_(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q_(i){return i===Si?void 0:i}function K_(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new G_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ae||(Ae={}));const Y_={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},X_=Ae.INFO,J_={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},Z_=(i,e,...n)=>{if(e<i.logLevel)return;const o=new Date().toISOString(),l=J_[e];if(l)console[l](`[${o}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yh{constructor(e){this.name=e,this._logLevel=X_,this._logHandler=Z_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const ev=(i,e)=>e.some(n=>i instanceof n);let cp,hp;function tv(){return cp||(cp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nv(){return hp||(hp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tm=new WeakMap,Gc=new WeakMap,Im=new WeakMap,Lc=new WeakMap,_h=new WeakMap;function rv(i){const e=new Promise((n,o)=>{const l=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Br(i.result)),l()},f=()=>{o(i.error),l()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Tm.set(n,i)}).catch(()=>{}),_h.set(e,i),e}function iv(i){if(Gc.has(i))return;const e=new Promise((n,o)=>{const l=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{o(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Gc.set(i,e)}let Qc={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Gc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Im.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function sv(i){Qc=i(Qc)}function ov(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=i.call(Oc(this),e,...n);return Im.set(o,e.sort?e.sort():[e]),Br(o)}:nv().includes(i)?function(...e){return i.apply(Oc(this),e),Br(Tm.get(this))}:function(...e){return Br(i.apply(Oc(this),e))}}function av(i){return typeof i=="function"?ov(i):(i instanceof IDBTransaction&&iv(i),ev(i,tv())?new Proxy(i,Qc):i)}function Br(i){if(i instanceof IDBRequest)return rv(i);if(Lc.has(i))return Lc.get(i);const e=av(i);return e!==i&&(Lc.set(i,e),_h.set(e,i)),e}const Oc=i=>_h.get(i);function Sm(i,e,{blocked:n,upgrade:o,blocking:l,terminated:c}={}){const f=indexedDB.open(i,e),m=Br(f);return o&&f.addEventListener("upgradeneeded",_=>{o(Br(f.result),_.oldVersion,_.newVersion,Br(f.transaction),_)}),n&&f.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),m.then(_=>{c&&_.addEventListener("close",()=>c()),l&&_.addEventListener("versionchange",w=>l(w.oldVersion,w.newVersion,w))}).catch(()=>{}),m}const lv=["get","getKey","getAll","getAllKeys","count"],uv=["put","add","delete","clear"],Mc=new Map;function fp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Mc.get(e))return Mc.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,l=uv.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(l||lv.includes(n)))return;const c=async function(f,...m){const _=this.transaction(f,l?"readwrite":"readonly");let w=_.store;return o&&(w=w.index(m.shift())),(await Promise.all([w[n](...m),l&&_.done]))[0]};return Mc.set(e,c),c}sv(i=>({...i,get:(e,n,o)=>fp(e,n)||i.get(e,n,o),has:(e,n)=>!!fp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hv(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function hv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kc="@firebase/app",dp="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new yh("@firebase/app"),fv="@firebase/app-compat",dv="@firebase/analytics-compat",pv="@firebase/analytics",mv="@firebase/app-check-compat",gv="@firebase/app-check",yv="@firebase/auth",_v="@firebase/auth-compat",vv="@firebase/database",wv="@firebase/data-connect",Ev="@firebase/database-compat",Tv="@firebase/functions",Iv="@firebase/functions-compat",Sv="@firebase/installations",Av="@firebase/installations-compat",Cv="@firebase/messaging",Rv="@firebase/messaging-compat",kv="@firebase/performance",Pv="@firebase/performance-compat",xv="@firebase/remote-config",Nv="@firebase/remote-config-compat",Dv="@firebase/storage",Vv="@firebase/storage-compat",Lv="@firebase/firestore",Ov="@firebase/vertexai",Mv="@firebase/firestore-compat",Fv="firebase",Uv="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="[DEFAULT]",zv={[Kc]:"fire-core",[fv]:"fire-core-compat",[pv]:"fire-analytics",[dv]:"fire-analytics-compat",[gv]:"fire-app-check",[mv]:"fire-app-check-compat",[yv]:"fire-auth",[_v]:"fire-auth-compat",[vv]:"fire-rtdb",[wv]:"fire-data-connect",[Ev]:"fire-rtdb-compat",[Tv]:"fire-fn",[Iv]:"fire-fn-compat",[Sv]:"fire-iid",[Av]:"fire-iid-compat",[Cv]:"fire-fcm",[Rv]:"fire-fcm-compat",[kv]:"fire-perf",[Pv]:"fire-perf-compat",[xv]:"fire-rc",[Nv]:"fire-rc-compat",[Dv]:"fire-gcs",[Vv]:"fire-gcs-compat",[Lv]:"fire-fst",[Mv]:"fire-fst-compat",[Ov]:"fire-vertex","fire-js":"fire-js",[Fv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Map,jv=new Map,Yc=new Map;function pp(i,e){try{i.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function qr(i){const e=i.name;if(Yc.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;Yc.set(e,i);for(const n of Dl.values())pp(n,i);for(const n of jv.values())pp(n,i);return!0}function Jo(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new bl("app","Firebase",Bv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=Uv;function Am(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const o=Object.assign({name:Wc,automaticDataCollectionEnabled:!1},e),l=o.name;if(typeof l!="string"||!l)throw br.create("bad-app-name",{appName:String(l)});if(n||(n=vm()),!n)throw br.create("no-options");const c=Dl.get(l);if(c){if(Nl(n,c.options)&&Nl(o,c.config))return c;throw br.create("duplicate-app",{appName:l})}const f=new W_(l);for(const _ of Yc.values())f.addComponent(_);const m=new bv(n,o,f);return Dl.set(l,m),m}function Cm(i=Wc){const e=Dl.get(i);if(!e&&i===Wc&&vm())return Am();if(!e)throw br.create("no-app",{appName:i});return e}function qn(i,e,n){var o;let l=(o=zv[i])!==null&&o!==void 0?o:i;n&&(l+=`-${n}`);const c=l.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${l}" with version "${e}":`];c&&m.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(m.join(" "));return}qr(new hr(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="firebase-heartbeat-database",Hv=1,Qo="firebase-heartbeat-store";let Fc=null;function Rm(){return Fc||(Fc=Sm($v,Hv,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Qo)}catch(n){console.warn(n)}}}}).catch(i=>{throw br.create("idb-open",{originalErrorMessage:i.message})})),Fc}async function Gv(i){try{const n=(await Rm()).transaction(Qo),o=await n.objectStore(Qo).get(km(i));return await n.done,o}catch(e){if(e instanceof Wr)fr.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function mp(i,e){try{const o=(await Rm()).transaction(Qo,"readwrite");await o.objectStore(Qo).put(e,km(i)),await o.done}catch(n){if(n instanceof Wr)fr.warn(n.message);else{const o=br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(o.message)}}}function km(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=1024,Kv=30*24*60*60*1e3;class Wv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xv(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=gp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=Kv}),this._storage.overwrite(this._heartbeatsCache))}catch(o){fr.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gp(),{heartbeatsToSend:o,unsentEntries:l}=Yv(this._heartbeatsCache.heartbeats),c=xl(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return fr.warn(n),""}}}function gp(){return new Date().toISOString().substring(0,10)}function Yv(i,e=Qv){const n=[];let o=i.slice();for(const l of i){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),yp(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),yp(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class Xv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wm()?Em().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return mp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return mp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function yp(i){return xl(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(i){qr(new hr("platform-logger",e=>new cv(e),"PRIVATE")),qr(new hr("heartbeat",e=>new Wv(e),"PRIVATE")),qn(Kc,dp,i),qn(Kc,dp,"esm2017"),qn("fire-js","")}Jv("");var _p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,Pm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function A(){}A.prototype=T.prototype,P.D=T.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(k,x,D){for(var I=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)I[Je-2]=arguments[Je];return T.prototype[x].apply(k,I)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(P,T,A){A||(A=0);var k=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)k[x]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(x=0;16>x;++x)k[x]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=P.g[0],A=P.g[1],x=P.g[2];var D=P.g[3],I=T+(D^A&(x^D))+k[0]+3614090360&4294967295;T=A+(I<<7&4294967295|I>>>25),I=D+(x^T&(A^x))+k[1]+3905402710&4294967295,D=T+(I<<12&4294967295|I>>>20),I=x+(A^D&(T^A))+k[2]+606105819&4294967295,x=D+(I<<17&4294967295|I>>>15),I=A+(T^x&(D^T))+k[3]+3250441966&4294967295,A=x+(I<<22&4294967295|I>>>10),I=T+(D^A&(x^D))+k[4]+4118548399&4294967295,T=A+(I<<7&4294967295|I>>>25),I=D+(x^T&(A^x))+k[5]+1200080426&4294967295,D=T+(I<<12&4294967295|I>>>20),I=x+(A^D&(T^A))+k[6]+2821735955&4294967295,x=D+(I<<17&4294967295|I>>>15),I=A+(T^x&(D^T))+k[7]+4249261313&4294967295,A=x+(I<<22&4294967295|I>>>10),I=T+(D^A&(x^D))+k[8]+1770035416&4294967295,T=A+(I<<7&4294967295|I>>>25),I=D+(x^T&(A^x))+k[9]+2336552879&4294967295,D=T+(I<<12&4294967295|I>>>20),I=x+(A^D&(T^A))+k[10]+4294925233&4294967295,x=D+(I<<17&4294967295|I>>>15),I=A+(T^x&(D^T))+k[11]+2304563134&4294967295,A=x+(I<<22&4294967295|I>>>10),I=T+(D^A&(x^D))+k[12]+1804603682&4294967295,T=A+(I<<7&4294967295|I>>>25),I=D+(x^T&(A^x))+k[13]+4254626195&4294967295,D=T+(I<<12&4294967295|I>>>20),I=x+(A^D&(T^A))+k[14]+2792965006&4294967295,x=D+(I<<17&4294967295|I>>>15),I=A+(T^x&(D^T))+k[15]+1236535329&4294967295,A=x+(I<<22&4294967295|I>>>10),I=T+(x^D&(A^x))+k[1]+4129170786&4294967295,T=A+(I<<5&4294967295|I>>>27),I=D+(A^x&(T^A))+k[6]+3225465664&4294967295,D=T+(I<<9&4294967295|I>>>23),I=x+(T^A&(D^T))+k[11]+643717713&4294967295,x=D+(I<<14&4294967295|I>>>18),I=A+(D^T&(x^D))+k[0]+3921069994&4294967295,A=x+(I<<20&4294967295|I>>>12),I=T+(x^D&(A^x))+k[5]+3593408605&4294967295,T=A+(I<<5&4294967295|I>>>27),I=D+(A^x&(T^A))+k[10]+38016083&4294967295,D=T+(I<<9&4294967295|I>>>23),I=x+(T^A&(D^T))+k[15]+3634488961&4294967295,x=D+(I<<14&4294967295|I>>>18),I=A+(D^T&(x^D))+k[4]+3889429448&4294967295,A=x+(I<<20&4294967295|I>>>12),I=T+(x^D&(A^x))+k[9]+568446438&4294967295,T=A+(I<<5&4294967295|I>>>27),I=D+(A^x&(T^A))+k[14]+3275163606&4294967295,D=T+(I<<9&4294967295|I>>>23),I=x+(T^A&(D^T))+k[3]+4107603335&4294967295,x=D+(I<<14&4294967295|I>>>18),I=A+(D^T&(x^D))+k[8]+1163531501&4294967295,A=x+(I<<20&4294967295|I>>>12),I=T+(x^D&(A^x))+k[13]+2850285829&4294967295,T=A+(I<<5&4294967295|I>>>27),I=D+(A^x&(T^A))+k[2]+4243563512&4294967295,D=T+(I<<9&4294967295|I>>>23),I=x+(T^A&(D^T))+k[7]+1735328473&4294967295,x=D+(I<<14&4294967295|I>>>18),I=A+(D^T&(x^D))+k[12]+2368359562&4294967295,A=x+(I<<20&4294967295|I>>>12),I=T+(A^x^D)+k[5]+4294588738&4294967295,T=A+(I<<4&4294967295|I>>>28),I=D+(T^A^x)+k[8]+2272392833&4294967295,D=T+(I<<11&4294967295|I>>>21),I=x+(D^T^A)+k[11]+1839030562&4294967295,x=D+(I<<16&4294967295|I>>>16),I=A+(x^D^T)+k[14]+4259657740&4294967295,A=x+(I<<23&4294967295|I>>>9),I=T+(A^x^D)+k[1]+2763975236&4294967295,T=A+(I<<4&4294967295|I>>>28),I=D+(T^A^x)+k[4]+1272893353&4294967295,D=T+(I<<11&4294967295|I>>>21),I=x+(D^T^A)+k[7]+4139469664&4294967295,x=D+(I<<16&4294967295|I>>>16),I=A+(x^D^T)+k[10]+3200236656&4294967295,A=x+(I<<23&4294967295|I>>>9),I=T+(A^x^D)+k[13]+681279174&4294967295,T=A+(I<<4&4294967295|I>>>28),I=D+(T^A^x)+k[0]+3936430074&4294967295,D=T+(I<<11&4294967295|I>>>21),I=x+(D^T^A)+k[3]+3572445317&4294967295,x=D+(I<<16&4294967295|I>>>16),I=A+(x^D^T)+k[6]+76029189&4294967295,A=x+(I<<23&4294967295|I>>>9),I=T+(A^x^D)+k[9]+3654602809&4294967295,T=A+(I<<4&4294967295|I>>>28),I=D+(T^A^x)+k[12]+3873151461&4294967295,D=T+(I<<11&4294967295|I>>>21),I=x+(D^T^A)+k[15]+530742520&4294967295,x=D+(I<<16&4294967295|I>>>16),I=A+(x^D^T)+k[2]+3299628645&4294967295,A=x+(I<<23&4294967295|I>>>9),I=T+(x^(A|~D))+k[0]+4096336452&4294967295,T=A+(I<<6&4294967295|I>>>26),I=D+(A^(T|~x))+k[7]+1126891415&4294967295,D=T+(I<<10&4294967295|I>>>22),I=x+(T^(D|~A))+k[14]+2878612391&4294967295,x=D+(I<<15&4294967295|I>>>17),I=A+(D^(x|~T))+k[5]+4237533241&4294967295,A=x+(I<<21&4294967295|I>>>11),I=T+(x^(A|~D))+k[12]+1700485571&4294967295,T=A+(I<<6&4294967295|I>>>26),I=D+(A^(T|~x))+k[3]+2399980690&4294967295,D=T+(I<<10&4294967295|I>>>22),I=x+(T^(D|~A))+k[10]+4293915773&4294967295,x=D+(I<<15&4294967295|I>>>17),I=A+(D^(x|~T))+k[1]+2240044497&4294967295,A=x+(I<<21&4294967295|I>>>11),I=T+(x^(A|~D))+k[8]+1873313359&4294967295,T=A+(I<<6&4294967295|I>>>26),I=D+(A^(T|~x))+k[15]+4264355552&4294967295,D=T+(I<<10&4294967295|I>>>22),I=x+(T^(D|~A))+k[6]+2734768916&4294967295,x=D+(I<<15&4294967295|I>>>17),I=A+(D^(x|~T))+k[13]+1309151649&4294967295,A=x+(I<<21&4294967295|I>>>11),I=T+(x^(A|~D))+k[4]+4149444226&4294967295,T=A+(I<<6&4294967295|I>>>26),I=D+(A^(T|~x))+k[11]+3174756917&4294967295,D=T+(I<<10&4294967295|I>>>22),I=x+(T^(D|~A))+k[2]+718787259&4294967295,x=D+(I<<15&4294967295|I>>>17),I=A+(D^(x|~T))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(x+(I<<21&4294967295|I>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+D&4294967295}o.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var A=T-this.blockSize,k=this.B,x=this.h,D=0;D<T;){if(x==0)for(;D<=A;)l(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<T;)if(k[x++]=P.charCodeAt(D++),x==this.blockSize){l(this,k),x=0;break}}else for(;D<T;)if(k[x++]=P[D++],x==this.blockSize){l(this,k),x=0;break}}this.h=x,this.o+=T},o.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var A=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=A&255,A/=256;for(this.u(P),P=Array(16),T=A=0;4>T;++T)for(var k=0;32>k;k+=8)P[A++]=this.g[T]>>>k&255;return P};function c(P,T){var A=m;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=T(P)}function f(P,T){this.h=T;for(var A=[],k=!0,x=P.length-1;0<=x;x--){var D=P[x]|0;k&&D==T||(A[x]=D,k=!1)}this.g=A}var m={};function _(P){return-128<=P&&128>P?c(P,function(T){return new f([T|0],0>T?-1:0)}):new f([P|0],0>P?-1:0)}function w(P){if(isNaN(P)||!isFinite(P))return O;if(0>P)return Q(w(-P));for(var T=[],A=1,k=0;P>=A;k++)T[k]=P/A|0,A*=4294967296;return new f(T,0)}function S(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return Q(S(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=w(Math.pow(T,8)),k=O,x=0;x<P.length;x+=8){var D=Math.min(8,P.length-x),I=parseInt(P.substring(x,x+D),T);8>D?(D=w(Math.pow(T,D)),k=k.j(D).add(w(I))):(k=k.j(A),k=k.add(w(I)))}return k}var O=_(0),z=_(1),$=_(16777216);i=f.prototype,i.m=function(){if(Z(this))return-Q(this).m();for(var P=0,T=1,A=0;A<this.g.length;A++){var k=this.i(A);P+=(0<=k?k:4294967296+k)*T,T*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(te(this))return"0";if(Z(this))return"-"+Q(this).toString(P);for(var T=w(Math.pow(P,6)),A=this,k="";;){var x=we(A,T).g;A=Ve(A,x.j(T));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=x,te(A))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function te(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function Z(P){return P.h==-1}i.l=function(P){return P=Ve(this,P),Z(P)?-1:te(P)?0:1};function Q(P){for(var T=P.g.length,A=[],k=0;k<T;k++)A[k]=~P.g[k];return new f(A,~P.h).add(z)}i.abs=function(){return Z(this)?Q(this):this},i.add=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],k=0,x=0;x<=T;x++){var D=k+(this.i(x)&65535)+(P.i(x)&65535),I=(D>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);k=I>>>16,D&=65535,I&=65535,A[x]=I<<16|D}return new f(A,A[A.length-1]&-2147483648?-1:0)};function Ve(P,T){return P.add(Q(T))}i.j=function(P){if(te(this)||te(P))return O;if(Z(this))return Z(P)?Q(this).j(Q(P)):Q(Q(this).j(P));if(Z(P))return Q(this.j(Q(P)));if(0>this.l($)&&0>P.l($))return w(this.m()*P.m());for(var T=this.g.length+P.g.length,A=[],k=0;k<2*T;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var x=0;x<P.g.length;x++){var D=this.i(k)>>>16,I=this.i(k)&65535,Je=P.i(x)>>>16,At=P.i(x)&65535;A[2*k+2*x]+=I*At,ke(A,2*k+2*x),A[2*k+2*x+1]+=D*At,ke(A,2*k+2*x+1),A[2*k+2*x+1]+=I*Je,ke(A,2*k+2*x+1),A[2*k+2*x+2]+=D*Je,ke(A,2*k+2*x+2)}for(k=0;k<T;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=T;k<2*T;k++)A[k]=0;return new f(A,0)};function ke(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function ve(P,T){this.g=P,this.h=T}function we(P,T){if(te(T))throw Error("division by zero");if(te(P))return new ve(O,O);if(Z(P))return T=we(Q(P),T),new ve(Q(T.g),Q(T.h));if(Z(T))return T=we(P,Q(T)),new ve(Q(T.g),T.h);if(30<P.g.length){if(Z(P)||Z(T))throw Error("slowDivide_ only works with positive integers.");for(var A=z,k=T;0>=k.l(P);)A=Xe(A),k=Xe(k);var x=Pe(A,1),D=Pe(k,1);for(k=Pe(k,2),A=Pe(A,2);!te(k);){var I=D.add(k);0>=I.l(P)&&(x=x.add(A),D=I),k=Pe(k,1),A=Pe(A,1)}return T=Ve(P,x.j(T)),new ve(x,T)}for(x=O;0<=P.l(T);){for(A=Math.max(1,Math.floor(P.m()/T.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=w(A),I=D.j(T);Z(I)||0<I.l(P);)A-=k,D=w(A),I=D.j(T);te(D)&&(D=z),x=x.add(D),P=Ve(P,I)}return new ve(x,P)}i.A=function(P){return we(this,P).h},i.and=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)&P.i(k);return new f(A,this.h&P.h)},i.or=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)|P.i(k);return new f(A,this.h|P.h)},i.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)^P.i(k);return new f(A,this.h^P.h)};function Xe(P){for(var T=P.g.length+1,A=[],k=0;k<T;k++)A[k]=P.i(k)<<1|P.i(k-1)>>>31;return new f(A,P.h)}function Pe(P,T){var A=T>>5;T%=32;for(var k=P.g.length-A,x=[],D=0;D<k;D++)x[D]=0<T?P.i(D+A)>>>T|P.i(D+A+1)<<32-T:P.i(D+A);return new f(x,P.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Pm=o,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=w,f.fromString=S,Ri=f}).apply(typeof _p<"u"?_p:typeof self<"u"?self:typeof window<"u"?window:{});var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xm,zo,Nm,Al,Xc,Dm,Vm,Lm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,g){return a==Array.prototype||a==Object.prototype||(a[d]=g.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof vl=="object"&&vl];for(var d=0;d<a.length;++d){var g=a[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var o=n(this);function l(a,d){if(d)e:{var g=o;a=a.split(".");for(var v=0;v<a.length-1;v++){var V=a[v];if(!(V in g))break e;g=g[V]}a=a[a.length-1],v=g[a],d=d(v),d!=v&&d!=null&&e(g,a,{configurable:!0,writable:!0,value:d})}}function c(a,d){a instanceof String&&(a+="");var g=0,v=!1,V={next:function(){if(!v&&g<a.length){var U=g++;return{value:d(U,a[U]),done:!1}}return v=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}l("Array.prototype.values",function(a){return a||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function _(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function w(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function S(a,d,g){return a.call.apply(a.bind,arguments)}function O(a,d,g){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,v),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function z(a,d,g){return z=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:O,z.apply(null,arguments)}function $(a,d){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function te(a,d){function g(){}g.prototype=d.prototype,a.aa=d.prototype,a.prototype=new g,a.prototype.constructor=a,a.Qb=function(v,V,U){for(var K=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)K[Me-2]=arguments[Me];return d.prototype[V].apply(v,K)}}function Z(a){const d=a.length;if(0<d){const g=Array(d);for(let v=0;v<d;v++)g[v]=a[v];return g}return[]}function Q(a,d){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(_(v)){const V=a.length||0,U=v.length||0;a.length=V+U;for(let K=0;K<U;K++)a[V+K]=v[K]}else a.push(v)}}class Ve{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ke(a){return/^[\s\xa0]*$/.test(a)}function ve(){var a=m.navigator;return a&&(a=a.userAgent)?a:""}function we(a){return we[" "](a),a}we[" "]=function(){};var Xe=ve().indexOf("Gecko")!=-1&&!(ve().toLowerCase().indexOf("webkit")!=-1&&ve().indexOf("Edge")==-1)&&!(ve().indexOf("Trident")!=-1||ve().indexOf("MSIE")!=-1)&&ve().indexOf("Edge")==-1;function Pe(a,d,g){for(const v in a)d.call(g,a[v],v,a)}function P(a,d){for(const g in a)d.call(void 0,a[g],g,a)}function T(a){const d={};for(const g in a)d[g]=a[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,d){let g,v;for(let V=1;V<arguments.length;V++){v=arguments[V];for(g in v)a[g]=v[g];for(let U=0;U<A.length;U++)g=A[U],Object.prototype.hasOwnProperty.call(v,g)&&(a[g]=v[g])}}function x(a){var d=1;a=a.split(":");const g=[];for(;0<d&&a.length;)g.push(a.shift()),d--;return a.length&&g.push(a.join(":")),g}function D(a){m.setTimeout(()=>{throw a},0)}function I(){var a=le;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Je{constructor(){this.h=this.g=null}add(d,g){const v=At.get();v.set(d,g),this.h?this.h.next=v:this.g=v,this.h=v}}var At=new Ve(()=>new Ct,a=>a.reset());class Ct{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,W=!1,le=new Je,J=()=>{const a=m.Promise.resolve(void 0);Fe=()=>{a.then(N)}};var N=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(g){D(g)}var d=At;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}W=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return a}();function ye(a,d){if(ae.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var g=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Xe){e:{try{we(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else g=="mouseover"?d=a.fromElement:g=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Te[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ye.aa.h.call(this)}}te(ye,ae);var Te={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function ze(a,d,g,v,V){this.listener=a,this.proxy=null,this.src=d,this.type=g,this.capture=!!v,this.ha=V,this.key=++Oe,this.da=this.fa=!1}function dt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Qn(a){this.src=a,this.g={},this.h=0}Qn.prototype.add=function(a,d,g,v,V){var U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);var K=pr(a,d,v,V);return-1<K?(d=a[K],g||(d.fa=!1)):(d=new ze(d,this.src,U,!!v,V),d.fa=g,a.push(d)),d};function Li(a,d){var g=d.type;if(g in a.g){var v=a.g[g],V=Array.prototype.indexOf.call(v,d,void 0),U;(U=0<=V)&&Array.prototype.splice.call(v,V,1),U&&(dt(d),a.g[g].length==0&&(delete a.g[g],a.h--))}}function pr(a,d,g,v){for(var V=0;V<a.length;++V){var U=a[V];if(!U.da&&U.listener==d&&U.capture==!!g&&U.ha==v)return V}return-1}var Yr="closure_lm_"+(1e6*Math.random()|0),Oi={};function qs(a,d,g,v,V){if(Array.isArray(d)){for(var U=0;U<d.length;U++)qs(a,d[U],g,v,V);return null}return g=Gs(g),a&&a[Le]?a.K(d,g,w(v)?!!v.capture:!1,V):$s(a,d,g,!1,v,V)}function $s(a,d,g,v,V,U){if(!d)throw Error("Invalid event type");var K=w(V)?!!V.capture:!!V,Me=Fi(a);if(Me||(a[Yr]=Me=new Qn(a)),g=Me.add(d,g,v,K,U),g.proxy)return g;if(v=ra(),g.proxy=v,v.src=a,v.listener=g,a.addEventListener)ge||(V=K),V===void 0&&(V=!1),a.addEventListener(d.toString(),v,V);else if(a.attachEvent)a.attachEvent(Wn(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ra(){function a(g){return d.call(a.src,a.listener,g)}const d=Hs;return a}function Mi(a,d,g,v,V){if(Array.isArray(d))for(var U=0;U<d.length;U++)Mi(a,d[U],g,v,V);else v=w(v)?!!v.capture:!!v,g=Gs(g),a&&a[Le]?(a=a.i,d=String(d).toString(),d in a.g&&(U=a.g[d],g=pr(U,g,v,V),-1<g&&(dt(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete a.g[d],a.h--)))):a&&(a=Fi(a))&&(d=a.g[d.toString()],a=-1,d&&(a=pr(d,g,v,V)),(g=-1<a?d[a]:null)&&Kn(g))}function Kn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Le])Li(d.i,a);else{var g=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(g,v,a.capture):d.detachEvent?d.detachEvent(Wn(g),v):d.addListener&&d.removeListener&&d.removeListener(v),(g=Fi(d))?(Li(g,a),g.h==0&&(g.src=null,d[Yr]=null)):dt(a)}}}function Wn(a){return a in Oi?Oi[a]:Oi[a]="on"+a}function Hs(a,d){if(a.da)a=!0;else{d=new ye(d,this);var g=a.listener,v=a.ha||a.src;a.fa&&Kn(a),a=g.call(v,d)}return a}function Fi(a){return a=a[Yr],a instanceof Qn?a:null}var Ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gs(a){return typeof a=="function"?a:(a[Ui]||(a[Ui]=function(d){return a.handleEvent(d)}),a[Ui])}function ot(){j.call(this),this.i=new Qn(this),this.M=this,this.F=null}te(ot,j),ot.prototype[Le]=!0,ot.prototype.removeEventListener=function(a,d,g,v){Mi(this,a,d,g,v)};function at(a,d){var g,v=a.F;if(v)for(g=[];v;v=v.F)g.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new ae(d,a);else if(d instanceof ae)d.target=d.target||a;else{var V=d;d=new ae(v,a),k(d,V)}if(V=!0,g)for(var U=g.length-1;0<=U;U--){var K=d.g=g[U];V=Yn(K,v,!0,d)&&V}if(K=d.g=a,V=Yn(K,v,!0,d)&&V,V=Yn(K,v,!1,d)&&V,g)for(U=0;U<g.length;U++)K=d.g=g[U],V=Yn(K,v,!1,d)&&V}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var g=a.g[d],v=0;v<g.length;v++)dt(g[v]);delete a.g[d],a.h--}}this.F=null},ot.prototype.K=function(a,d,g,v){return this.i.add(String(a),d,!1,g,v)},ot.prototype.L=function(a,d,g,v){return this.i.add(String(a),d,!0,g,v)};function Yn(a,d,g,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,U=0;U<d.length;++U){var K=d[U];if(K&&!K.da&&K.capture==g){var Me=K.listener,lt=K.ha||K.src;K.fa&&Li(a.i,K),V=Me.call(lt,v)!==!1&&V}}return V&&!v.defaultPrevented}function Qs(a,d,g){if(typeof a=="function")g&&(a=z(a,g));else if(a&&typeof a.handleEvent=="function")a=z(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(a,d||0)}function mr(a){a.g=Qs(()=>{a.g=null,a.i&&(a.i=!1,mr(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Xr extends j{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:mr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(a){j.call(this),this.h=a,this.g={}}te(Jr,j);var Ks=[];function Ws(a){Pe(a.g,function(d,g){this.g.hasOwnProperty(g)&&Kn(d)},a),a.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),Ws(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ys=m.JSON.stringify,Xs=m.JSON.parse,Js=class{stringify(a){return m.JSON.stringify(a,void 0)}parse(a){return m.JSON.parse(a,void 0)}};function Zr(){}Zr.prototype.h=null;function zi(a){return a.h||(a.h=a.i())}function ji(){}var on={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){ae.call(this,"d")}te(Nn,ae);function Bi(){ae.call(this,"c")}te(Bi,ae);var Dn={},Zs=null;function ei(){return Zs=Zs||new ot}Dn.La="serverreachability";function eo(a){ae.call(this,Dn.La,a)}te(eo,ae);function Xn(a){const d=ei();at(d,new eo(d))}Dn.STAT_EVENT="statevent";function to(a,d){ae.call(this,Dn.STAT_EVENT,a),this.stat=d}te(to,ae);function Ze(a){const d=ei();at(d,new to(d,a))}Dn.Ma="timingevent";function bi(a,d){ae.call(this,Dn.Ma,a),this.size=d}te(bi,ae);function gn(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){a()},d)}function ti(){this.g=!0}ti.prototype.xa=function(){this.g=!1};function ni(a,d,g,v,V,U){a.info(function(){if(a.g)if(U)for(var K="",Me=U.split("&"),lt=0;lt<Me.length;lt++){var Ie=Me[lt].split("=");if(1<Ie.length){var pt=Ie[0];Ie=Ie[1];var rt=pt.split("_");K=2<=rt.length&&rt[1]=="type"?K+(pt+"="+Ie+"&"):K+(pt+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+v+") [attempt "+V+"]: "+d+`
`+g+`
`+K})}function qi(a,d,g,v,V,U,K){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+V+"]: "+d+`
`+g+`
`+U+" "+K})}function yn(a,d,g,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+ru(a,g)+(v?" "+v:"")})}function no(a,d){a.info(function(){return"TIMEOUT: "+d})}ti.prototype.info=function(){};function ru(a,d){if(!a.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(a=0;a<g.length;a++)if(Array.isArray(g[a])){var v=g[a];if(!(2>v.length)){var V=v[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<V.length;K++)V[K]=""}}}}return Ys(g)}catch{return d}}var $i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ia={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_n;function ri(){}te(ri,Zr),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},_n=new ri;function vn(a,d,g,v){this.j=a,this.i=d,this.l=g,this.R=v||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sa}function sa(){this.i=null,this.g="",this.h=!1}var ro={},Hi={};function Gi(a,d,g){a.L=1,a.v=wr(Jt(d)),a.m=g,a.P=!0,io(a,null)}function io(a,d){a.F=Date.now(),je(a),a.A=Jt(a.v);var g=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Tr(g.i,"t",v),a.C=0,g=a.j.J,a.h=new sa,a.g=Ia(a.j,g?d:null,!a.m),0<a.O&&(a.M=new Xr(z(a.Y,a,a.g),a.O)),d=a.U,g=a.g,v=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ks[0]=V.toString()),V=Ks);for(var U=0;U<V.length;U++){var K=qs(g,V[U],v||d.handleEvent,!1,d.h||d);if(!K)break;d.g[K.key]=K}d=a.H?T(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Xn(),ni(a.i,a.u,a.A,a.l,a.R,a.m)}vn.prototype.ca=function(a){a=a.target;const d=this.M;d&&Bt(a)==3?d.j():this.Y(a)},vn.prototype.Y=function(a){try{if(a==this.g)e:{const rt=Bt(this.g);var d=this.g.Ba();const un=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||co(this.g)))){this.J||rt!=4||d==7||(d==8||0>=un?Xn(3):Xn(2)),ii(this);var g=this.g.Z();this.X=g;t:if(oa(this)){var v=co(this.g);a="";var V=v.length,U=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),gr(this);var K="";break t}this.h.i=new m.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(U&&d==V-1)});v.length=0,this.h.g+=a,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=g==200,qi(this.i,this.u,this.A,this.l,this.R,rt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,lt=this.g;if((Me=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ke(Me)){var Ie=Me;break t}}Ie=null}if(g=Ie)yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,g);else{this.o=!1,this.s=3,Ze(12),an(this),gr(this);break e}}if(this.P){g=!0;let en;for(;!this.J&&this.C<K.length;)if(en=iu(this,K),en==Hi){rt==4&&(this.s=4,Ze(14),g=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(en==ro){this.s=4,Ze(15),yn(this.i,this.l,K,"[Invalid Chunk]"),g=!1;break}else yn(this.i,this.l,en,null),so(this,en);if(oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||K.length!=0||this.h.h||(this.s=1,Ze(16),g=!1),this.o=this.o&&g,!g)yn(this.i,this.l,K,"[Invalid Chunked Response]"),an(this),gr(this);else if(0<K.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),fo(pt),pt.M=!0,Ze(11))}}else yn(this.i,this.l,K,null),so(this,K);rt==4&&an(this),this.o&&!this.J&&(rt==4?rs(this.j,this):(this.o=!1,je(this)))}else Ji(this.g),g==400&&0<K.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),an(this),gr(this)}}}catch{}finally{}};function oa(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function iu(a,d){var g=a.C,v=d.indexOf(`
`,g);return v==-1?Hi:(g=Number(d.substring(g,v)),isNaN(g)?ro:(v+=1,v+g>d.length?Hi:(d=d.slice(v,v+g),a.C=v+g,d)))}vn.prototype.cancel=function(){this.J=!0,an(this)};function je(a){a.S=Date.now()+a.I,aa(a,a.I)}function aa(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=gn(z(a.ba,a),d)}function ii(a){a.B&&(m.clearTimeout(a.B),a.B=null)}vn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(no(this.i,this.A),this.L!=2&&(Xn(),Ze(17)),an(this),this.s=2,gr(this)):aa(this,this.S-a)};function gr(a){a.j.G==0||a.J||rs(a.j,a)}function an(a){ii(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ws(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function so(a,d){try{var g=a.j;if(g.G!=0&&(g.g==a||Ot(g.h,a))){if(!a.K&&Ot(g.h,a)&&g.G==3){try{var v=g.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var V=v;if(V[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<a.F)ns(g),Sn(g);else break e;ts(g),Ze(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=gn(z(g.Za,g),6e3));if(1>=ua(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else nr(g,11)}else if((a.K||g.g==a)&&ns(g),!ke(d))for(V=g.Da.g.parse(d),d=0;d<V.length;d++){let Ie=V[d];if(g.T=Ie[0],Ie=Ie[1],g.G==2)if(Ie[0]=="c"){g.K=Ie[1],g.ia=Ie[2];const pt=Ie[3];pt!=null&&(g.la=pt,g.j.info("VER="+g.la));const rt=Ie[4];rt!=null&&(g.Aa=rt,g.j.info("SVER="+g.Aa));const un=Ie[5];un!=null&&typeof un=="number"&&0<un&&(v=1.5*un,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const en=a.g;if(en){const hi=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var U=v.h;U.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(oo(U,U.h),U.h=null))}if(v.D){const ss=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;ss&&(v.ya=ss,Ue(v.I,v.D,ss))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-a.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var K=a;if(v.qa=Ta(v,v.J?v.ia:null,v.W),K.K){ca(v.h,K);var Me=K,lt=v.L;lt&&(Me.I=lt),Me.B&&(ii(Me),je(Me)),v.g=K}else ci(v);0<g.i.length&&Mn(g)}else Ie[0]!="stop"&&Ie[0]!="close"||nr(g,7);else g.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?nr(g,7):wt(g):Ie[0]!="noop"&&g.l&&g.l.ta(Ie),g.v=0)}}Xn(4)}catch{}}var la=class{constructor(a,d){this.g=a,this.map=d}};function si(a){this.l=a||10,m.PerformanceNavigationTiming?(a=m.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xt(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ua(a){return a.h?1:a.g?a.g.size:0}function Ot(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function oo(a,d){a.g?a.g.add(d):a.h=d}function ca(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}si.prototype.cancel=function(){if(this.i=ha(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ha(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const g of a.g.values())d=d.concat(g.D);return d}return Z(a.i)}function Qi(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(_(a)){for(var d=[],g=a.length,v=0;v<g;v++)d.push(a[v]);return d}d=[],g=0;for(v in a)d[g++]=a[v];return d}function Ki(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(_(a)||typeof a=="string"){var d=[];a=a.length;for(var g=0;g<a;g++)d.push(g);return d}d=[],g=0;for(const v in a)d[g++]=v;return d}}}function yr(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(_(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var g=Ki(a),v=Qi(a),V=v.length,U=0;U<V;U++)d.call(void 0,v[U],g&&g[U],a)}var oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function su(a,d){if(a){a=a.split("&");for(var g=0;g<a.length;g++){var v=a[g].indexOf("="),V=null;if(0<=v){var U=a[g].substring(0,v);V=a[g].substring(v+1)}else U=a[g];d(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Jn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Jn){this.h=a.h,ai(this,a.j),this.o=a.o,this.g=a.g,_r(this,a.s),this.l=a.l;var d=a.i,g=new Vn;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),vr(this,g),this.m=a.m}else a&&(d=String(a).match(oi))?(this.h=!1,ai(this,d[1]||"",!0),this.o=Ee(d[2]||""),this.g=Ee(d[3]||"",!0),_r(this,d[4]),this.l=Ee(d[5]||"",!0),vr(this,d[6]||"",!0),this.m=Ee(d[7]||"")):(this.h=!1,this.i=new Vn(null,this.h))}Jn.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Er(d,Wi,!0),":");var g=this.g;return(g||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Er(d,Wi,!0),"@"),a.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&a.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(Er(g,g.charAt(0)=="/"?pa:da,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",Er(g,ao)),a.join("")};function Jt(a){return new Jn(a)}function ai(a,d,g){a.j=g?Ee(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function _r(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function vr(a,d,g){d instanceof Vn?(a.i=d,Ln(a.i,a.h)):(g||(d=Er(d,ma)),a.i=new Vn(d,a.h))}function Ue(a,d,g){a.i.set(d,g)}function wr(a){return Ue(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ee(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Er(a,d,g){return typeof a=="string"?(a=encodeURI(a).replace(d,fa),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fa(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Wi=/[#\/\?@]/g,da=/[#\?:]/g,pa=/[#\?]/g,ma=/[#\?@]/g,ao=/#/g;function Vn(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function vt(a){a.g||(a.g=new Map,a.h=0,a.i&&su(a.i,function(d,g){a.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=Vn.prototype,i.add=function(a,d){vt(this),this.i=null,a=ln(this,a);var g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(d),this.h+=1,this};function wn(a,d){vt(a),d=ln(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function En(a,d){return vt(a),d=ln(a,d),a.g.has(d)}i.forEach=function(a,d){vt(this),this.g.forEach(function(g,v){g.forEach(function(V){a.call(d,V,v,this)},this)},this)},i.na=function(){vt(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let v=0;v<d.length;v++){const V=a[v];for(let U=0;U<V.length;U++)g.push(d[v])}return g},i.V=function(a){vt(this);let d=[];if(typeof a=="string")En(this,a)&&(d=d.concat(this.g.get(ln(this,a))));else{a=Array.from(this.g.values());for(let g=0;g<a.length;g++)d=d.concat(a[g])}return d},i.set=function(a,d){return vt(this),this.i=null,a=ln(this,a),En(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},i.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Tr(a,d,g){wn(a,d),0<g.length&&(a.i=null,a.g.set(ln(a,d),Z(g)),a.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var v=d[g];const U=encodeURIComponent(String(v)),K=this.V(v);for(v=0;v<K.length;v++){var V=U;K[v]!==""&&(V+="="+encodeURIComponent(String(K[v]))),a.push(V)}}return this.i=a.join("&")};function ln(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Ln(a,d){d&&!a.j&&(vt(a),a.i=null,a.g.forEach(function(g,v){var V=v.toLowerCase();v!=V&&(wn(this,v),Tr(this,V,g))},a)),a.j=d}function ou(a,d){const g=new ti;if(m.Image){const v=new Image;v.onload=$(jt,g,"TestLoadImage: loaded",!0,d,v),v.onerror=$(jt,g,"TestLoadImage: error",!1,d,v),v.onabort=$(jt,g,"TestLoadImage: abort",!1,d,v),v.ontimeout=$(jt,g,"TestLoadImage: timeout",!1,d,v),m.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function ga(a,d){const g=new ti,v=new AbortController,V=setTimeout(()=>{v.abort(),jt(g,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(U=>{clearTimeout(V),U.ok?jt(g,"TestPingServer: ok",!0,d):jt(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),jt(g,"TestPingServer: error",!1,d)})}function jt(a,d,g,v,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),v(g)}catch{}}function au(){this.g=new Js}function ya(a,d,g){const v=g||"";try{yr(a,function(V,U){let K=V;w(V)&&(K=Ys(V)),d.push(v+U+"="+encodeURIComponent(K))})}catch(V){throw d.push(v+"type="+encodeURIComponent("_badmap")),V}}function Zn(a){this.l=a.Ub||null,this.j=a.eb||!1}te(Zn,Zr),Zn.prototype.g=function(){return new li(this.l,this.j)},Zn.prototype.i=function(a){return function(){return a}}({});function li(a,d){ot.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}te(li,ot),i=li.prototype,i.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,In(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tn(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_a(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function _a(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Tn(this):In(this),this.readyState==3&&_a(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,Tn(this))},i.Qa=function(a){this.g&&(this.response=a,Tn(this))},i.ga=function(){this.g&&Tn(this)};function Tn(a){a.readyState=4,a.l=null,a.j=null,a.v=null,In(a)}i.setRequestHeader=function(a,d){this.u.append(a,d)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=d.next();return a.join(`\r
`)};function In(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function er(a){let d="";return Pe(a,function(g,v){d+=v,d+=":",d+=g,d+=`\r
`}),d}function Ir(a,d,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=er(g),typeof a=="string"?g!=null&&encodeURIComponent(String(g)):Ue(a,d,g))}function $e(a){ot.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}te($e,ot);var lu=/^https?$/i,lo=["POST","PUT"];i=$e.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,d,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_n.g(),this.v=this.o?zi(this.o):zi(_n),this.g.onreadystatechange=z(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(U){ui(this,U);return}if(a=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var V in v)g.set(V,v[V]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const U of v.keys())g.set(U,v.get(U));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),V=m.FormData&&a instanceof m.FormData,!(0<=Array.prototype.indexOf.call(lo,d,void 0))||v||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,K]of g)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xi(this),this.u=!0,this.g.send(a),this.u=!1}catch(U){ui(this,U)}};function ui(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Yi(a),Zt(a)}function Yi(a){a.A||(a.A=!0,at(a,"complete"),at(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,at(this,"complete"),at(this,"abort"),Zt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),$e.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?uo(this):this.bb())},i.bb=function(){uo(this)};function uo(a){if(a.h&&typeof f<"u"&&(!a.v[1]||Bt(a)!=4||a.Z()!=2)){if(a.u&&Bt(a)==4)Qs(a.Ea,0,a);else if(at(a,"readystatechange"),Bt(a)==4){a.h=!1;try{const K=a.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var v;if(v=K===0){var V=String(a.D).match(oi)[1]||null;!V&&m.self&&m.self.location&&(V=m.self.location.protocol.slice(0,-1)),v=!lu.test(V?V.toLowerCase():"")}g=v}if(g)at(a,"complete"),at(a,"success");else{a.m=6;try{var U=2<Bt(a)?a.g.statusText:""}catch{U=""}a.l=U+" ["+a.Z()+"]",Yi(a)}}finally{Zt(a)}}}}function Zt(a,d){if(a.g){Xi(a);const g=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||at(a,"ready");try{g.onreadystatechange=v}catch{}}}function Xi(a){a.I&&(m.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function Bt(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Xs(d)}};function co(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ji(a){const d={};a=(a.g&&2<=Bt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(ke(a[v]))continue;var g=x(a[v]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=d[V]||[];d[V]=U,U.push(g)}P(d,function(v){return v.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function On(a,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||d}function ho(a){this.Aa=0,this.i=[],this.j=new ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=On("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=On("baseRetryDelayMs",5e3,a),this.cb=On("retryDelaySeedMs",1e4,a),this.Wa=On("forwardChannelMaxRetries",2,a),this.wa=On("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new si(a&&a.concurrentRequestLimit),this.Da=new au,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ho.prototype,i.la=8,i.G=1,i.connect=function(a,d,g,v){Ze(0),this.W=a,this.H=d||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Ta(this,null,this.W),Mn(this)};function wt(a){if(Zi(a),a.G==3){var d=a.U++,g=Jt(a.I);if(Ue(g,"SID",a.K),Ue(g,"RID",d),Ue(g,"TYPE","terminate"),tr(a,g),d=new vn(a,a.j,d),d.L=2,d.v=wr(Jt(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=Ia(d.j,null),d.g.ea(d.v)),d.F=Date.now(),je(d)}Ea(a)}function Sn(a){a.g&&(fo(a),a.g.cancel(),a.g=null)}function Zi(a){Sn(a),a.u&&(m.clearTimeout(a.u),a.u=null),ns(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&m.clearTimeout(a.s),a.s=null)}function Mn(a){if(!Xt(a.h)&&!a.s){a.s=!0;var d=a.Ga;Fe||J(),W||(Fe(),W=!0),le.add(d,a),a.B=0}}function uu(a,d){return ua(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=gn(z(a.Ga,a,d),wa(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new vn(this,this.j,a);let U=this.o;if(this.S&&(U?(U=T(U),k(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Sr(this,V,d),g=Jt(this.I),Ue(g,"RID",a),Ue(g,"CVER",22),this.D&&Ue(g,"X-HTTP-Session-Id",this.D),tr(this,g),U&&(this.O?d="headers="+encodeURIComponent(String(er(U)))+"&"+d:this.m&&Ir(g,this.m,U)),oo(this.h,V),this.Ua&&Ue(g,"TYPE","init"),this.P?(Ue(g,"$req",d),Ue(g,"SID","null"),V.T=!0,Gi(V,g,null)):Gi(V,g,d),this.G=2}}else this.G==3&&(a?es(this,a):this.i.length==0||Xt(this.h)||es(this))};function es(a,d){var g;d?g=d.l:g=a.U++;const v=Jt(a.I);Ue(v,"SID",a.K),Ue(v,"RID",g),Ue(v,"AID",a.T),tr(a,v),a.m&&a.o&&Ir(v,a.m,a.o),g=new vn(a,a.j,g,a.B+1),a.m===null&&(g.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Sr(a,g,1e3),g.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),oo(a.h,g),Gi(g,v,d)}function tr(a,d){a.H&&Pe(a.H,function(g,v){Ue(d,v,g)}),a.l&&yr({},function(g,v){Ue(d,v,g)})}function Sr(a,d,g){g=Math.min(a.i.length,g);var v=a.l?z(a.l.Na,a.l,a):null;e:{var V=a.i;let U=-1;for(;;){const K=["count="+g];U==-1?0<g?(U=V[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let Me=!0;for(let lt=0;lt<g;lt++){let Ie=V[lt].g;const pt=V[lt].map;if(Ie-=U,0>Ie)U=Math.max(0,V[lt].g-100),Me=!1;else try{ya(pt,K,"req"+Ie+"_")}catch{v&&v(pt)}}if(Me){v=K.join("&");break e}}}return a=a.i.splice(0,g),d.D=a,v}function ci(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Fe||J(),W||(Fe(),W=!0),le.add(d,a),a.v=0}}function ts(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=gn(z(a.Fa,a),wa(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,va(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=gn(z(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Sn(this),va(this))};function fo(a){a.A!=null&&(m.clearTimeout(a.A),a.A=null)}function va(a){a.g=new vn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Jt(a.qa);Ue(d,"RID","rpc"),Ue(d,"SID",a.K),Ue(d,"AID",a.T),Ue(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ue(d,"TO",a.ja),Ue(d,"TYPE","xmlhttp"),tr(a,d),a.m&&a.o&&Ir(d,a.m,a.o),a.L&&(a.g.I=a.L);var g=a.g;a=a.ia,g.L=1,g.v=wr(Jt(d)),g.m=null,g.P=!0,io(g,a)}i.Za=function(){this.C!=null&&(this.C=null,Sn(this),ts(this),Ze(19))};function ns(a){a.C!=null&&(m.clearTimeout(a.C),a.C=null)}function rs(a,d){var g=null;if(a.g==d){ns(a),fo(a),a.g=null;var v=2}else if(Ot(a.h,d))g=d.D,ca(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;v=ei(),at(v,new bi(v,g)),Mn(a)}else ci(a);else if(V=d.s,V==3||V==0&&0<d.X||!(v==1&&uu(a,d)||v==2&&ts(a)))switch(g&&0<g.length&&(d=a.h,d.i=d.i.concat(g)),V){case 1:nr(a,5);break;case 4:nr(a,10);break;case 3:nr(a,6);break;default:nr(a,2)}}}function wa(a,d){let g=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(g*=2),g*d}function nr(a,d){if(a.j.info("Error code "+d),d==2){var g=z(a.fb,a),v=a.Xa;const V=!v;v=new Jn(v||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ai(v,"https"),wr(v),V?ou(v.toString(),g):ga(v.toString(),g)}else Ze(2);a.G=0,a.l&&a.l.sa(d),Ea(a),Zi(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Ea(a){if(a.G=0,a.ka=[],a.l){const d=ha(a.h);(d.length!=0||a.i.length!=0)&&(Q(a.ka,d),Q(a.ka,a.i),a.h.i.length=0,Z(a.i),a.i.length=0),a.l.ra()}}function Ta(a,d,g){var v=g instanceof Jn?Jt(g):new Jn(g);if(v.g!="")d&&(v.g=d+"."+v.g),_r(v,v.s);else{var V=m.location;v=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var U=new Jn(null);v&&ai(U,v),d&&(U.g=d),V&&_r(U,V),g&&(U.l=g),v=U}return g=a.D,d=a.ya,g&&d&&Ue(v,g,d),Ue(v,"VER",a.la),tr(a,v),v}function Ia(a,d,g){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new $e(new Zn({eb:g})):new $e(a.pa),d.Ha(a.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function po(){}i=po.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function is(){}is.prototype.g=function(a,d){return new Mt(a,d)};function Mt(a,d){ot.call(this),this.g=new ho(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!ke(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ke(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Fn(this)}te(Mt,ot),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){wt(this.g)},Mt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.u&&(g={},g.__data__=Ys(a),a=g);d.i.push(new la(d.Ya++,a)),d.G==3&&Mn(d)},Mt.prototype.N=function(){this.g.l=null,delete this.j,wt(this.g),delete this.g,Mt.aa.N.call(this)};function Sa(a){Nn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const g in d){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}te(Sa,Nn);function Aa(){Bi.call(this),this.status=1}te(Aa,Bi);function Fn(a){this.g=a}te(Fn,po),Fn.prototype.ua=function(){at(this.g,"a")},Fn.prototype.ta=function(a){at(this.g,new Sa(a))},Fn.prototype.sa=function(a){at(this.g,new Aa)},Fn.prototype.ra=function(){at(this.g,"b")},is.prototype.createWebChannel=is.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,Lm=function(){return new is},Vm=function(){return ei()},Dm=Dn,Xc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,Al=$i,ia.COMPLETE="complete",Nm=ia,ji.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",ot.prototype.listen=ot.prototype.K,zo=ji,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,xm=$e}).apply(typeof vl<"u"?vl:typeof self<"u"?self:typeof window<"u"?window:{});const vp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new yh("@firebase/firestore");function Cs(){return xi.logLevel}function ee(i,...e){if(xi.logLevel<=Ae.DEBUG){const n=e.map(vh);xi.debug(`Firestore (${zs}): ${i}`,...n)}}function dr(i,...e){if(xi.logLevel<=Ae.ERROR){const n=e.map(vh);xi.error(`Firestore (${zs}): ${i}`,...n)}}function Vs(i,...e){if(xi.logLevel<=Ae.WARN){const n=e.map(vh);xi.warn(`Firestore (${zs}): ${i}`,...n)}}function vh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(i="Unexpected state"){const e=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: `+i;throw dr(e),new Error(e)}function Ke(i,e){i||me()}function Re(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class ew{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tw{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0);let o=this.i;const l=_=>this.i!==o?(o=this.i,n(_)):Promise.resolve();let c=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ki,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const _=c;e.enqueueRetryable(async()=>{await _.promise,await l(this.currentUser)})},m=_=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(_=>m(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ki)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ke(typeof o.accessToken=="string"),new Om(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Dt(e)}}class nw{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class rw{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new nw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sw{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ke(this.o===void 0);const o=c=>{c.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,ee("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const l=c=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?l(c):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string"),this.R=n.token,new iw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const l=ow(40);for(let c=0;c<l.length;++c)o.length<20&&l[c]<n&&(o+=e.charAt(l[c]%e.length))}return o}}function Ce(i,e){return i<e?-1:i>e?1:0}function Ls(i,e,n){return i.length===e.length&&i.every((o,l)=>n(o,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Wt(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new Wt(0,0))}static max(){return new pe(new Wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,o){n===void 0?n=0:n>e.length&&me(),o===void 0?o=e.length-n:o>e.length-n&&me(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Ko.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ko?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let l=0;l<o;l++){const c=e.get(l),f=n.get(l);if(c<f)return-1;if(c>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ye extends Ko{construct(e,n,o){return new Ye(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new he(Y.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(l=>l.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const lw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Ko{construct(e,n,o){return new zt(e,n,o)}static isValidIdentifier(e){return lw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const n=[];let o="",l=0;const c=()=>{if(o.length===0)throw new he(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let f=!1;for(;l<e.length;){const m=e[l];if(m==="\\"){if(l+1===e.length)throw new he(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new he(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=_,l+=2}else m==="`"?(f=!f,l++):m!=="."||f?(o+=m,l++):(c(),l++)}if(c(),f)throw new he(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ye.fromString(e))}static fromName(e){return new fe(Ye.fromString(e).popFirst(5))}static empty(){return new fe(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ye(e.slice()))}}function uw(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,l=pe.fromTimestamp(o===1e9?new Wt(n+1,0):new Wt(n,o));return new $r(l,fe.empty(),e)}function cw(i){return new $r(i.readTime,i.key,-1)}class $r{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new $r(pe.min(),fe.empty(),-1)}static max(){return new $r(pe.max(),fe.empty(),-1)}}function hw(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(i.documentKey,e.documentKey),n!==0?n:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(i){if(i.code!==Y.FAILED_PRECONDITION||i.message!==fw)throw i;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((o,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(o,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,o)=>{n(e)})}static reject(e){return new B((n,o)=>{o(e)})}static waitFor(e){return new B((n,o)=>{let l=0,c=0,f=!1;e.forEach(m=>{++l,m.next(()=>{++c,f&&c===l&&n()},_=>o(_))}),f=!0,c===l&&n()})}static or(e){let n=B.resolve(!1);for(const o of e)n=n.next(l=>l?B.resolve(l):o());return n}static forEach(e,n){const o=[];return e.forEach((l,c)=>{o.push(n.call(this,l,c))}),this.waitFor(o)}static mapArray(e,n){return new B((o,l)=>{const c=e.length,f=new Array(c);let m=0;for(let _=0;_<c;_++){const w=_;n(e[w]).next(S=>{f[w]=S,++m,m===c&&o(f)},S=>l(S))}})}static doWhile(e,n){return new B((o,l)=>{const c=()=>{e()===!0?n().next(()=>{c()},l):o()};c()})}}function pw(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function js(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ie(o),this.se=o=>n.writeSequenceNumber(o))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$l.oe=-1;function Hl(i){return i==null}function Jc(i){return i===0&&1/i==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=wp(e)),e=gw(i.get(n),e);return wp(e)}function gw(i,e){let n=e;const o=i.length;for(let l=0;l<o;l++){const c=i.charAt(l);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function wp(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Zo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function yw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(e,o.key);if(l===0)return n+o.left.size;l<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,n,o,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?o(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,o,l,c){this.key=e,this.value=n,this.color=o??It.RED,this.left=l??It.EMPTY,this.right=c??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,l,c){return new It(e??this.key,n??this.value,o??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let l=this;const c=o(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,o),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return It.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,n,o,l,c){return this}insert(e,n,o){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tp(this.data.getIterator())}getIteratorFrom(e){return new Tp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=o.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Tp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new zr([])}unionWith(e){let n=new ft(zt.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ls(this.fields,e.fields,(n,o)=>n.isEqual(o))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Mm("Invalid base64 string: "+c):c}}(e);return new St(n)}static fromUint8Array(e){const n=function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let l=0;l<n.length;l++)o[l]=n.charCodeAt(l);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(i){if(Ke(!!i),typeof i=="string"){let e=0;const n=_w.exec(i);if(Ke(!!n),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:tt(i.seconds),nanos:tt(i.nanos)}}function tt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Gr(i){return typeof i=="string"?St.fromBase64String(i):St.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gl(i){const e=i.mapValue.fields.__previous_value__;return wh(e)?Gl(e):e}function Wo(i){const e=Hr(i.mapValue.fields.__local_write_time__.timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,o,l,c,f,m,_,w){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=w}}class Yo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Yo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wh(i)?4:Ew(i)?9007199254740991:ww(i)?10:11:me()}function Hn(i,e){if(i===e)return!0;const n=Qr(i);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Wo(i).isEqual(Wo(e));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Hr(l.timestampValue),m=Hr(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(l,c){return Gr(l.bytesValue).isEqual(Gr(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(l,c){return tt(l.geoPointValue.latitude)===tt(c.geoPointValue.latitude)&&tt(l.geoPointValue.longitude)===tt(c.geoPointValue.longitude)}(i,e);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return tt(l.integerValue)===tt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=tt(l.doubleValue),m=tt(c.doubleValue);return f===m?Jc(f)===Jc(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return Ls(i.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:case 11:return function(l,c){const f=l.mapValue.fields||{},m=c.mapValue.fields||{};if(Ep(f)!==Ep(m))return!1;for(const _ in f)if(f.hasOwnProperty(_)&&(m[_]===void 0||!Hn(f[_],m[_])))return!1;return!0}(i,e);default:return me()}}function Xo(i,e){return(i.values||[]).find(n=>Hn(n,e))!==void 0}function Os(i,e){if(i===e)return 0;const n=Qr(i),o=Qr(e);if(n!==o)return Ce(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return function(c,f){const m=tt(c.integerValue||c.doubleValue),_=tt(f.integerValue||f.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1}(i,e);case 3:return Ip(i.timestampValue,e.timestampValue);case 4:return Ip(Wo(i),Wo(e));case 5:return Ce(i.stringValue,e.stringValue);case 6:return function(c,f){const m=Gr(c),_=Gr(f);return m.compareTo(_)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const m=c.split("/"),_=f.split("/");for(let w=0;w<m.length&&w<_.length;w++){const S=Ce(m[w],_[w]);if(S!==0)return S}return Ce(m.length,_.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const m=Ce(tt(c.latitude),tt(f.latitude));return m!==0?m:Ce(tt(c.longitude),tt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Sp(i.arrayValue,e.arrayValue);case 10:return function(c,f){var m,_,w,S;const O=c.fields||{},z=f.fields||{},$=(m=O.value)===null||m===void 0?void 0:m.arrayValue,te=(_=z.value)===null||_===void 0?void 0:_.arrayValue,Z=Ce(((w=$==null?void 0:$.values)===null||w===void 0?void 0:w.length)||0,((S=te==null?void 0:te.values)===null||S===void 0?void 0:S.length)||0);return Z!==0?Z:Sp($,te)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===El.mapValue&&f===El.mapValue)return 0;if(c===El.mapValue)return 1;if(f===El.mapValue)return-1;const m=c.fields||{},_=Object.keys(m),w=f.fields||{},S=Object.keys(w);_.sort(),S.sort();for(let O=0;O<_.length&&O<S.length;++O){const z=Ce(_[O],S[O]);if(z!==0)return z;const $=Os(m[_[O]],w[S[O]]);if($!==0)return $}return Ce(_.length,S.length)}(i.mapValue,e.mapValue);default:throw me()}}function Ip(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const n=Hr(i),o=Hr(e),l=Ce(n.seconds,o.seconds);return l!==0?l:Ce(n.nanos,o.nanos)}function Sp(i,e){const n=i.values||[],o=e.values||[];for(let l=0;l<n.length&&l<o.length;++l){const c=Os(n[l],o[l]);if(c)return c}return Ce(n.length,o.length)}function Ms(i){return Zc(i)}function Zc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Hr(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Gr(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return fe.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",l=!0;for(const c of n.values||[])l?l=!1:o+=",",o+=Zc(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of o)c?c=!1:l+=",",l+=`${f}:${Zc(n.fields[f])}`;return l+"}"}(i.mapValue):me()}function Cl(i){switch(Qr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gl(i);return e?16+Cl(e):16;case 5:return 2*i.stringValue.length;case 6:return Gr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(o){return(o.values||[]).reduce((l,c)=>l+Cl(c),0)}(i.arrayValue);case 10:case 11:return function(o){let l=0;return Zo(o.fields,(c,f)=>{l+=c.length+Cl(f)}),l}(i.mapValue);default:throw me()}}function eh(i){return!!i&&"integerValue"in i}function Eh(i){return!!i&&"arrayValue"in i}function Ap(i){return!!i&&"nullValue"in i}function Cp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Uc(i){return!!i&&"mapValue"in i}function ww(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function bo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Zo(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=bo(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Ew(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bo(n)}setAll(e){let n=zt.emptyPath(),o={},l=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const _=this.getFieldsMap(n);this.applyChanges(_,o,l),o={},l=[],n=m.popLast()}f?o[m.lastSegment()]=bo(f):l.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,o,l)}delete(e){const n=this.field(e.popLast());Uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let l=n.mapValue.fields[e.get(o)];Uc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,o){Zo(n,(l,c)=>e[l]=c);for(const l of o)delete e[l]}clone(){return new bn(bo(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,o,l,c,f,m){this.key=e,this.documentType=n,this.version=o,this.readTime=l,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Vt(e,0,pe.min(),pe.min(),pe.min(),bn.empty(),0)}static newFoundDocument(e,n,o,l){return new Vt(e,1,n,pe.min(),o,l,0)}static newNoDocument(e,n){return new Vt(e,2,n,pe.min(),pe.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,pe.min(),pe.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.position=e,this.inclusive=n}}function Rp(i,e,n){let o=0;for(let l=0;l<i.position.length;l++){const c=e[l],f=i.position[l];if(c.field.isKeyField()?o=fe.comparator(fe.fromName(f.referenceValue),n.key):o=Os(f,n.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function kp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Hn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n="asc"){this.field=e,this.dir=n}}function Tw(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{}class ht extends Fm{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new Sw(e,n,o):n==="array-contains"?new Rw(e,o):n==="in"?new kw(e,o):n==="not-in"?new Pw(e,o):n==="array-contains-any"?new xw(e,o):new ht(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new Aw(e,o):new Cw(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Os(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(Os(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends Fm{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gn(e,n)}matches(e){return Um(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Um(i){return i.op==="and"}function zm(i){return Iw(i)&&Um(i)}function Iw(i){for(const e of i.filters)if(e instanceof Gn)return!1;return!0}function th(i){if(i instanceof ht)return i.field.canonicalString()+i.op.toString()+Ms(i.value);if(zm(i))return i.filters.map(e=>th(e)).join(",");{const e=i.filters.map(n=>th(n)).join(",");return`${i.op}(${e})`}}function jm(i,e){return i instanceof ht?function(o,l){return l instanceof ht&&o.op===l.op&&o.field.isEqual(l.field)&&Hn(o.value,l.value)}(i,e):i instanceof Gn?function(o,l){return l instanceof Gn&&o.op===l.op&&o.filters.length===l.filters.length?o.filters.reduce((c,f,m)=>c&&jm(f,l.filters[m]),!0):!1}(i,e):void me()}function Bm(i){return i instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`}(i):i instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(Bm).join(" ,")+"}"}(i):"Filter"}class Sw extends ht{constructor(e,n,o){super(e,n,o),this.key=fe.fromName(o.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Aw extends ht{constructor(e,n){super(e,"in",n),this.keys=bm("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Cw extends ht{constructor(e,n){super(e,"not-in",n),this.keys=bm("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bm(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(o=>fe.fromName(o.referenceValue))}class Rw extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eh(n)&&Xo(n.arrayValue,this.value)}}class kw extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xo(this.value.arrayValue,n)}}class Pw extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xo(this.value.arrayValue,n)}}class xw extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Xo(this.value.arrayValue,o))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n=null,o=[],l=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=l,this.limit=c,this.startAt=f,this.endAt=m,this.ue=null}}function Pp(i,e=null,n=[],o=[],l=null,c=null,f=null){return new Nw(i,e,n,o,l,c,f)}function Th(i){const e=Re(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>th(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>function(c){return c.field.canonicalString()+c.dir}(o)).join(","),Hl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Ms(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Ms(o)).join(",")),e.ue=n}return e.ue}function Ih(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Tw(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!jm(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!kp(i.startAt,e.startAt)&&kp(i.endAt,e.endAt)}function nh(i){return fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n=null,o=[],l=[],c=null,f="F",m=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=l,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=_,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Dw(i,e,n,o,l,c,f,m){return new Ql(i,e,n,o,l,c,f,m)}function qm(i){return new Ql(i)}function xp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Vw(i){return i.collectionGroup!==null}function qo(i){const e=Re(i);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new ft(zt.comparator);return f.filters.forEach(_=>{_.getFlattenedFilters().forEach(w=>{w.isInequality()&&(m=m.add(w.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Ll(c,o))}),n.has(zt.keyField().canonicalString())||e.ce.push(new Ll(zt.keyField(),o))}return e.ce}function $n(i){const e=Re(i);return e.le||(e.le=Lw(e,qo(i))),e.le}function Lw(i,e){if(i.limitType==="F")return Pp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Ll(l.field,c)});const n=i.endAt?new Vl(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Vl(i.startAt.position,i.startAt.inclusive):null;return Pp(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}function rh(i,e,n){return new Ql(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Kl(i,e){return Ih($n(i),$n(e))&&i.limitType===e.limitType}function $m(i){return`${Th($n(i))}|lt:${i.limitType}`}function Rs(i){return`Query(target=${function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(l=>Bm(l)).join(", ")}]`),Hl(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(l=>Ms(l)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(l=>Ms(l)).join(",")),`Target(${o})`}($n(i))}; limitType=${i.limitType})`}function Wl(i,e){return e.isFoundDocument()&&function(o,l){const c=l.key.path;return o.collectionGroup!==null?l.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):fe.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,l){for(const c of qo(o))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(i,e)&&function(o,l){for(const c of o.filters)if(!c.matches(l))return!1;return!0}(i,e)&&function(o,l){return!(o.startAt&&!function(f,m,_){const w=Rp(f,m,_);return f.inclusive?w<=0:w<0}(o.startAt,qo(o),l)||o.endAt&&!function(f,m,_){const w=Rp(f,m,_);return f.inclusive?w>=0:w>0}(o.endAt,qo(o),l))}(i,e)}function Ow(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Hm(i){return(e,n)=>{let o=!1;for(const l of qo(i)){const c=Mw(l,e,n);if(c!==0)return c;o=o||l.field.isKeyField()}return 0}}function Mw(i,e,n){const o=i.field.isKeyField()?fe.comparator(e.key,n.key):function(c,f,m){const _=f.data.field(c),w=m.data.field(c);return _!==null&&w!==null?Os(_,w):me()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[l,c]of o)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),l=this.inner[o];if(l===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return o.length===1?delete this.inner[n]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(n,o)=>{for(const[l,c]of o)e(l,c)})}isEmpty(){return yw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new nt(fe.comparator);function Kr(){return Fw}const Gm=new nt(fe.comparator);function jo(...i){let e=Gm;for(const n of i)e=e.insert(n.key,n);return e}function Uw(i){let e=Gm;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Ai(){return $o()}function Qm(){return $o()}function $o(){return new Vi(i=>i.toString(),(i,e)=>i.isEqual(e))}const zw=new ft(fe.comparator);function Ne(...i){let e=zw;for(const n of i)e=e.add(n);return e}const jw=new ft(Ce);function Bw(){return jw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function qw(i){return{integerValue:""+i}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this._=void 0}}function $w(i,e,n){return i instanceof ih?function(l,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&wh(c)&&(c=Gl(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}}(n,e):i instanceof Ol?Km(i,e):i instanceof Ml?Wm(i,e):function(l,c){const f=Gw(l,c),m=Np(f)+Np(l.Pe);return eh(f)&&eh(l.Pe)?qw(m):bw(l.serializer,m)}(i,e)}function Hw(i,e,n){return i instanceof Ol?Km(i,e):i instanceof Ml?Wm(i,e):n}function Gw(i,e){return i instanceof sh?function(o){return eh(o)||function(c){return!!c&&"doubleValue"in c}(o)}(e)?e:{integerValue:0}:null}class ih extends Yl{}class Ol extends Yl{constructor(e){super(),this.elements=e}}function Km(i,e){const n=Ym(e);for(const o of i.elements)n.some(l=>Hn(l,o))||n.push(o);return{arrayValue:{values:n}}}class Ml extends Yl{constructor(e){super(),this.elements=e}}function Wm(i,e){let n=Ym(e);for(const o of i.elements)n=n.filter(l=>!Hn(l,o));return{arrayValue:{values:n}}}class sh extends Yl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Np(i){return tt(i.integerValue||i.doubleValue)}function Ym(i){return Eh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Qw(i,e){return i.field.isEqual(e.field)&&function(o,l){return o instanceof Ol&&l instanceof Ol||o instanceof Ml&&l instanceof Ml?Ls(o.elements,l.elements,Hn):o instanceof sh&&l instanceof sh?Hn(o.Pe,l.Pe):o instanceof ih&&l instanceof ih}(i.transform,e.transform)}class Pi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Sh{}function Xm(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ww(i.key,Pi.none()):new Ah(i.key,i.data,Pi.none());{const n=i.data,o=bn.empty();let l=new ft(zt.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?o.delete(c):o.set(c,f),l=l.add(c)}return new Xl(i.key,o,new zr(l.toArray()),Pi.none())}}function Kw(i,e,n){i instanceof Ah?function(l,c,f){const m=l.value.clone(),_=Vp(l.fieldTransforms,c,f.transformResults);m.setAll(_),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Xl?function(l,c,f){if(!Rl(l.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Vp(l.fieldTransforms,c,f.transformResults),_=c.data;_.setAll(Jm(l)),_.setAll(m),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(i,e,n):function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Ho(i,e,n,o){return i instanceof Ah?function(c,f,m,_){if(!Rl(c.precondition,f))return m;const w=c.value.clone(),S=Lp(c.fieldTransforms,_,f);return w.setAll(S),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),null}(i,e,n,o):i instanceof Xl?function(c,f,m,_){if(!Rl(c.precondition,f))return m;const w=Lp(c.fieldTransforms,_,f),S=f.data;return S.setAll(Jm(c)),S.setAll(w),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(O=>O.field))}(i,e,n,o):function(c,f,m){return Rl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function Dp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(o,l){return o===void 0&&l===void 0||!(!o||!l)&&Ls(o,l,(c,f)=>Qw(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ah extends Sh{constructor(e,n,o,l=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Xl extends Sh{constructor(e,n,o,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Jm(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Vp(i,e,n){const o=new Map;Ke(i.length===n.length);for(let l=0;l<n.length;l++){const c=i[l],f=c.transform,m=e.data.field(c.field);o.set(c.field,Hw(f,m,n[l]))}return o}function Lp(i,e,n){const o=new Map;for(const l of i){const c=l.transform,f=n.data.field(l.field);o.set(l.field,$w(c,f,e))}return o}class Ww extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n,o,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&Kw(c,e,o[l])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Ho(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Ho(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Qm();return this.mutations.forEach(l=>{const c=e.get(l.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(l.key)?null:m;const _=Xm(f,m);_!==null&&o.set(l.key,_),f.isValidDocument()||f.convertToNoDocument(pe.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Ls(this.mutations,e.mutations,(n,o)=>Dp(n,o))&&Ls(this.baseMutations,e.baseMutations,(n,o)=>Dp(n,o))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Se;function Zm(i){if(i===void 0)return dr("GRPC error has no .code"),Y.UNKNOWN;switch(i){case st.OK:return Y.OK;case st.CANCELLED:return Y.CANCELLED;case st.UNKNOWN:return Y.UNKNOWN;case st.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case st.INTERNAL:return Y.INTERNAL;case st.UNAVAILABLE:return Y.UNAVAILABLE;case st.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case st.NOT_FOUND:return Y.NOT_FOUND;case st.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case st.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case st.ABORTED:return Y.ABORTED;case st.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case st.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case st.DATA_LOSS:return Y.DATA_LOSS;default:return me()}}(Se=st||(st={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=new Ri([4294967295,4294967295],0);function Op(i){const e=Zw().encode(i),n=new Pm;return n.update(e),new Uint8Array(n.digest())}function Mp(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ri([n,o],0),new Ri([l,c],0)]}class Ch{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Bo(`Invalid padding: ${n}`);if(o<0)throw new Bo(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ri.fromNumber(this.Te)}Ee(e,n,o){let l=e.add(n.multiply(Ri.fromNumber(o)));return l.compare(eE)===1&&(l=new Ri([l.getBits(0),l.getBits(1)],0)),l.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Op(e),[o,l]=Mp(n);for(let c=0;c<this.hashCount;c++){const f=this.Ee(o,l,c);if(!this.de(f))return!1}return!0}static create(e,n,o){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Ch(c,l,n);return o.forEach(m=>f.insert(m)),f}insert(e){if(this.Te===0)return;const n=Op(e),[o,l]=Mp(n);for(let c=0;c<this.hashCount;c++){const f=this.Ee(o,l,c);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,o,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const l=new Map;return l.set(e,ea.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Jl(pe.min(),l,new nt(Ce),Kr(),Ne())}}class ea{constructor(e,n,o,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new ea(o,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n,o,l){this.Re=e,this.removedTargetIds=n,this.key=o,this.Ve=l}}class eg{constructor(e,n){this.targetId=e,this.me=n}}class tg{constructor(e,n,o=St.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=l}}class Fp{constructor(){this.fe=0,this.ge=Up(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ne(),n=Ne(),o=Ne();return this.ge.forEach((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:o=o.add(l);break;default:me()}}),new ea(this.pe,this.ye,e,n,o)}Ce(){this.we=!1,this.ge=Up()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tE{constructor(e){this.Le=e,this.Be=new Map,this.ke=Kr(),this.qe=Tl(),this.Qe=Tl(),this.Ke=new nt(Ce)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.De(e.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(e.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(n);break;case 3:this.je(n)&&(o.Ne(),o.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.De(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((o,l)=>{this.je(l)&&n(l)})}Je(e){const n=e.targetId,o=e.me.count,l=this.Ye(n);if(l){const c=l.target;if(nh(c))if(o===0){const f=new fe(c.path);this.We(n,f,Vt.newNoDocument(f,pe.min()))}else Ke(o===1);else{const f=this.Ze(n);if(f!==o){const m=this.Xe(e),_=m?this.et(m,e,f):1;if(_!==0){this.He(n);const w=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,w)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:l=0},hashCount:c=0}=n;let f,m;try{f=Gr(o).toUint8Array()}catch(_){if(_ instanceof Mm)return Vs("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new Ch(f,l,c)}catch(_){return Vs(_ instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return m.Te===0?null:m}et(e,n,o){return n.me.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let l=0;return o.forEach(c=>{const f=this.Le.nt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(n,c,null),l++)}),l}it(e){const n=new Map;this.Be.forEach((c,f)=>{const m=this.Ye(f);if(m){if(c.current&&nh(m.target)){const _=new fe(m.target.path);this.st(_).has(f)||this.ot(f,_)||this.We(f,_,Vt.newNoDocument(_,e))}c.be&&(n.set(f,c.ve()),c.Ce())}});let o=Ne();this.Qe.forEach((c,f)=>{let m=!0;f.forEachWhile(_=>{const w=this.Ye(_);return!w||w.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(o=o.add(c))}),this.ke.forEach((c,f)=>f.setReadTime(e));const l=new Jl(e,n,this.Ke,this.ke,o);return this.ke=Kr(),this.qe=Tl(),this.Qe=Tl(),this.Ke=new nt(Ce),l}Ue(e,n){if(!this.je(e))return;const o=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,o),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const l=this.ze(e);this.ot(e,n)?l.Fe(n,1):l.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),o&&(this.ke=this.ke.insert(n,o))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Fp,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new ft(Ce),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(Ce),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Fp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Tl(){return new nt(fe.comparator)}function Up(){return new nt(fe.comparator)}const nE={asc:"ASCENDING",desc:"DESCENDING"},rE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iE={and:"AND",or:"OR"};class sE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oh(i,e){return i.useProto3Json||Hl(e)?e:{value:e}}function oE(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function xs(i){return Ke(!!i),pe.fromTimestamp(function(n){const o=Hr(n);return new Wt(o.seconds,o.nanos)}(i))}function lE(i,e){return ah(i,e).canonicalString()}function ah(i,e){const n=function(l){return new Ye(["projects",l.projectId,"databases",l.database])}(i).child("documents");return e===void 0?n:n.child(e)}function ng(i){const e=Ye.fromString(i);return Ke(ag(e)),e}function zc(i,e){const n=ng(e);if(n.get(1)!==i.databaseId.projectId)throw new he(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new fe(ig(n))}function rg(i,e){return lE(i.databaseId,e)}function uE(i){const e=ng(i);return e.length===4?Ye.emptyPath():ig(e)}function zp(i){return new Ye(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ig(i){return Ke(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function cE(i,e){let n;if("targetChange"in e){e.targetChange;const o=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=function(w,S){return w.useProto3Json?(Ke(S===void 0||typeof S=="string"),St.fromBase64String(S||"")):(Ke(S===void 0||S instanceof Buffer||S instanceof Uint8Array),St.fromUint8Array(S||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(w){const S=w.code===void 0?Y.UNKNOWN:Zm(w.code);return new he(S,w.message||"")}(f);n=new tg(o,l,c,m||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const l=zc(i,o.document.name),c=xs(o.document.updateTime),f=o.document.createTime?xs(o.document.createTime):pe.min(),m=new bn({mapValue:{fields:o.document.fields}}),_=Vt.newFoundDocument(l,c,f,m),w=o.targetIds||[],S=o.removedTargetIds||[];n=new kl(w,S,_.key,_)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const l=zc(i,o.document),c=o.readTime?xs(o.readTime):pe.min(),f=Vt.newNoDocument(l,c),m=o.removedTargetIds||[];n=new kl([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const l=zc(i,o.document),c=o.removedTargetIds||[];n=new kl([],c,l,null)}else{if(!("filter"in e))return me();{e.filter;const o=e.filter;o.targetId;const{count:l=0,unchangedNames:c}=o,f=new Jw(l,c),m=o.targetId;n=new eg(m,f)}}return n}function hE(i,e){return{documents:[rg(i,e.path)]}}function fE(i,e){const n={structuredQuery:{}},o=e.path;let l;e.collectionGroup!==null?(l=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=rg(i,l);const c=function(w){if(w.length!==0)return og(Gn.create(w,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(w){if(w.length!==0)return w.map(S=>function(z){return{field:ks(z.field),direction:mE(z.dir)}}(S))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=oh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(w){return{before:w.inclusive,values:w.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),{ct:n,parent:l}}function dE(i){let e=uE(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let l=null;if(o>0){Ke(o===1);const S=n.from[0];S.allDescendants?l=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=function(O){const z=sg(O);return z instanceof Gn&&zm(z)?z.getFilters():[z]}(n.where));let f=[];n.orderBy&&(f=function(O){return O.map(z=>function(te){return new Ll(Ps(te.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(te.direction))}(z))}(n.orderBy));let m=null;n.limit&&(m=function(O){let z;return z=typeof O=="object"?O.value:O,Hl(z)?null:z}(n.limit));let _=null;n.startAt&&(_=function(O){const z=!!O.before,$=O.values||[];return new Vl($,z)}(n.startAt));let w=null;return n.endAt&&(w=function(O){const z=!O.before,$=O.values||[];return new Vl($,z)}(n.endAt)),Dw(e,l,f,c,m,"F",_,w)}function pE(i,e){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Ps(n.unaryFilter.field);return ht.create(o,"==",{doubleValue:NaN});case"IS_NULL":const l=Ps(n.unaryFilter.field);return ht.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ps(n.unaryFilter.field);return ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ps(n.unaryFilter.field);return ht.create(f,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(i):i.fieldFilter!==void 0?function(n){return ht.create(Ps(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(o=>sg(o)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return me()}}(n.compositeFilter.op))}(i):me()}function mE(i){return nE[i]}function gE(i){return rE[i]}function yE(i){return iE[i]}function ks(i){return{fieldPath:i.canonicalString()}}function Ps(i){return zt.fromServerFormat(i.fieldPath)}function og(i){return i instanceof ht?function(n){if(n.op==="=="){if(Cp(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NAN"}};if(Ap(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cp(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NAN"}};if(Ap(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(n.field),op:gE(n.op),value:n.value}}}(i):i instanceof Gn?function(n){const o=n.getFilters().map(l=>og(l));return o.length===1?o[0]:{compositeFilter:{op:yE(n.op),filters:o}}}(i):me()}function ag(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,o,l,c=pe.min(),f=pe.min(),m=St.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.ht=e}}function vE(i){const e=dE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.ln=new EE}addToCollectionParentIndex(e,n){return this.ln.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve($r.min())}updateCollectionGroup(e,n,o){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class EE{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),l=this.index[n]||new ft(Ye.comparator),c=!l.has(o);return this.index[n]=l.add(o),c}has(e){const n=e.lastSegment(),o=e.popLast(),l=this.index[n];return l&&l.has(o)}getEntries(e){return(this.index[e]||new ft(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Fs(0)}static Qn(){return new Fs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp([i,e],[n,o]){const l=Ce(i,n);return l===0?Ce(e,o):l}class TE{constructor(e){this.Gn=e,this.buffer=new ft(Bp),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Bp(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IE{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){js(n)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ql(n)}await this.Yn(3e5)})}}class SE{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(n===0)return B.resolve($l.oe);const o=new TE(n);return this.Zn.forEachTarget(e,l=>o.Hn(l.sequenceNumber)).next(()=>this.Zn.er(e,l=>o.Hn(l))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.Zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(jp)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jp):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let o,l,c,f,m,_,w;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),l=this.params.maximumSequenceNumbersToCollect):l=O,f=Date.now(),this.nthSequenceNumber(e,l))).next(O=>(o=O,m=Date.now(),this.removeTargets(e,o,n))).next(O=>(c=O,_=Date.now(),this.removeOrphanedDocuments(e,o))).next(O=>(w=Date.now(),Cs()<=Ae.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${l} in `+(m-f)+`ms
	Removed ${c} targets in `+(_-m)+`ms
	Removed ${O} documents in `+(w-_)+`ms
Total Duration: ${w-S}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:O})))}}function AE(i,e){return new SE(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.changes=new Vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?B.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n,o,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=l}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(o=l,this.remoteDocumentCache.getEntry(e,n))).next(l=>(o!==null&&Ho(o.mutation,l,zr.empty(),Wt.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,Ne()).next(()=>o))}getLocalViewOfDocuments(e,n,o=Ne()){const l=Ai();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,o).next(c=>{let f=jo();return c.forEach((m,_)=>{f=f.insert(m,_.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const o=Ai();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,Ne()))}populateOverlays(e,n,o){const l=[];return o.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(e,l).next(c=>{c.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,o,l){let c=Kr();const f=$o(),m=function(){return $o()}();return n.forEach((_,w)=>{const S=o.get(w.key);l.has(w.key)&&(S===void 0||S.mutation instanceof Xl)?c=c.insert(w.key,w):S!==void 0?(f.set(w.key,S.mutation.getFieldMask()),Ho(S.mutation,w,S.mutation.getFieldMask(),Wt.now())):f.set(w.key,zr.empty())}),this.recalculateAndSaveOverlays(e,c).next(_=>(_.forEach((w,S)=>f.set(w,S)),n.forEach((w,S)=>{var O;return m.set(w,new RE(S,(O=f.get(w))!==null&&O!==void 0?O:null))}),m))}recalculateAndSaveOverlays(e,n){const o=$o();let l=new nt((f,m)=>f-m),c=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(_=>{const w=n.get(_);if(w===null)return;let S=o.get(_)||zr.empty();S=m.applyToLocalView(w,S),o.set(_,S);const O=(l.get(m.batchId)||Ne()).add(_);l=l.insert(m.batchId,O)})}).next(()=>{const f=[],m=l.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),w=_.key,S=_.value,O=Qm();S.forEach(z=>{if(!c.has(z)){const $=Xm(n.get(z),o.get(z));$!==null&&O.set(z,$),c=c.add(z)}}),f.push(this.documentOverlayCache.saveOverlays(e,w,O))}return B.waitFor(f)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,l){return function(f){return fe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Vw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,l):this.getDocumentsMatchingCollectionQuery(e,n,o,l)}getNextDocuments(e,n,o,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,l).next(c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,l-c.size):B.resolve(Ai());let m=-1,_=c;return f.next(w=>B.forEach(w,(S,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),c.get(S)?B.resolve():this.remoteDocumentCache.getEntry(e,S).next(z=>{_=_.insert(S,z)}))).next(()=>this.populateOverlays(e,w,c)).next(()=>this.computeViews(e,_,w,Ne())).next(S=>({batchId:m,changes:Uw(S)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(o=>{let l=jo();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,o,l){const c=n.collectionGroup;let f=jo();return this.indexManager.getCollectionParents(e,c).next(m=>B.forEach(m,_=>{const w=function(O,z){return new Ql(z,null,O.explicitOrderBy.slice(),O.filters.slice(),O.limit,O.limitType,O.startAt,O.endAt)}(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(e,w,o,l).next(S=>{S.forEach((O,z)=>{f=f.insert(O,z)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,o,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,c,l))).next(f=>{c.forEach((_,w)=>{const S=w.getKey();f.get(S)===null&&(f=f.insert(S,Vt.newInvalidDocument(S)))});let m=jo();return f.forEach((_,w)=>{const S=c.get(_);S!==void 0&&Ho(S.mutation,w,zr.empty(),Wt.now()),Wl(n,w)&&(m=m.insert(_,w))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return B.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:xs(l.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(l){return{name:l.name,query:vE(l.bundledQuery),readTime:xs(l.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.overlays=new nt(fe.comparator),this.Er=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Ai();return B.forEach(n,l=>this.getOverlay(e,l).next(c=>{c!==null&&o.set(l,c)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((l,c)=>{this.Tt(e,n,c)}),B.resolve()}removeOverlaysForBatchId(e,n,o){const l=this.Er.get(o);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Er.delete(o)),B.resolve()}getOverlaysForCollection(e,n,o){const l=Ai(),c=n.length+1,f=new fe(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const _=m.getNext().value,w=_.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===c&&_.largestBatchId>o&&l.set(_.getKey(),_)}return B.resolve(l)}getOverlaysForCollectionGroup(e,n,o,l){let c=new nt((w,S)=>w-S);const f=this.overlays.getIterator();for(;f.hasNext();){const w=f.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>o){let S=c.get(w.largestBatchId);S===null&&(S=Ai(),c=c.insert(w.largestBatchId,S)),S.set(w.getKey(),w)}}const m=Ai(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,S)=>m.set(w,S)),!(m.size()>=l)););return B.resolve(m)}Tt(e,n,o){const l=this.overlays.get(o.key);if(l!==null){const f=this.Er.get(l.largestBatchId).delete(o.key);this.Er.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(o.key,new Xw(n,o));let c=this.Er.get(n);c===void 0&&(c=Ne(),this.Er.set(n,c)),this.Er.set(n,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this.dr=new ft(_t.Ar),this.Rr=new ft(_t.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const o=new _t(e,n);this.dr=this.dr.add(o),this.Rr=this.Rr.add(o)}mr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.gr(new _t(e,n))}pr(e,n){e.forEach(o=>this.removeReference(o,n))}yr(e){const n=new fe(new Ye([])),o=new _t(n,e),l=new _t(n,e+1),c=[];return this.Rr.forEachInRange([o,l],f=>{this.gr(f),c.push(f.key)}),c}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new fe(new Ye([])),o=new _t(n,e),l=new _t(n,e+1);let c=Ne();return this.Rr.forEachInRange([o,l],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new _t(e,0),o=this.dr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class _t{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return fe.comparator(e.key,n.key)||Ce(e.br,n.br)}static Vr(e,n){return Ce(e.br,n.br)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new ft(_t.Ar)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,l){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Yw(c,n,o,l);this.mutationQueue.push(f);for(const m of l)this.vr=this.vr.add(new _t(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return B.resolve(f)}lookupMutationBatch(e,n){return B.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,l=this.Fr(o),c=l<0?0:l;return B.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new _t(n,0),l=new _t(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([o,l],f=>{const m=this.Cr(f.br);c.push(m)}),B.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ft(Ce);return n.forEach(l=>{const c=new _t(l,0),f=new _t(l,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,f],m=>{o=o.add(m.br)})}),B.resolve(this.Mr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,l=o.length+1;let c=o;fe.isDocumentKey(c)||(c=c.child(""));const f=new _t(new fe(c),0);let m=new ft(Ce);return this.vr.forEachWhile(_=>{const w=_.key.path;return!!o.isPrefixOf(w)&&(w.length===l&&(m=m.add(_.br)),!0)},f),B.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(o=>{const l=this.Cr(o);l!==null&&n.push(l)}),n}removeMutationBatch(e,n){Ke(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let o=this.vr;return B.forEach(n.mutations,l=>{const c=new _t(l.key,n.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.vr=o})}Ln(e){}containsKey(e,n){const o=new _t(n,0),l=this.vr.firstAfterOrEqual(o);return B.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.Nr=e,this.docs=function(){return new nt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,l=this.docs.get(o),c=l?l.size:0,f=this.Nr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return B.resolve(o?o.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let o=Kr();return n.forEach(l=>{const c=this.docs.get(l);o=o.insert(l,c?c.document.mutableCopy():Vt.newInvalidDocument(l))}),B.resolve(o)}getDocumentsMatchingQuery(e,n,o,l){let c=Kr();const f=n.path,m=new fe(f.child("")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:w,value:{document:S}}=_.getNext();if(!f.isPrefixOf(w.path))break;w.path.length>f.length+1||hw(cw(S),o)<=0||(l.has(S.key)||Wl(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return B.resolve(c)}getAllFromCollectionGroup(e,n,o,l){me()}Lr(e,n){return B.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new LE(this)}getSize(e){return B.resolve(this.size)}}class LE extends CE{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((o,l)=>{l.isValidDocument()?n.push(this.hr.addEntry(e,l)):this.hr.removeEntry(o)}),B.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.persistence=e,this.Br=new Vi(n=>Th(n),Ih),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.kr=0,this.qr=new Rh,this.targetCount=0,this.Qr=Fs.qn()}forEachTarget(e,n){return this.Br.forEach((o,l)=>n(l)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.kr&&(this.kr=n),B.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Fs(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Un(n),B.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,o){let l=0;const c=[];return this.Br.forEach((f,m)=>{m.sequenceNumber<=n&&o.get(m.targetId)===null&&(this.Br.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),l++)}),B.waitFor(c).next(()=>l)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const o=this.Br.get(n)||null;return B.resolve(o)}addMatchingKeys(e,n,o){return this.qr.mr(n,o),B.resolve()}removeMatchingKeys(e,n,o){this.qr.pr(n,o);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(f=>{c.push(l.markPotentiallyOrphaned(e,f))}),B.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const o=this.qr.Sr(n);return B.resolve(o)}containsKey(e,n){return B.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){this.Kr={},this.overlays={},this.$r=new $l(0),this.Ur=!1,this.Ur=!0,this.Wr=new NE,this.referenceDelegate=e(this),this.Gr=new OE(this),this.indexManager=new wE,this.remoteDocumentCache=function(l){return new VE(l)}(o=>this.referenceDelegate.zr(o)),this.serializer=new _E(n),this.jr=new PE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Kr[e.toKey()];return o||(o=new DE(n,this.referenceDelegate),this.Kr[e.toKey()]=o),o}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,o){ee("MemoryPersistence","Starting transaction:",e);const l=new ME(this.$r.next());return this.referenceDelegate.Hr(),o(l).next(c=>this.referenceDelegate.Jr(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Yr(e,n){return B.or(Object.values(this.Kr).map(o=>()=>o.containsKey(e,n)))}}class ME extends dw{constructor(e){super(),this.currentSequenceNumber=e}}class kh{constructor(e){this.persistence=e,this.Zr=new Rh,this.Xr=null}static ei(e){return new kh(e)}get ti(){if(this.Xr)return this.Xr;throw me()}addReference(e,n,o){return this.Zr.addReference(o,n),this.ti.delete(o.toString()),B.resolve()}removeReference(e,n,o){return this.Zr.removeReference(o,n),this.ti.add(o.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),B.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(l=>this.ti.add(l.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(c=>this.ti.add(c.toString()))}).next(()=>o.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.ti,o=>{const l=fe.fromPath(o);return this.ni(e,l).next(c=>{c||n.removeEntry(l,pe.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(o=>{o?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return B.or([()=>B.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Fl{constructor(e,n){this.persistence=e,this.ri=new Vi(o=>mw(o.path),(o,l)=>o.isEqual(l)),this.garbageCollector=AE(this,n)}static ei(e,n){return new Fl(e,n)}Hr(){}Jr(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(o=>n.next(l=>o+l))}nr(e){let n=0;return this.er(e,o=>{n++}).next(()=>n)}er(e,n){return B.forEach(this.ri,(o,l)=>this.ir(e,o,l).next(c=>c?B.resolve():n(l)))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.Lr(e,f=>this.ir(e,f,n).next(m=>{m||(o++,c.removeEntry(f,pe.min()))})).next(()=>c.apply(e)).next(()=>o)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.ri.set(o,e.currentSequenceNumber),B.resolve()}removeReference(e,n,o){return this.ri.set(o,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),B.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cl(e.data.value)),n}ir(e,n,o){return B.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.ri.get(n);return B.resolve(l!==void 0&&l>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,o,l){this.targetId=e,this.fromCache=n,this.Wi=o,this.Gi=l}static zi(e,n){let o=Ne(),l=Ne();for(const c of n.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Ph(e,n.fromCache,o,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return F_()?8:pw(L_())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,o,l){const c={result:null};return this.Xi(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.es(e,n,l,o).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new FE;return this.ts(e,n,f).next(m=>{if(c.result=m,this.Hi)return this.ns(e,n,f,m.size)})}).next(()=>c.result)}ns(e,n,o,l){return o.documentReadCount<this.Ji?(Cs()<=Ae.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),B.resolve()):(Cs()<=Ae.DEBUG&&ee("QueryEngine","Query:",Rs(n),"scans",o.documentReadCount,"local documents and returns",l,"documents as results."),o.documentReadCount>this.Yi*l?(Cs()<=Ae.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):B.resolve())}Xi(e,n){if(xp(n))return B.resolve(null);let o=$n(n);return this.indexManager.getIndexType(e,o).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=rh(n,null,"F"),o=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const f=Ne(...c);return this.Zi.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,o).next(_=>{const w=this.rs(n,m);return this.ss(n,w,f,_.readTime)?this.Xi(e,rh(n,null,"F")):this.os(e,w,n,_)}))})))}es(e,n,o,l){return xp(n)||l.isEqual(pe.min())?B.resolve(null):this.Zi.getDocuments(e,o).next(c=>{const f=this.rs(n,c);return this.ss(n,f,o,l)?B.resolve(null):(Cs()<=Ae.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Rs(n)),this.os(e,f,n,uw(l,-1)).next(m=>m))})}rs(e,n){let o=new ft(Hm(e));return n.forEach((l,c)=>{Wl(e,c)&&(o=o.add(c))}),o}ss(e,n,o,l){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}ts(e,n,o){return Cs()<=Ae.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Rs(n)),this.Zi.getDocumentsMatchingQuery(e,n,$r.min(),o)}os(e,n,o,l){return this.Zi.getDocumentsMatchingQuery(e,o,l).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n,o,l){this.persistence=e,this._s=n,this.serializer=l,this.us=new nt(Ce),this.cs=new Vi(c=>Th(c),Ih),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(o)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kE(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function jE(i,e,n,o){return new zE(i,e,n,o)}async function ug(i,e){const n=Re(i);return await n.persistence.runTransaction("Handle user change","readonly",o=>{let l;return n.mutationQueue.getAllMutationBatches(o).next(c=>(l=c,n.Ps(e),n.mutationQueue.getAllMutationBatches(o))).next(c=>{const f=[],m=[];let _=Ne();for(const w of l){f.push(w.batchId);for(const S of w.mutations)_=_.add(S.key)}for(const w of c){m.push(w.batchId);for(const S of w.mutations)_=_.add(S.key)}return n.localDocuments.getDocuments(o,_).next(w=>({Ts:w,removedBatchIds:f,addedBatchIds:m}))})})}function cg(i){const e=Re(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function BE(i,e){const n=Re(i),o=e.snapshotVersion;let l=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.hs.newChangeBuffer({trackRemovals:!0});l=n.us;const m=[];e.targetChanges.forEach((S,O)=>{const z=l.get(O);if(!z)return;m.push(n.Gr.removeMatchingKeys(c,S.removedDocuments,O).next(()=>n.Gr.addMatchingKeys(c,S.addedDocuments,O)));let $=z.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(O)!==null?$=$.withResumeToken(St.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):S.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(S.resumeToken,o)),l=l.insert(O,$),function(Z,Q,Ve){return Z.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8?!0:Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0}(z,$,S)&&m.push(n.Gr.updateTargetData(c,$))});let _=Kr(),w=Ne();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))}),m.push(bE(c,f,e.documentUpdates).next(S=>{_=S.Is,w=S.Es})),!o.isEqual(pe.min())){const S=n.Gr.getLastRemoteSnapshotVersion(c).next(O=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,o));m.push(S)}return B.waitFor(m).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,_,w)).next(()=>_)}).then(c=>(n.us=l,c))}function bE(i,e,n){let o=Ne(),l=Ne();return n.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let f=Kr();return n.forEach((m,_)=>{const w=c.get(m);_.isFoundDocument()!==w.isFoundDocument()&&(l=l.add(m)),_.isNoDocument()&&_.version.isEqual(pe.min())?(e.removeEntry(m,_.readTime),f=f.insert(m,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||_.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(_),f=f.insert(m,_)):ee("LocalStore","Ignoring outdated watch update for ",m,". Current version:",w.version," Watch version:",_.version)}),{Is:f,Es:l}})}function qE(i,e){const n=Re(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let l;return n.Gr.getTargetData(o,e).next(c=>c?(l=c,B.resolve(l)):n.Gr.allocateTargetId(o).next(f=>(l=new jr(e,f,"TargetPurposeListen",o.currentSequenceNumber),n.Gr.addTargetData(o,l).next(()=>l))))}).then(o=>{const l=n.us.get(o.targetId);return(l===null||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.us=n.us.insert(o.targetId,o),n.cs.set(e,o.targetId)),o})}async function lh(i,e,n){const o=Re(i),l=o.us.get(e),c=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",c,f=>o.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!js(f))throw f;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}o.us=o.us.remove(e),o.cs.delete(l.target)}function bp(i,e,n){const o=Re(i);let l=pe.min(),c=Ne();return o.persistence.runTransaction("Execute query","readwrite",f=>function(_,w,S){const O=Re(_),z=O.cs.get(S);return z!==void 0?B.resolve(O.us.get(z)):O.Gr.getTargetData(w,S)}(o,f,$n(e)).next(m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,o.Gr.getMatchingKeysForTargetId(f,m.targetId).next(_=>{c=_})}).next(()=>o._s.getDocumentsMatchingQuery(f,e,n?l:pe.min(),n?c:Ne())).next(m=>($E(o,Ow(e),m),{documents:m,ds:c})))}function $E(i,e,n){let o=i.ls.get(e)||pe.min();n.forEach((l,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.ls.set(e,o)}class qp{constructor(){this.activeTargetIds=Bw()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HE{constructor(){this._o=new qp,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,o){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new qp,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il=null;function jc(){return Il===null?Il=function(){return 268435456+Math.round(2147483648*Math.random())}():Il++,"0x"+Il.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class WE extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",l=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=o+"://"+n.host,this.Mo=`projects/${l}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${l}`:`project_id=${l}&database_id=${c}`}Oo(n,o,l,c,f){const m=jc(),_=this.No(n,o.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${m}:`,_,l);const w={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(w,c,f),this.Bo(n,_,w,l).then(S=>(ee("RestConnection",`Received RPC '${n}' ${m}: `,S),S),S=>{throw Vs("RestConnection",`RPC '${n}' ${m} failed with error: `,S,"url: ",_,"request:",l),S})}ko(n,o,l,c,f,m){return this.Oo(n,o,l,c,f)}Lo(n,o,l){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,f)=>n[f]=c),l&&l.headers.forEach((c,f)=>n[f]=c)}No(n,o){const l=QE[n];return`${this.Fo}/v1/${o}:${l}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,o,l){const c=jc();return new Promise((f,m)=>{const _=new xm;_.setWithCredentials(!0),_.listenOnce(Nm.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Al.NO_ERROR:const S=_.getResponseJson();ee(Nt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(S)),f(S);break;case Al.TIMEOUT:ee(Nt,`RPC '${e}' ${c} timed out`),m(new he(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Al.HTTP_ERROR:const O=_.getStatus();if(ee(Nt,`RPC '${e}' ${c} failed with status:`,O,"response text:",_.getResponseText()),O>0){let z=_.getResponseJson();Array.isArray(z)&&(z=z[0]);const $=z==null?void 0:z.error;if($&&$.status&&$.message){const te=function(Q){const Ve=Q.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(Ve)>=0?Ve:Y.UNKNOWN}($.status);m(new he(te,$.message))}else m(new he(Y.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new he(Y.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{ee(Nt,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(l);ee(Nt,`RPC '${e}' ${c} sending request:`,l),_.send(n,"POST",w,o,15)})}qo(e,n,o){const l=jc(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Lm(),m=Vm(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(_.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Lo(_.initMessageHeaders,n,o),_.encodeInitMessageHeaders=!0;const S=c.join("");ee(Nt,`Creating RPC '${e}' stream ${l}: ${S}`,_);const O=f.createWebChannel(S,_);let z=!1,$=!1;const te=new KE({Eo:Q=>{$?ee(Nt,`Not sending because RPC '${e}' stream ${l} is closed:`,Q):(z||(ee(Nt,`Opening RPC '${e}' stream ${l} transport.`),O.open(),z=!0),ee(Nt,`RPC '${e}' stream ${l} sending:`,Q),O.send(Q))},Ao:()=>O.close()}),Z=(Q,Ve,ke)=>{Q.listen(Ve,ve=>{try{ke(ve)}catch(we){setTimeout(()=>{throw we},0)}})};return Z(O,zo.EventType.OPEN,()=>{$||(ee(Nt,`RPC '${e}' stream ${l} transport opened.`),te.So())}),Z(O,zo.EventType.CLOSE,()=>{$||($=!0,ee(Nt,`RPC '${e}' stream ${l} transport closed`),te.Do())}),Z(O,zo.EventType.ERROR,Q=>{$||($=!0,Vs(Nt,`RPC '${e}' stream ${l} transport errored:`,Q),te.Do(new he(Y.UNAVAILABLE,"The operation could not be completed")))}),Z(O,zo.EventType.MESSAGE,Q=>{var Ve;if(!$){const ke=Q.data[0];Ke(!!ke);const ve=ke,we=(ve==null?void 0:ve.error)||((Ve=ve[0])===null||Ve===void 0?void 0:Ve.error);if(we){ee(Nt,`RPC '${e}' stream ${l} received error:`,we);const Xe=we.status;let Pe=function(A){const k=st[A];if(k!==void 0)return Zm(k)}(Xe),P=we.message;Pe===void 0&&(Pe=Y.INTERNAL,P="Unknown error status: "+Xe+" with message "+we.message),$=!0,te.Do(new he(Pe,P)),O.close()}else ee(Nt,`RPC '${e}' stream ${l} received:`,ke),te.vo(ke)}}),Z(m,Dm.STAT_EVENT,Q=>{Q.stat===Xc.PROXY?ee(Nt,`RPC '${e}' stream ${l} detected buffering proxy`):Q.stat===Xc.NOPROXY&&ee(Nt,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{te.bo()},0),te}}function Bc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(i){return new sE(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,o=1e3,l=1.5,c=6e4){this.li=e,this.timerId=n,this.Qo=o,this.Ko=l,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),o=Math.max(0,Date.now()-this.Go),l=Math.max(0,n-o);l>0&&ee("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,l,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,o,l,c,f,m,_){this.li=e,this.Yo=o,this.Zo=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new fg(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,l])=>{this.Xo===n&&this.I_(o,l)},o=>{e(()=>{const l=new he(Y.UNKNOWN,"Fetching auth token failed: "+o.message);return this.E_(l)})})}I_(e,n){const o=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{o(()=>this.listener.Ro())}),this.stream.mo(()=>{o(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(l=>{o(()=>this.E_(l))}),this.stream.onMessage(l=>{o(()=>++this.n_==1?this.A_(l):this.onNext(l))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XE extends YE{constructor(e,n,o,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,l,f),this.serializer=c}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=cE(this.serializer,e),o=function(c){if(!("targetChange"in c))return pe.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?pe.min():f.readTime?xs(f.readTime):pe.min()}(e);return this.listener.R_(n,o)}V_(e){const n={};n.database=zp(this.serializer),n.addTarget=function(c,f){let m;const _=f.target;if(m=nh(_)?{documents:hE(c,_)}:{query:fE(c,_).ct},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=aE(c,f.resumeToken);const w=oh(c,f.expectedCount);w!==null&&(m.expectedCount=w)}else if(f.snapshotVersion.compareTo(pe.min())>0){m.readTime=oE(c,f.snapshotVersion.toTimestamp());const w=oh(c,f.expectedCount);w!==null&&(m.expectedCount=w)}return m}(this.serializer,e);const o=pE(this.serializer,e);o&&(n.labels=o),this.c_(n)}m_(e){const n={};n.database=zp(this.serializer),n.removeTarget=e,this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends class{}{constructor(e,n,o,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=l,this.S_=!1}b_(){if(this.S_)throw new he(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Oo(e,ah(n,o),l,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(Y.UNKNOWN,c.toString())})}ko(e,n,o,l,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.ko(e,ah(n,o),l,f,m,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(Y.UNKNOWN,f.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class ZE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(dr(n),this.C_=!1):ee("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,o,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(f=>{o.enqueueAndForget(async()=>{na(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(_){const w=Re(_);w.k_.add(4),await ta(w),w.K_.set("Unknown"),w.k_.delete(4),await Zl(w)}(this))})}),this.K_=new ZE(o,l)}}async function Zl(i){if(na(i))for(const e of i.q_)await e(!0)}async function ta(i){for(const e of i.q_)await e(!1)}function dg(i,e){const n=Re(i);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Vh(n)?Dh(n):Bs(n).s_()&&Nh(n,e))}function xh(i,e){const n=Re(i),o=Bs(n);n.B_.delete(e),o.s_()&&pg(n,e),n.B_.size===0&&(o.s_()?o.a_():na(n)&&n.K_.set("Unknown"))}function Nh(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bs(i).V_(e)}function pg(i,e){i.U_.xe(e),Bs(i).m_(e)}function Dh(i){i.U_=new tE({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Bs(i).start(),i.K_.F_()}function Vh(i){return na(i)&&!Bs(i).i_()&&i.B_.size>0}function na(i){return Re(i).k_.size===0}function mg(i){i.U_=void 0}async function tT(i){i.K_.set("Online")}async function nT(i){i.B_.forEach((e,n)=>{Nh(i,e)})}async function rT(i,e){mg(i),Vh(i)?(i.K_.O_(e),Dh(i)):i.K_.set("Unknown")}async function iT(i,e,n){if(i.K_.set("Online"),e instanceof tg&&e.state===2&&e.cause)try{await async function(l,c){const f=c.cause;for(const m of c.targetIds)l.B_.has(m)&&(await l.remoteSyncer.rejectListen(m,f),l.B_.delete(m),l.U_.removeTarget(m))}(i,e)}catch(o){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Hp(i,o)}else if(e instanceof kl?i.U_.$e(e):e instanceof eg?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(pe.min()))try{const o=await cg(i.localStore);n.compareTo(o)>=0&&await function(c,f){const m=c.U_.it(f);return m.targetChanges.forEach((_,w)=>{if(_.resumeToken.approximateByteSize()>0){const S=c.B_.get(w);S&&c.B_.set(w,S.withResumeToken(_.resumeToken,f))}}),m.targetMismatches.forEach((_,w)=>{const S=c.B_.get(_);if(!S)return;c.B_.set(_,S.withResumeToken(St.EMPTY_BYTE_STRING,S.snapshotVersion)),pg(c,_);const O=new jr(S.target,_,w,S.sequenceNumber);Nh(c,O)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(o){ee("RemoteStore","Failed to raise snapshot:",o),await Hp(i,o)}}async function Hp(i,e,n){if(!js(e))throw e;i.k_.add(1),await ta(i),i.K_.set("Offline"),n||(n=()=>cg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await Zl(i)})}async function Gp(i,e){const n=Re(i);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const o=na(n);n.k_.add(3),await ta(n),o&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Zl(n)}async function sT(i,e){const n=Re(i);e?(n.k_.delete(2),await Zl(n)):e||(n.k_.add(2),await ta(n),n.K_.set("Unknown"))}function Bs(i){return i.W_||(i.W_=function(n,o,l){const c=Re(n);return c.b_(),new XE(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(i.datastore,i.asyncQueue,{Ro:tT.bind(null,i),mo:nT.bind(null,i),po:rT.bind(null,i),R_:iT.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Vh(i)?Dh(i):i.K_.set("Unknown")):(await i.W_.stop(),mg(i))})),i.W_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,o,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=l,this.removalCallback=c,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,l,c){const f=Date.now()+o,m=new Lh(e,n,f,l,c);return m.start(o),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(i,e){if(dr("AsyncQueue",`${e}: ${i}`),js(i))return new he(Y.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{static emptySet(e){return new Ns(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||fe.comparator(n.key,o.key):(n,o)=>fe.comparator(n.key,o.key),this.keyedMap=jo(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=o.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Ns;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.z_=new nt(fe.comparator)}track(e){const n=e.doc.key,o=this.z_.get(n);o?e.type!==0&&o.type===3?this.z_=this.z_.insert(n,e):e.type===3&&o.type!==1?this.z_=this.z_.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.z_=this.z_.remove(n):e.type===1&&o.type===2?this.z_=this.z_.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):me():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Us{constructor(e,n,o,l,c,f,m,_,w){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,n,o,l,c){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new Us(e,n,Ns.emptySet(n),f,o,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==o[l].type||!n[l].doc.isEqual(o[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class aT{constructor(){this.queries=Kp(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,o){const l=Re(n),c=l.queries;l.queries=Kp(),c.forEach((f,m)=>{for(const _ of m.J_)_.onError(o)})})(this,new he(Y.ABORTED,"Firestore shutting down"))}}function Kp(){return new Vi(i=>$m(i),Kl)}async function lT(i,e){const n=Re(i);let o=3;const l=e.query;let c=n.queries.get(l);c?!c.Y_()&&e.Z_()&&(o=2):(c=new oT,o=e.Z_()?0:1);try{switch(o){case 0:c.H_=await n.onListen(l,!0);break;case 1:c.H_=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const m=gg(f,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(m)}n.queries.set(l,c),c.J_.push(e),e.ea(n.onlineState),c.H_&&e.ta(c.H_)&&Oh(n)}async function uT(i,e){const n=Re(i),o=e.query;let l=3;const c=n.queries.get(o);if(c){const f=c.J_.indexOf(e);f>=0&&(c.J_.splice(f,1),c.J_.length===0?l=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(l=2))}switch(l){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function cT(i,e){const n=Re(i);let o=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const m of f.J_)m.ta(l)&&(o=!0);f.H_=l}}o&&Oh(n)}function hT(i,e,n){const o=Re(i),l=o.queries.get(e);if(l)for(const c of l.J_)c.onError(n);o.queries.delete(e)}function Oh(i){i.X_.forEach(e=>{e.next()})}var uh,Wp;(Wp=uh||(uh={})).na="default",Wp.Cache="cache";class fT{constructor(e,n,o){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=o||{}}ta(e){if(!this.options.includeMetadataChanges){const o=[];for(const l of e.docChanges)l.type!==3&&o.push(l);e=new Us(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const o=n!=="Offline";return(!this.options.ua||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Us.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==uh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.key=e}}class _g{constructor(e){this.key=e}}class dT{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ne(),this.mutatedKeys=Ne(),this.Va=Hm(e),this.ma=new Ns(this.Va)}get fa(){return this.da}ga(e,n){const o=n?n.pa:new Qp,l=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,m=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,w=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((S,O)=>{const z=l.get(S),$=Wl(this.query,O)?O:null,te=!!z&&this.mutatedKeys.has(z.key),Z=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let Q=!1;z&&$?z.data.isEqual($.data)?te!==Z&&(o.track({type:3,doc:$}),Q=!0):this.ya(z,$)||(o.track({type:2,doc:$}),Q=!0,(_&&this.Va($,_)>0||w&&this.Va($,w)<0)&&(m=!0)):!z&&$?(o.track({type:0,doc:$}),Q=!0):z&&!$&&(o.track({type:1,doc:z}),Q=!0,(_||w)&&(m=!0)),Q&&($?(f=f.add($),c=Z?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),o.track({type:1,doc:S})}return{ma:f,pa:o,ss:m,mutatedKeys:c}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,l){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const f=e.pa.j_();f.sort((S,O)=>function($,te){const Z=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return Z($)-Z(te)}(S.type,O.type)||this.Va(S.doc,O.doc)),this.wa(o),l=l!=null&&l;const m=n&&!l?this.Sa():[],_=this.Ra.size===0&&this.current&&!l?1:0,w=_!==this.Aa;return this.Aa=_,f.length!==0||w?{snapshot:new Us(this.query,e.ma,c,f,e.mutatedKeys,_===0,w,!1,!!o&&o.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Qp,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ne(),this.ma.forEach(o=>{this.Da(o.key)&&(this.Ra=this.Ra.add(o.key))});const n=[];return e.forEach(o=>{this.Ra.has(o)||n.push(new _g(o))}),this.Ra.forEach(o=>{e.has(o)||n.push(new yg(o))}),n}va(e){this.da=e.ds,this.Ra=Ne();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Us.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class pT{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class mT{constructor(e){this.key=e,this.Fa=!1}}class gT{constructor(e,n,o,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Ma={},this.xa=new Vi(m=>$m(m),Kl),this.Oa=new Map,this.Na=new Set,this.La=new nt(fe.comparator),this.Ba=new Map,this.ka=new Rh,this.qa={},this.Qa=new Map,this.Ka=Fs.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function yT(i,e,n=!0){const o=Ig(i);let l;const c=o.xa.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.Ca()):l=await vg(o,e,n,!0),l}async function _T(i,e){const n=Ig(i);await vg(n,e,!0,!1)}async function vg(i,e,n,o){const l=await qE(i.localStore,$n(e)),c=l.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let m;return o&&(m=await vT(i,e,c,f==="current",l.resumeToken)),i.isPrimaryClient&&n&&dg(i.remoteStore,l),m}async function vT(i,e,n,o,l){i.Ua=(O,z,$)=>async function(Z,Q,Ve,ke){let ve=Q.view.ga(Ve);ve.ss&&(ve=await bp(Z.localStore,Q.query,!1).then(({documents:P})=>Q.view.ga(P,ve)));const we=ke&&ke.targetChanges.get(Q.targetId),Xe=ke&&ke.targetMismatches.get(Q.targetId)!=null,Pe=Q.view.applyChanges(ve,Z.isPrimaryClient,we,Xe);return Xp(Z,Q.targetId,Pe.ba),Pe.snapshot}(i,O,z,$);const c=await bp(i.localStore,e,!0),f=new dT(e,c.ds),m=f.ga(c.documents),_=ea.createSynthesizedTargetChangeForCurrentChange(n,o&&i.onlineState!=="Offline",l),w=f.applyChanges(m,i.isPrimaryClient,_);Xp(i,n,w.ba);const S=new pT(e,n,f);return i.xa.set(e,S),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),w.snapshot}async function wT(i,e,n){const o=Re(i),l=o.xa.get(e),c=o.Oa.get(l.targetId);if(c.length>1)return o.Oa.set(l.targetId,c.filter(f=>!Kl(f,e))),void o.xa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(l.targetId),o.sharedClientState.isActiveQueryTarget(l.targetId)||await lh(o.localStore,l.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(l.targetId),n&&xh(o.remoteStore,l.targetId),ch(o,l.targetId)}).catch(ql)):(ch(o,l.targetId),await lh(o.localStore,l.targetId,!0))}async function ET(i,e){const n=Re(i),o=n.xa.get(e),l=n.Oa.get(o.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),xh(n.remoteStore,o.targetId))}async function wg(i,e){const n=Re(i);try{const o=await BE(n.localStore,e);e.targetChanges.forEach((l,c)=>{const f=n.Ba.get(c);f&&(Ke(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?f.Fa=!0:l.modifiedDocuments.size>0?Ke(f.Fa):l.removedDocuments.size>0&&(Ke(f.Fa),f.Fa=!1))}),await Tg(n,o,e)}catch(o){await ql(o)}}function Yp(i,e,n){const o=Re(i);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const l=[];o.xa.forEach((c,f)=>{const m=f.view.ea(e);m.snapshot&&l.push(m.snapshot)}),function(f,m){const _=Re(f);_.onlineState=m;let w=!1;_.queries.forEach((S,O)=>{for(const z of O.J_)z.ea(m)&&(w=!0)}),w&&Oh(_)}(o.eventManager,e),l.length&&o.Ma.R_(l),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function TT(i,e,n){const o=Re(i);o.sharedClientState.updateQueryState(e,"rejected",n);const l=o.Ba.get(e),c=l&&l.key;if(c){let f=new nt(fe.comparator);f=f.insert(c,Vt.newNoDocument(c,pe.min()));const m=Ne().add(c),_=new Jl(pe.min(),new Map,new nt(Ce),f,m);await wg(o,_),o.La=o.La.remove(c),o.Ba.delete(e),Mh(o)}else await lh(o.localStore,e,!1).then(()=>ch(o,e,n)).catch(ql)}function ch(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Oa.get(e))i.xa.delete(o),n&&i.Ma.Wa(o,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(o=>{i.ka.containsKey(o)||Eg(i,o)})}function Eg(i,e){i.Na.delete(e.path.canonicalString());const n=i.La.get(e);n!==null&&(xh(i.remoteStore,n),i.La=i.La.remove(e),i.Ba.delete(n),Mh(i))}function Xp(i,e,n){for(const o of n)o instanceof yg?(i.ka.addReference(o.key,e),IT(i,o)):o instanceof _g?(ee("SyncEngine","Document no longer in limbo: "+o.key),i.ka.removeReference(o.key,e),i.ka.containsKey(o.key)||Eg(i,o.key)):me()}function IT(i,e){const n=e.key,o=n.path.canonicalString();i.La.get(n)||i.Na.has(o)||(ee("SyncEngine","New document in limbo: "+n),i.Na.add(o),Mh(i))}function Mh(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new fe(Ye.fromString(e)),o=i.Ka.next();i.Ba.set(o,new mT(n)),i.La=i.La.insert(n,o),dg(i.remoteStore,new jr($n(qm(n.path)),o,"TargetPurposeLimboResolution",$l.oe))}}async function Tg(i,e,n){const o=Re(i),l=[],c=[],f=[];o.xa.isEmpty()||(o.xa.forEach((m,_)=>{f.push(o.Ua(_,e,n).then(w=>{var S;if((w||n)&&o.isPrimaryClient){const O=w?!w.fromCache:(S=n==null?void 0:n.targetChanges.get(_.targetId))===null||S===void 0?void 0:S.current;o.sharedClientState.updateQueryState(_.targetId,O?"current":"not-current")}if(w){l.push(w);const O=Ph.zi(_.targetId,w);c.push(O)}}))}),await Promise.all(f),o.Ma.R_(l),await async function(_,w){const S=Re(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>B.forEach(w,z=>B.forEach(z.Wi,$=>S.persistence.referenceDelegate.addReference(O,z.targetId,$)).next(()=>B.forEach(z.Gi,$=>S.persistence.referenceDelegate.removeReference(O,z.targetId,$)))))}catch(O){if(!js(O))throw O;ee("LocalStore","Failed to update sequence numbers: "+O)}for(const O of w){const z=O.targetId;if(!O.fromCache){const $=S.us.get(z),te=$.snapshotVersion,Z=$.withLastLimboFreeSnapshotVersion(te);S.us=S.us.insert(z,Z)}}}(o.localStore,c))}async function ST(i,e){const n=Re(i);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const o=await ug(n.localStore,e);n.currentUser=e,function(c,f){c.Qa.forEach(m=>{m.forEach(_=>{_.reject(new he(Y.CANCELLED,f))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Tg(n,o.Ts)}}function AT(i,e){const n=Re(i),o=n.Ba.get(e);if(o&&o.Fa)return Ne().add(o.key);{let l=Ne();const c=n.Oa.get(e);if(!c)return l;for(const f of c){const m=n.xa.get(f);l=l.unionWith(m.view.fa)}return l}}function Ig(i){const e=Re(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=wg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TT.bind(null,e),e.Ma.R_=cT.bind(null,e.eventManager),e.Ma.Wa=hT.bind(null,e.eventManager),e}class Ul{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hg(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return jE(this.persistence,new UE,e.initialUser,this.serializer)}ja(e){return new lg(kh.ei,this.serializer)}za(e){return new HE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ul.provider={build:()=>new Ul};class CT extends Ul{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ke(this.persistence.referenceDelegate instanceof Fl);const o=this.persistence.referenceDelegate.garbageCollector;return new IE(o,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new lg(o=>Fl.ei(o,n),this.serializer)}}class hh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Yp(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=ST.bind(null,this.syncEngine),await sT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aT}()}createDatastore(e){const n=hg(e.databaseInfo.databaseId),o=function(c){return new WE(c)}(e.databaseInfo);return function(c,f,m,_){return new JE(c,f,m,_)}(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return function(o,l,c,f,m){return new eT(o,l,c,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Yp(this.syncEngine,n,0),function(){return $p.p()?new $p:new GE}())}createSyncEngine(e,n){return function(l,c,f,m,_,w,S){const O=new gT(l,c,f,m,_,w);return S&&(O.$a=!0),O}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(l){const c=Re(l);ee("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await ta(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hh.provider={build:()=>new hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,o,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=l,this.user=Dt.UNAUTHENTICATED,this.clientId=aw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,async f=>{ee("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(o,f=>(ee("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=gg(n,"Failed to shutdown persistence");e.reject(o)}}),e.promise}}async function bc(i,e){i.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(async l=>{o.isEqual(l)||(await ug(e.localStore,l),o=l)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Jp(i,e){i.asyncQueue.verifyOperationInProgress();const n=await PT(i);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(o=>Gp(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,l)=>Gp(e.remoteStore,l)),i._onlineComponents=e}async function PT(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await bc(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),await bc(i,new Ul)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await bc(i,new CT(void 0));return i._offlineComponents}async function xT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Jp(i,i._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Jp(i,new hh))),i._onlineComponents}async function NT(i){const e=await xT(i),n=e.eventManager;return n.onListen=yT.bind(null,e.syncEngine),n.onUnlisten=wT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_T.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ET.bind(null,e.syncEngine),n}function DT(i,e,n={}){const o=new ki;return i.asyncQueue.enqueueAndForget(async()=>function(c,f,m,_,w){const S=new RT({next:z=>{S.eu(),f.enqueueAndForget(()=>uT(c,O)),z.fromCache&&_.source==="server"?w.reject(new he(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(z)},error:z=>w.reject(z)}),O=new fT(m,S,{includeMetadataChanges:!0,ua:!0});return lT(c,O)}(await NT(i),i.asyncQueue,e,n,o)),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=new Map;function VT(i,e,n,o){if(e===!0&&o===!0)throw new he(Y.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function em(i){if(fe.isDocumentKey(i))throw new he(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function LT(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(o){return o.constructor?o.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":me()}function fh(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=LT(i);throw new he(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){var n,o;if(e.host===void 0){if(e.ssl!==void 0)throw new he(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sg((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(o,l){return o.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,o,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tm(e),e.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new Zv;switch(o.type){case"firstParty":return new rw(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new he(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Zp.get(n);o&&(ee("ComponentProvider","Removing Datastore"),Zp.delete(n),o.terminate())}(this),Promise.resolve()}}function OT(i,e,n,o={}){var l;const c=(i=fh(i,Fh))._getSettings(),f=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==f&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),o.mockUserToken){let m,_;if(typeof o.mockUserToken=="string")m=o.mockUserToken,_=Dt.MOCK_USER;else{m=V_(o.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);const w=o.mockUserToken.sub||o.mockUserToken.user_id;if(!w)throw new he(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Dt(w)}i._authCredentials=new ew(new Om(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new eu(this.firestore,e,this._query)}}class bs{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bs(this.firestore,e,this._key)}}class Ds extends eu{constructor(e,n,o){super(e,n,qm(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bs(this.firestore,null,new fe(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function MT(i,e,...n){if(i=gh(i),i instanceof Fh){const o=Ye.fromString(e,...n);return em(o),new Ds(i,null,o)}{if(!(i instanceof bs||i instanceof Ds))throw new he(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ye.fromString(e,...n));return em(o),new Ds(i.firestore,null,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new fg(this,"async_queue_retry"),this.fu=()=>{const o=Bc();o&&ee("AsyncQueue","Visibility state changed to "+o.visibilityState),this.r_.Jo()},this.gu=e;const n=Bc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Bc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new ki;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!js(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(o=>{this.Au=o,this.Ru=!1;const l=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(o);throw dr("INTERNAL UNHANDLED ERROR: ",l),o}).then(o=>(this.Ru=!1,o))));return this.gu=n,n}enqueueAfterDelay(e,n,o){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const l=Lh.createAndSchedule(this,e,n,o,c=>this.Su(c));return this.du.push(l),l}pu(){this.Au&&me()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Ag extends Fh{constructor(e,n,o,l){super(e,n,o,l),this.type="firestore",this._queue=new nm,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nm(e),this._firestoreClient=void 0,await e}}}function FT(i,e){const n=typeof i=="object"?i:Cm(),o=typeof i=="string"?i:"(default)",l=Jo(n,"firestore").getImmediate({identifier:o});if(!l._initialized){const c=N_("firestore");c&&OT(l,...c)}return l}function UT(i){if(i._terminated)throw new he(Y.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||zT(i),i._firestoreClient}function zT(i){var e,n,o;const l=i._freezeSettings(),c=function(m,_,w,S){return new vw(m,_,w,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,Sg(S.experimentalLongPollingOptions),S.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,l);i._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((o=l.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(i._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),i._firestoreClient=new kT(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const _=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(_),_online:_}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zl(St.fromBase64String(e))}catch(n){throw new he(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zl(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(o,l){if(o.length!==l.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==l[c])return!1;return!0}(this._values,e._values)}}const bT=new RegExp("[~\\*/\\[\\]]");function qT(i,e,n){if(e.search(bT)>=0)throw rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i);try{return new Cg(...e.split("."))._internalPath}catch{throw rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i)}}function rm(i,e,n,o,l){let c=`Function ${e}() called with invalid data`;c+=". ";let f="";return new he(Y.INVALID_ARGUMENT,c+i+f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n,o,l,c){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new bs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $T(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $T extends Rg{data(){return super.data()}}function kg(i,e){return typeof e=="string"?qT(i,e):e instanceof Cg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GT{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Zo(e,(l,c)=>{o[l]=this.convertValue(c,n)}),o}convertVectorValue(e){var n,o,l;const c=(l=(o=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||o===void 0?void 0:o.values)===null||l===void 0?void 0:l.map(f=>tt(f.doubleValue));return new BT(c)}convertGeoPoint(e){return new jT(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Gl(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Wo(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Ye.fromString(e);Ke(ag(o));const l=new Yo(o.get(1),o.get(3)),c=new fe(o.popFirst(5));return l.isEqual(n)||dr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class QT extends Rg{constructor(e,n,o,l,c,f){super(e,n,o,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(kg("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Pl extends QT{data(e={}){return super.data(e)}}class KT{constructor(e,n,o,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Sl(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Pl(this._firestore,this._userDataWriter,o.key,o,new Sl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map(m=>{const _=new Pl(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Sl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:_,oldIndex:-1,newIndex:f++}})}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const _=new Pl(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Sl(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let w=-1,S=-1;return m.type!==0&&(w=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),S=f.indexOf(m.doc.key)),{type:WT(m.type),doc:_,oldIndex:w,newIndex:S}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function WT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}class YT extends GT{constructor(e){super(),this.firestore=e}convertBytes(e){return new zl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bs(this.firestore,null,n)}}function XT(i){i=fh(i,eu);const e=fh(i.firestore,Ag),n=UT(e),o=new YT(e);return HT(i._query),DT(n,i._query).then(l=>new KT(e,o,i,l))}(function(e,n=!0){(function(l){zs=l})(qv),qr(new hr("firestore",(o,{instanceIdentifier:l,options:c})=>{const f=o.getProvider("app").getImmediate(),m=new Ag(new tw(o.getProvider("auth-internal")),new sw(o.getProvider("app-check-internal")),function(w,S){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new he(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(w.options.projectId,S)}(f,l),f);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),qn(vp,"4.7.5",e),qn(vp,"4.7.5","esm2017")})();var JT="firebase",ZT="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(JT,ZT,"app");const Pg="@firebase/installations",Uh="0.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=1e4,Ng=`w:${Uh}`,Dg="FIS_v2",e0="https://firebaseinstallations.googleapis.com/v1",t0=60*60*1e3,n0="installations",r0="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ni=new bl(n0,r0,i0);function Vg(i){return i instanceof Wr&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg({projectId:i}){return`${e0}/projects/${i}/installations`}function Og(i){return{token:i.token,requestStatus:2,expiresIn:o0(i.expiresIn),creationTime:Date.now()}}async function Mg(i,e){const o=(await e.json()).error;return Ni.create("request-failed",{requestName:i,serverCode:o.code,serverMessage:o.message,serverStatus:o.status})}function Fg({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function s0(i,{refreshToken:e}){const n=Fg(i);return n.append("Authorization",a0(e)),n}async function Ug(i){const e=await i();return e.status>=500&&e.status<600?i():e}function o0(i){return Number(i.replace("s","000"))}function a0(i){return`${Dg} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l0({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const o=Lg(i),l=Fg(i),c=e.getImmediate({optional:!0});if(c){const w=await c.getHeartbeatsHeader();w&&l.append("x-firebase-client",w)}const f={fid:n,authVersion:Dg,appId:i.appId,sdkVersion:Ng},m={method:"POST",headers:l,body:JSON.stringify(f)},_=await Ug(()=>fetch(o,m));if(_.ok){const w=await _.json();return{fid:w.fid||n,registrationStatus:2,refreshToken:w.refreshToken,authToken:Og(w.authToken)}}else throw await Mg("Create Installation",_)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=/^[cdef][\w-]{21}$/,dh="";function h0(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=f0(i);return c0.test(n)?n:dh}catch{return dh}}function f0(i){return u0(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map;function Bg(i,e){const n=tu(i);bg(n,e),d0(n,e)}function bg(i,e){const n=jg.get(i);if(n)for(const o of n)o(e)}function d0(i,e){const n=p0();n&&n.postMessage({key:i,fid:e}),m0()}let Ci=null;function p0(){return!Ci&&"BroadcastChannel"in self&&(Ci=new BroadcastChannel("[Firebase] FID Change"),Ci.onmessage=i=>{bg(i.data.key,i.data.fid)}),Ci}function m0(){jg.size===0&&Ci&&(Ci.close(),Ci=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="firebase-installations-database",y0=1,Di="firebase-installations-store";let qc=null;function zh(){return qc||(qc=Sm(g0,y0,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Di)}}})),qc}async function jl(i,e){const n=tu(i),l=(await zh()).transaction(Di,"readwrite"),c=l.objectStore(Di),f=await c.get(n);return await c.put(e,n),await l.done,(!f||f.fid!==e.fid)&&Bg(i,e.fid),e}async function qg(i){const e=tu(i),o=(await zh()).transaction(Di,"readwrite");await o.objectStore(Di).delete(e),await o.done}async function nu(i,e){const n=tu(i),l=(await zh()).transaction(Di,"readwrite"),c=l.objectStore(Di),f=await c.get(n),m=e(f);return m===void 0?await c.delete(n):await c.put(m,n),await l.done,m&&(!f||f.fid!==m.fid)&&Bg(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(i){let e;const n=await nu(i.appConfig,o=>{const l=_0(o),c=v0(i,l);return e=c.registrationPromise,c.installationEntry});return n.fid===dh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function _0(i){const e=i||{fid:h0(),registrationStatus:0};return $g(e)}function v0(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Ni.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},o=w0(i,n);return{installationEntry:n,registrationPromise:o}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:E0(i)}:{installationEntry:e}}async function w0(i,e){try{const n=await l0(i,e);return jl(i.appConfig,n)}catch(n){throw Vg(n)&&n.customData.serverCode===409?await qg(i.appConfig):await jl(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function E0(i){let e=await im(i.appConfig);for(;e.registrationStatus===1;)await zg(100),e=await im(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:o}=await jh(i);return o||n}return e}function im(i){return nu(i,e=>{if(!e)throw Ni.create("installation-not-found");return $g(e)})}function $g(i){return T0(i)?{fid:i.fid,registrationStatus:0}:i}function T0(i){return i.registrationStatus===1&&i.registrationTime+xg<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0({appConfig:i,heartbeatServiceProvider:e},n){const o=S0(i,n),l=s0(i,n),c=e.getImmediate({optional:!0});if(c){const w=await c.getHeartbeatsHeader();w&&l.append("x-firebase-client",w)}const f={installation:{sdkVersion:Ng,appId:i.appId}},m={method:"POST",headers:l,body:JSON.stringify(f)},_=await Ug(()=>fetch(o,m));if(_.ok){const w=await _.json();return Og(w)}else throw await Mg("Generate Auth Token",_)}function S0(i,{fid:e}){return`${Lg(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(i,e=!1){let n;const o=await nu(i.appConfig,c=>{if(!Hg(c))throw Ni.create("not-registered");const f=c.authToken;if(!e&&R0(f))return c;if(f.requestStatus===1)return n=A0(i,e),c;{if(!navigator.onLine)throw Ni.create("app-offline");const m=P0(c);return n=C0(i,m),m}});return n?await n:o.authToken}async function A0(i,e){let n=await sm(i.appConfig);for(;n.authToken.requestStatus===1;)await zg(100),n=await sm(i.appConfig);const o=n.authToken;return o.requestStatus===0?Bh(i,e):o}function sm(i){return nu(i,e=>{if(!Hg(e))throw Ni.create("not-registered");const n=e.authToken;return x0(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function C0(i,e){try{const n=await I0(i,e),o=Object.assign(Object.assign({},e),{authToken:n});return await jl(i.appConfig,o),n}catch(n){if(Vg(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await qg(i.appConfig);else{const o=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jl(i.appConfig,o)}throw n}}function Hg(i){return i!==void 0&&i.registrationStatus===2}function R0(i){return i.requestStatus===2&&!k0(i)}function k0(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+t0}function P0(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function x0(i){return i.requestStatus===1&&i.requestTime+xg<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N0(i){const e=i,{installationEntry:n,registrationPromise:o}=await jh(e);return o?o.catch(console.error):Bh(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D0(i,e=!1){const n=i;return await V0(n),(await Bh(n,e)).token}async function V0(i){const{registrationPromise:e}=await jh(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(i){if(!i||!i.options)throw $c("App Configuration");if(!i.name)throw $c("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw $c(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function $c(i){return Ni.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="installations",O0="installations-internal",M0=i=>{const e=i.getProvider("app").getImmediate(),n=L0(e),o=Jo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:o,_delete:()=>Promise.resolve()}},F0=i=>{const e=i.getProvider("app").getImmediate(),n=Jo(e,Gg).getImmediate();return{getId:()=>N0(n),getToken:l=>D0(n,l)}};function U0(){qr(new hr(Gg,M0,"PUBLIC")),qr(new hr(O0,F0,"PRIVATE"))}U0();qn(Pg,Uh);qn(Pg,Uh,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl="analytics",z0="firebase_id",j0="origin",B0=60*1e3,b0="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bh="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=new yh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},sn=new bl("analytics","Analytics",q0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(i){if(!i.startsWith(bh)){const e=sn.create("invalid-gtag-resource",{gtagURL:i});return Yt.warn(e.message),""}return i}function Qg(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function H0(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function G0(i,e){const n=H0("firebase-js-sdk-policy",{createScriptURL:$0}),o=document.createElement("script"),l=`${bh}?l=${i}&id=${e}`;o.src=n?n==null?void 0:n.createScriptURL(l):l,o.async=!0,document.head.appendChild(o)}function Q0(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function K0(i,e,n,o,l,c){const f=o[l];try{if(f)await e[f];else{const _=(await Qg(n)).find(w=>w.measurementId===l);_&&await e[_.appId]}}catch(m){Yt.error(m)}i("config",l,c)}async function W0(i,e,n,o,l){try{let c=[];if(l&&l.send_to){let f=l.send_to;Array.isArray(f)||(f=[f]);const m=await Qg(n);for(const _ of f){const w=m.find(O=>O.measurementId===_),S=w&&e[w.appId];if(S)c.push(S);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",o,l||{})}catch(c){Yt.error(c)}}function Y0(i,e,n,o){async function l(c,...f){try{if(c==="event"){const[m,_]=f;await W0(i,e,n,m,_)}else if(c==="config"){const[m,_]=f;await K0(i,e,n,o,m,_)}else if(c==="consent"){const[m,_]=f;i("consent",m,_)}else if(c==="get"){const[m,_,w]=f;i("get",m,_,w)}else if(c==="set"){const[m]=f;i("set",m)}else i(c,...f)}catch(m){Yt.error(m)}}return l}function X0(i,e,n,o,l){let c=function(...f){window[o].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=Y0(c,i,e,n),{gtagCore:c,wrappedGtag:window[l]}}function J0(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(bh)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=30,eI=1e3;class tI{constructor(e={},n=eI){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Kg=new tI;function nI(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function rI(i){var e;const{appId:n,apiKey:o}=i,l={method:"GET",headers:nI(o)},c=b0.replace("{app-id}",n),f=await fetch(c,l);if(f.status!==200&&f.status!==304){let m="";try{const _=await f.json();!((e=_.error)===null||e===void 0)&&e.message&&(m=_.error.message)}catch{}throw sn.create("config-fetch-failed",{httpStatus:f.status,responseMessage:m})}return f.json()}async function iI(i,e=Kg,n){const{appId:o,apiKey:l,measurementId:c}=i.options;if(!o)throw sn.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:o};throw sn.create("no-api-key")}const f=e.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new aI;return setTimeout(async()=>{m.abort()},B0),Wg({appId:o,apiKey:l,measurementId:c},f,m,e)}async function Wg(i,{throttleEndTimeMillis:e,backoffCount:n},o,l=Kg){var c;const{appId:f,measurementId:m}=i;try{await sI(o,e)}catch(_){if(m)return Yt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${_==null?void 0:_.message}]`),{appId:f,measurementId:m};throw _}try{const _=await rI(i);return l.deleteThrottleMetadata(f),_}catch(_){const w=_;if(!oI(w)){if(l.deleteThrottleMetadata(f),m)return Yt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${w==null?void 0:w.message}]`),{appId:f,measurementId:m};throw _}const S=Number((c=w==null?void 0:w.customData)===null||c===void 0?void 0:c.httpStatus)===503?up(n,l.intervalMillis,Z0):up(n,l.intervalMillis),O={throttleEndTimeMillis:Date.now()+S,backoffCount:n+1};return l.setThrottleMetadata(f,O),Yt.debug(`Calling attemptFetch again in ${S} millis`),Wg(i,O,o,l)}}function sI(i,e){return new Promise((n,o)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(n,l);i.addEventListener(()=>{clearTimeout(c),o(sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function oI(i){if(!(i instanceof Wr)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class aI{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function lI(i,e,n,o,l){if(l&&l.global){i("event",n,o);return}else{const c=await e,f=Object.assign(Object.assign({},o),{send_to:c});i("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(){if(wm())try{await Em()}catch(i){return Yt.warn(sn.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return Yt.warn(sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cI(i,e,n,o,l,c,f){var m;const _=iI(i);_.then($=>{n[$.measurementId]=$.appId,i.options.measurementId&&$.measurementId!==i.options.measurementId&&Yt.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${$.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($=>Yt.error($)),e.push(_);const w=uI().then($=>{if($)return o.getId()}),[S,O]=await Promise.all([_,w]);J0(c)||G0(c,S.measurementId),l("js",new Date);const z=(m=f==null?void 0:f.config)!==null&&m!==void 0?m:{};return z[j0]="firebase",z.update=!0,O!=null&&(z[z0]=O),l("config",S.measurementId,z),S.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.app=e}_delete(){return delete Go[this.app.options.appId],Promise.resolve()}}let Go={},om=[];const am={};let Hc="dataLayer",fI="gtag",lm,Yg,um=!1;function dI(){const i=[];if(M_()&&i.push("This is a browser extension environment."),U_()||i.push("Cookies are not available."),i.length>0){const e=i.map((o,l)=>`(${l+1}) ${o}`).join(" "),n=sn.create("invalid-analytics-context",{errorInfo:e});Yt.warn(n.message)}}function pI(i,e,n){dI();const o=i.options.appId;if(!o)throw sn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Yt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw sn.create("no-api-key");if(Go[o]!=null)throw sn.create("already-exists",{id:o});if(!um){Q0(Hc);const{wrappedGtag:c,gtagCore:f}=X0(Go,om,am,Hc,fI);Yg=c,lm=f,um=!0}return Go[o]=cI(i,om,am,e,lm,Hc,n),new hI(i)}function mI(i=Cm()){i=gh(i);const e=Jo(i,Bl);return e.isInitialized()?e.getImmediate():gI(i)}function gI(i,e={}){const n=Jo(i,Bl);if(n.isInitialized()){const l=n.getImmediate();if(Nl(e,n.getOptions()))return l;throw sn.create("already-initialized")}return n.initialize({options:e})}function yI(i,e,n,o){i=gh(i),lI(Yg,Go[i.app.options.appId],e,n,o).catch(l=>Yt.error(l))}const cm="@firebase/analytics",hm="0.10.10";function _I(){qr(new hr(Bl,(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return pI(o,l,n)},"PUBLIC")),qr(new hr("analytics-internal",i,"PRIVATE")),qn(cm,hm),qn(cm,hm,"esm2017");function i(e){try{const n=e.getProvider(Bl).getImmediate();return{logEvent:(o,l,c)=>yI(n,o,l,c)}}catch(n){throw sn.create("interop-component-reg-failed",{reason:n})}}}_I();const vI={apiKey:"AIzaSyAm2rplXj8Uxoj8xM7RPzJRO1aLvo4bZGQ",authDomain:"toidet.firebaseapp.com",projectId:"toidet",storageBucket:"toidet.firebasestorage.app",messagingSenderId:"57465849681",appId:"1:57465849681:web:c2dcb55b38926c3185b570",measurementId:"G-WR7XNE0Z2M"},Xg=Am(vI),wI=FT(Xg);mI(Xg);async function EI(){const i=MT(wI,"toilets");return(await XT(i)).docs.map(o=>({id:o.id,...o.data()}))}function TI(){const[i,e]=Lt.useState([]),{searchInput:n}=dm(),{selectedOptions:o}=mm();Lt.useEffect(()=>{async function c(){try{const f=await EI();e(f)}catch(f){console.error("Error fetching toilets:",f)}}c()},[]);const l=i.filter(c=>!(n&&!c.name.toLowerCase().includes(n.toLowerCase())&&n&&!c.location.toLowerCase().includes(n.toLowerCase())||o.unisex&&c.gender!=="unisex"||o.male&&c.gender!=="male"&&c.gender!=="unisex"||o.female&&c.gender!=="female"&&c.gender!=="unisex"||o.disabled&&!c.disabled||o.bidet&&!c.bidet));return se.jsxs("div",{className:"max-h-[555px] flex flex-col p-4 space-y-4 overflow-auto mt-8",children:[se.jsx("div",{className:"justify-center text-green-800 flex text-2xl font-semibold",children:"NUS Toilet Finder"}),l.length===0?se.jsx("div",{className:"justify-center text-neutral-500 flex text-2xl",children:"No Toilet Found"}):l.map(c=>se.jsx(E_,{toilet:c},c.id))]})}const II=""+new URL("logo-UOLF_DkE.png",import.meta.url).href;function SI(){return se.jsx("footer",{className:"bg-green-500 p-4 fixed bottom-0 w-full flex items-center justify-center",children:se.jsxs("div",{className:"flex items-center space-x-2",children:[se.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full",children:se.jsx("img",{src:II,alt:"Logo",className:"w-full h-full object-cover rounded-full"})}),se.jsx("h1",{className:"text-2xl font-bold text-white",children:"toidet"})]})})}function AI(){return se.jsx(u_,{children:se.jsx(c_,{children:se.jsxs("div",{className:"bg-white p-0 w-screen min-h-screen flex-col",children:[se.jsx(g_,{}),se.jsx(gm,{}),se.jsx(TI,{}),se.jsx(SI,{className:"mt-auto"})]})})})}l_.createRoot(document.getElementById("root")).render(se.jsx(Lt.StrictMode,{children:se.jsx(AI,{})}));
